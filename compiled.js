/*
: http://creativecommons.org/publicdomain/zero/1.0/
 https://mths.be/punycode v1.4.1 by @mathias  pixi-particles - v3.1.0
 Compiled Wed, 29 Aug 2018 15:47:46 UTC

 pixi-particles is licensed under the MIT License.
 http://www.opensource.org/licenses/mit-license
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(b){var k=function(){};k.prototype=b;return new k};$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},k={};try{return k.__proto__=b,k.a}catch(g){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,k){b.__proto__=k;if(b.__proto__!==k)throw new TypeError(b+" is not extensible");return b}:null;
$jscomp.inherits=function(b,k){b.prototype=$jscomp.objectCreate(k.prototype);b.prototype.constructor=b;if($jscomp.setPrototypeOf){var g=$jscomp.setPrototypeOf;g(b,k)}else for(g in k)if("prototype"!=g)if(Object.defineProperties){var h=Object.getOwnPropertyDescriptor(k,g);h&&Object.defineProperty(b,g,h)}else b[g]=k[g];b.superClass_=k.prototype};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,k,g){b!=Array.prototype&&b!=Object.prototype&&(b[k]=g.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.Symbol=function(){var b=0;return function(k){return $jscomp.SYMBOL_PREFIX+(k||"")+b++}}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.asyncIterator;b||(b=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(b){var k=0;return $jscomp.iteratorPrototype(function(){return k<b.length?{done:!1,value:b[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.iteratorFromArray=function(b,k){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var g=0,h={next:function(){if(g<b.length){var m=g++;return{value:k(m,b[m]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill=function(b,k,g,h){if(k){g=$jscomp.global;b=b.split(".");for(h=0;h<b.length-1;h++){var m=b[h];m in g||(g[m]={});g=g[m]}b=b[b.length-1];h=g[b];k=k(h);k!=h&&null!=k&&$jscomp.defineProperty(g,b,{configurable:!0,writable:!0,value:k})}};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(b){return b?b:function(){return[]}},"es6","es5");
$jscomp.owns=function(b,k){return Object.prototype.hasOwnProperty.call(b,k)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(b,k){for(var g=1;g<arguments.length;g++){var h=arguments[g];if(h)for(var m in h)$jscomp.owns(h,m)&&(b[m]=h[m])}return b};$jscomp.polyfill("Object.assign",function(b){return b||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.setPrototypeOf",function(b){return b||$jscomp.setPrototypeOf},"es6","es5");
$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(b,g,h){var m=this.length||0;0>g&&(g=Math.max(0,m+g));if(null==h||h>m)h=m;h=Number(h);0>h&&(h=Math.max(0,m+h));for(g=Number(g||0);g<h;g++)this[g]=b;return this}},"es6","es3");$jscomp.polyfill("Math.sign",function(b){return b?b:function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1}},"es6","es3");
$jscomp.polyfill("Number.isFinite",function(b){return b?b:function(b){return"number"!==typeof b?!1:!isNaN(b)&&Infinity!==b&&-Infinity!==b}},"es6","es3");$jscomp.polyfill("Number.isInteger",function(b){return b?b:function(b){return Number.isFinite(b)?b===Math.floor(b):!1}},"es6","es3");
(function(){function b(k,g,h){function m(c,a){if(!g[c]){if(!k[c]){var e="function"==typeof require&&require;if(!a&&e)return e(c,!0);if(d)return d(c,!0);a=Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a;}a=g[c]={exports:{}};k[c][0].call(a.exports,function(a){return m(k[c][1][a]||a)},a,a.exports,b,k,g,h)}return g[c].exports}for(var d="function"==typeof require&&require,f=0;f<h.length;f++)m(h[f]);return m}return b})()({1:[function(b,k,g){(function(b){function m(c,a){for(var e=0,
d=c.length-1;0<=d;d--){var f=c[d];"."===f?c.splice(d,1):".."===f?(c.splice(d,1),e++):e&&(c.splice(d,1),e--)}if(a)for(;e--;e)c.unshift("..");return c}function d(c,a){if(c.filter)return c.filter(a);for(var e=[],d=0;d<c.length;d++)a(c[d],d,c)&&e.push(c[d]);return e}g.resolve=function(){for(var c="",a=!1,e=arguments.length-1;-1<=e&&!a;e--){var f=0<=e?arguments[e]:b.cwd();if("string"!==typeof f)throw new TypeError("Arguments to path.resolve must be strings");f&&(c=f+"/"+c,a="/"===f.charAt(0))}c=m(d(c.split("/"),
function(a){return!!a}),!a).join("/");return(a?"/":"")+c||"."};g.normalize=function(c){var a=g.isAbsolute(c),e="/"===f(c,-1);(c=m(d(c.split("/"),function(a){return!!a}),!a).join("/"))||a||(c=".");c&&e&&(c+="/");return(a?"/":"")+c};g.isAbsolute=function(c){return"/"===c.charAt(0)};g.join=function(){var c=Array.prototype.slice.call(arguments,0);return g.normalize(d(c,function(a,c){if("string"!==typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))};g.relative=
function(c,a){function e(a){for(var c=0;c<a.length&&""===a[c];c++);for(var e=a.length-1;0<=e&&""===a[e];e--);return c>e?[]:a.slice(c,e-c+1)}c=g.resolve(c).substr(1);a=g.resolve(a).substr(1);c=e(c.split("/"));a=e(a.split("/"));for(var d=Math.min(c.length,a.length),f=d,n=0;n<d;n++)if(c[n]!==a[n]){f=n;break}d=[];for(n=f;n<c.length;n++)d.push("..");d=d.concat(a.slice(f));return d.join("/")};g.sep="/";g.delimiter=":";g.dirname=function(c){"string"!==typeof c&&(c+="");if(0===c.length)return".";for(var a=
c.charCodeAt(0),e=47===a,d=-1,f=!0,n=c.length-1;1<=n;--n)if(a=c.charCodeAt(n),47===a){if(!f){d=n;break}}else f=!1;return-1===d?e?"/":".":e&&1===d?"/":c.slice(0,d)};g.basename=function(c,a){"string"!==typeof c&&(c+="");var e=0,d=-1,f=!0,n;for(n=c.length-1;0<=n;--n)if(47===c.charCodeAt(n)){if(!f){e=n+1;break}}else-1===d&&(f=!1,d=n+1);c=-1===d?"":c.slice(e,d);a&&c.substr(-1*a.length)===a&&(c=c.substr(0,c.length-a.length));return c};g.extname=function(c){"string"!==typeof c&&(c+="");for(var a=-1,e=0,
d=-1,f=!0,n=0,p=c.length-1;0<=p;--p){var b=c.charCodeAt(p);if(47===b){if(!f){e=p+1;break}}else-1===d&&(f=!1,d=p+1),46===b?-1===a?a=p:1!==n&&(n=1):-1!==a&&(n=-1)}return-1===a||-1===d||0===n||1===n&&a===d-1&&a===e+1?"":c.slice(a,d)};var f="b"==="ab".substr(-1)?function(c,a,e){return c.substr(a,e)}:function(c,a,e){0>a&&(a=c.length+a);return c.substr(a,e)}}).call(this,b("_process"))},{_process:2}],2:[function(b,k,g){function h(){throw Error("setTimeout has not been defined");}function m(){throw Error("clearTimeout has not been defined");
}function d(a){if(q===setTimeout)return setTimeout(a,0);if((q===h||!q)&&setTimeout)return q=setTimeout,setTimeout(a,0);try{return q(a,0)}catch(A){try{return q.call(null,a,0)}catch(u){return q.call(this,a,0)}}}function f(a){if(n===clearTimeout)return clearTimeout(a);if((n===m||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(a);try{return n(a)}catch(A){try{return n.call(null,a)}catch(u){return n.call(this,a)}}}function c(){x&&t&&(x=!1,t.length?p=t.concat(p):v=-1,p.length&&a())}function a(){if(!x){var a=
d(c);x=!0;for(var e=p.length;e;){t=p;for(p=[];++v<e;)t&&t[v].run();v=-1;e=p.length}t=null;x=!1;f(a)}}function e(a,c){this.fun=a;this.array=c}function l(){}b=k.exports={};try{var q="function"===typeof setTimeout?setTimeout:h}catch(w){q=h}try{var n="function"===typeof clearTimeout?clearTimeout:m}catch(w){n=m}var p=[],x=!1,t,v=-1;b.nextTick=function(c){var f=Array(arguments.length-1);if(1<arguments.length)for(var l=1;l<arguments.length;l++)f[l-1]=arguments[l];p.push(new e(c,f));1!==p.length||x||d(a)};
e.prototype.run=function(){this.fun.apply(null,this.array)};b.title="browser";b.browser=!0;b.env={};b.argv=[];b.version="";b.versions={};b.on=l;b.addListener=l;b.once=l;b.off=l;b.removeListener=l;b.removeAllListeners=l;b.emit=l;b.prependListener=l;b.prependOnceListener=l;b.listeners=function(a){return[]};b.binding=function(a){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(a){throw Error("process.chdir is not supported");};b.umask=function(){return 0}},
{}],3:[function(b,k,g){(function(b){(function(m){function d(a){throw new RangeError(z[a]);}function f(a,c){for(var e=a.length,d=[];e--;)d[e]=c(a[e]);return d}function c(a,c){var e=a.split("@"),d="";1<e.length&&(d=e[0]+"@",a=e[1]);a=a.replace(u,".");a=a.split(".");c=f(a,c).join(".");return d+c}function a(a){for(var c=[],e=0,d=a.length,f,l;e<d;)f=a.charCodeAt(e++),55296<=f&&56319>=f&&e<d?(l=a.charCodeAt(e++),56320==(l&64512)?c.push(((f&1023)<<10)+(l&1023)+65536):(c.push(f),e--)):c.push(f);return c}
function e(a){return f(a,function(a){var c="";65535<a&&(a-=65536,c+=B(a>>>10&1023|55296),a=56320|a&1023);return c+=B(a)}).join("")}function l(a,c){return a+22+75*(26>a)-((0!=c)<<5)}function q(a,c,e){var d=0;a=e?y(a/700):a>>1;for(a+=y(a/c);455<a;d+=36)a=y(a/35);return y(d+36*a/(a+38))}function n(a){var c=[],f=a.length,l=0,p=128,n=72,b,m;var x=a.lastIndexOf("-");0>x&&(x=0);for(b=0;b<x;++b)128<=a.charCodeAt(b)&&d("not-basic"),c.push(a.charCodeAt(b));for(x=0<x?x+1:0;x<f;){b=l;var h=1;for(m=36;;m+=36){x>=
f&&d("invalid-input");var t=a.charCodeAt(x++);t=10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:36;(36<=t||t>y((2147483647-l)/h))&&d("overflow");l+=t*h;var g=m<=n?1:m>=n+26?26:m-n;if(t<g)break;t=36-g;h>y(2147483647/t)&&d("overflow");h*=t}h=c.length+1;n=q(l-b,h,0==b);y(l/h)>2147483647-p&&d("overflow");p+=y(l/h);l%=h;c.splice(l++,0,p)}return e(c)}function p(c){var e,f,p,n=[];c=a(c);var b=c.length;var m=128;var x=0;var t=72;for(p=0;p<b;++p){var h=c[p];128>h&&n.push(B(h))}for((e=f=n.length)&&n.push("-");e<b;){var g=
2147483647;for(p=0;p<b;++p)h=c[p],h>=m&&h<g&&(g=h);var v=e+1;g-m>y((2147483647-x)/v)&&d("overflow");x+=(g-m)*v;m=g;for(p=0;p<b;++p)if(h=c[p],h<m&&2147483647<++x&&d("overflow"),h==m){var C=x;for(g=36;;g+=36){h=g<=t?1:g>=t+26?26:g-t;if(C<h)break;var u=C-h;C=36-h;n.push(B(l(h+u%C,0)));C=y(u/C)}n.push(B(l(C,0)));t=q(x,v,e==f);x=0;++e}++x;++m}return n.join("")}var x="object"==typeof g&&g&&!g.nodeType&&g,t="object"==typeof k&&k&&!k.nodeType&&k,h="object"==typeof b&&b;if(h.global===h||h.window===h||h.self===
h)m=h;var w=/^xn--/,A=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,z={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=Math.floor,B=String.fromCharCode,C;var r={version:"1.4.1",ucs2:{decode:a,encode:e},decode:n,encode:p,toASCII:function(a){return c(a,function(a){return A.test(a)?"xn--"+p(a):a})},toUnicode:function(a){return c(a,function(a){return w.test(a)?n(a.slice(4).toLowerCase()):a})}};if("function"==
typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return r});else if(x&&t)if(k.exports==x)t.exports=r;else for(C in r)r.hasOwnProperty(C)&&(x[C]=r[C]);else m.punycode=r})(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],4:[function(b,k,g){k.exports=function(b,d,f,c){f=f||"=";var a={};if("string"!==typeof b||0===b.length)return a;var e=/\+/g;b=b.split(d||"&");d=1E3;c&&"number"===typeof c.maxKeys&&
(d=c.maxKeys);c=b.length;0<d&&c>d&&(c=d);for(d=0;d<c;++d){var l=b[d].replace(e,"%20"),q=l.indexOf(f);if(0<=q){var n=l.substr(0,q);l=l.substr(q+1)}else n=l,l="";n=decodeURIComponent(n);l=decodeURIComponent(l);Object.prototype.hasOwnProperty.call(a,n)?h(a[n])?a[n].push(l):a[n]=[a[n],l]:a[n]=l}return a};var h=Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)}},{}],5:[function(b,k,g){function h(c,a){if(c.map)return c.map(a);for(var e=[],d=0;d<c.length;d++)e.push(a(c[d],
d));return e}var m=function(c){switch(typeof c){case "string":return c;case "boolean":return c?"true":"false";case "number":return isFinite(c)?c:"";default:return""}};k.exports=function(c,a,e,l){a=a||"&";e=e||"=";null===c&&(c=void 0);return"object"===typeof c?h(f(c),function(f){var l=encodeURIComponent(m(f))+e;return d(c[f])?h(c[f],function(a){return l+encodeURIComponent(m(a))}).join(a):l+encodeURIComponent(m(c[f]))}).join(a):l?encodeURIComponent(m(l))+e+encodeURIComponent(m(c)):""};var d=Array.isArray||
function(c){return"[object Array]"===Object.prototype.toString.call(c)},f=Object.keys||function(c){var a=[],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&a.push(e);return a}},{}],6:[function(b,k,g){g.decode=g.parse=b("./decode");g.encode=g.stringify=b("./encode")},{"./decode":4,"./encode":5}],7:[function(b,k,g){function h(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function m(a,c,e){if(a&&
f.isObject(a)&&a instanceof h)return a;var d=new h;d.parse(a,c,e);return d}var d=b("punycode"),f=b("./util");g.parse=m;g.resolve=function(a,c){return m(a,!1,!0).resolve(c)};g.resolveObject=function(a,c){return a?m(a,!1,!0).resolveObject(c):c};g.format=function(a){f.isString(a)&&(a=m(a));return a instanceof h?a.format():h.prototype.format.call(a)};g.Url=h;var c=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,e=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/;k="{}|\\^`".split("").concat('<>"` \r\n\t'.split(""));var l=["'"].concat(k),
q=["%","/","?",";","#"].concat(l),n=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,x=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,t={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=b("querystring");h.prototype.parse=function(a,b,m){if(!f.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var h=a.indexOf("?");h=-1!==h&&h<a.indexOf("#")?"?":"#";a=a.split(h);a[0]=a[0].replace(/\\/g,
"/");a=a.join(h);h=a.trim();if(!m&&1===a.split("#").length&&(a=e.exec(h)))return this.href=this.path=h,this.pathname=a[1],a[2]?(this.search=a[2],this.query=b?A.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query={}),this;if(a=c.exec(h)){a=a[0];var g=a.toLowerCase();this.protocol=g;h=h.substr(a.length)}if(m||a||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var r="//"===h.substr(0,2);!r||a&&v[a]||(h=h.substr(2),this.slashes=!0)}if(!v[a]&&(r||a&&!w[a])){r=-1;for(m=0;m<n.length;m++)a=
h.indexOf(n[m]),-1!==a&&(-1===r||a<r)&&(r=a);r=-1===r?h.lastIndexOf("@"):h.lastIndexOf("@",r);-1!==r&&(m=h.slice(0,r),h=h.slice(r+1),this.auth=decodeURIComponent(m));r=-1;for(m=0;m<q.length;m++)a=h.indexOf(q[m]),-1!==a&&(-1===r||a<r)&&(r=a);-1===r&&(r=h.length);this.host=h.slice(0,r);h=h.slice(r);this.parseHost();this.hostname=this.hostname||"";r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r){var u=this.hostname.split(/\./);m=0;for(a=u.length;m<a;m++){var k=u[m];if(k&&
!k.match(p)){for(var z="",y=0,I=k.length;y<I;y++)z=127<k.charCodeAt(y)?z+"x":z+k[y];if(!z.match(p)){a=u.slice(0,m);m=u.slice(m+1);if(k=k.match(x))a.push(k[1]),m.unshift(k[2]);m.length&&(h="/"+m.join(".")+h);this.hostname=a.join(".");break}}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase();r||(this.hostname=d.toASCII(this.hostname));m=this.port?":"+this.port:"";this.host=(this.hostname||"")+m;this.href+=this.host;r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),
"/"!==h[0]&&(h="/"+h))}if(!t[g])for(m=0,a=l.length;m<a;m++)r=l[m],-1!==h.indexOf(r)&&(k=encodeURIComponent(r),k===r&&(k=escape(r)),h=h.split(r).join(k));m=h.indexOf("#");-1!==m&&(this.hash=h.substr(m),h=h.slice(0,m));m=h.indexOf("?");-1!==m?(this.search=h.substr(m),this.query=h.substr(m+1),b&&(this.query=A.parse(this.query)),h=h.slice(0,m)):b&&(this.search="",this.query={});h&&(this.pathname=h);w[g]&&this.hostname&&!this.pathname&&(this.pathname="/");if(this.pathname||this.search)m=this.pathname||
"",this.path=m+(this.search||"");this.href=this.format();return this};h.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var c=this.protocol||"",e=this.pathname||"",d=this.hash||"",l=!1,p="";this.host?l=a+this.host:this.hostname&&(l=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(l+=":"+this.port));this.query&&f.isObject(this.query)&&Object.keys(this.query).length&&(p=A.stringify(this.query));a=this.search||
p&&"?"+p||"";c&&":"!==c.substr(-1)&&(c+=":");this.slashes||(!c||w[c])&&!1!==l?(l="//"+(l||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):l||(l="");d&&"#"!==d.charAt(0)&&(d="#"+d);a&&"?"!==a.charAt(0)&&(a="?"+a);e=e.replace(/[?#]/g,function(a){return encodeURIComponent(a)});a=a.replace("#","%23");return c+l+e+a+d};h.prototype.resolve=function(a){return this.resolveObject(m(a,!1,!0)).format()};h.prototype.resolveObject=function(a){if(f.isString(a)){var c=new h;c.parse(a,!1,!0);a=c}c=new h;for(var e=Object.keys(this),
d=0;d<e.length;d++){var l=e[d];c[l]=this[l]}c.hash=a.hash;if(""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){e=Object.keys(a);for(d=0;d<e.length;d++)l=e[d],"protocol"!==l&&(c[l]=a[l]);w[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/");c.href=c.format();return c}if(a.protocol&&a.protocol!==c.protocol){if(!w[a.protocol]){e=Object.keys(a);for(d=0;d<e.length;d++)l=e[d],c[l]=a[l];c.href=c.format();return c}c.protocol=a.protocol;if(a.host||v[a.protocol])c.pathname=a.pathname;
else{for(var p=(a.pathname||"").split("/");p.length&&!(a.host=p.shift()););a.host||(a.host="");a.hostname||(a.hostname="");""!==p[0]&&p.unshift("");2>p.length&&p.unshift("");c.pathname=p.join("/")}c.search=a.search;c.query=a.query;c.host=a.host||"";c.auth=a.auth;c.hostname=a.hostname||a.host;c.port=a.port;if(c.pathname||c.search)c.path=(c.pathname||"")+(c.search||"");c.slashes=c.slashes||a.slashes;c.href=c.format();return c}e=c.pathname&&"/"===c.pathname.charAt(0);var n=a.host||a.pathname&&"/"===
a.pathname.charAt(0),b=e=n||e||c.host&&a.pathname;d=c.pathname&&c.pathname.split("/")||[];p=a.pathname&&a.pathname.split("/")||[];if(l=c.protocol&&!w[c.protocol])c.hostname="",c.port=null,c.host&&(""===d[0]?d[0]=c.host:d.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===p[0]?p[0]=a.host:p.unshift(a.host)),a.host=null),e=e&&(""===p[0]||""===d[0]);if(n)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,
c.query=a.query,d=p;else if(p.length)d||(d=[]),d.pop(),d=d.concat(p),c.search=a.search,c.query=a.query;else if(!f.isNullOrUndefined(a.search))return l&&(c.hostname=c.host=d.shift(),l=c.host&&0<c.host.indexOf("@")?c.host.split("@"):!1)&&(c.auth=l.shift(),c.host=c.hostname=l.shift()),c.search=a.search,c.query=a.query,f.isNull(c.pathname)&&f.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c;if(!d.length)return c.pathname=null,c.path=c.search?"/"+c.search:
null,c.href=c.format(),c;n=d.slice(-1)[0];p=(c.host||a.host||1<d.length)&&("."===n||".."===n)||""===n;for(var q=0,m=d.length;0<=m;m--)n=d[m],"."===n?d.splice(m,1):".."===n?(d.splice(m,1),q++):q&&(d.splice(m,1),q--);if(!e&&!b)for(;q--;q)d.unshift("..");!e||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift("");p&&"/"!==d.join("/").substr(-1)&&d.push("");b=""===d[0]||d[0]&&"/"===d[0].charAt(0);l&&(c.hostname=c.host=b?"":d.length?d.shift():"",l=c.host&&0<c.host.indexOf("@")?c.host.split("@"):!1)&&(c.auth=
l.shift(),c.host=c.hostname=l.shift());(e=e||c.host&&d.length)&&!b&&d.unshift("");d.length?c.pathname=d.join("/"):(c.pathname=null,c.path=null);f.isNull(c.pathname)&&f.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:""));c.auth=a.auth||c.auth;c.slashes=c.slashes||a.slashes;c.href=c.format();return c};h.prototype.parseHost=function(){var c=this.host,e=a.exec(c);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),c=c.substr(0,c.length-e.length));c&&(this.hostname=c)}},{"./util":8,punycode:3,
querystring:6}],8:[function(b,k,g){k.exports={isString:function(b){return"string"===typeof b},isObject:function(b){return"object"===typeof b&&null!==b},isNull:function(b){return null===b},isNullOrUndefined:function(b){return null==b}}},{}],9:[function(b,k,g){function h(d){var f=32;(d&=-d)&&f--;d&65535&&(f-=16);d&16711935&&(f-=8);d&252645135&&(f-=4);d&858993459&&(f-=2);d&1431655765&&--f;return f}"use restrict";g.INT_BITS=32;g.INT_MAX=2147483647;g.INT_MIN=-2147483648;g.sign=function(d){return(0<d)-
(0>d)};g.abs=function(d){var f=d>>31;return(d^f)-f};g.min=function(d,f){return f^(d^f)&-(d<f)};g.max=function(d,f){return d^(d^f)&-(d<f)};g.isPow2=function(d){return!(d&d-1)&&!!d};g.log2=function(d){var f=(65535<d)<<4;d>>>=f;var c=(255<d)<<3;d>>>=c;f|=c;c=(15<d)<<2;d>>>=c;f|=c;c=(3<d)<<1;return f|c|d>>>c>>1};g.log10=function(d){return 1E9<=d?9:1E8<=d?8:1E7<=d?7:1E6<=d?6:1E5<=d?5:1E4<=d?4:1E3<=d?3:100<=d?2:10<=d?1:0};g.popCount=function(d){d-=d>>>1&1431655765;d=(d&858993459)+(d>>>2&858993459);return 16843009*
(d+(d>>>4)&252645135)>>>24};g.countTrailingZeros=h;g.nextPow2=function(d){d+=0===d;--d;d|=d>>>1;d|=d>>>2;d|=d>>>4;d|=d>>>8;return(d|d>>>16)+1};g.prevPow2=function(d){d|=d>>>1;d|=d>>>2;d|=d>>>4;d|=d>>>8;d|=d>>>16;return d-(d>>>1)};g.parity=function(d){d^=d>>>16;d^=d>>>8;return 27030>>>((d^d>>>4)&15)&1};var m=Array(256);(function(d){for(var f=0;256>f;++f){var c=f,a=f,e=7;for(c>>>=1;c;c>>>=1)a<<=1,a|=c&1,--e;d[f]=a<<e&255}})(m);g.reverse=function(d){return m[d&255]<<24|m[d>>>8&255]<<16|m[d>>>16&255]<<
8|m[d>>>24&255]};g.interleave2=function(d,f){d&=65535;d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;f&=65535;f=(f|f<<8)&16711935;f=(f|f<<4)&252645135;f=(f|f<<2)&858993459;return(d|d<<1)&1431655765|((f|f<<1)&1431655765)<<1};g.deinterleave2=function(d,f){d=d>>>f&1431655765;d=(d|d>>>1)&858993459;d=(d|d>>>2)&252645135;d=(d|d>>>4)&16711935;return((d|d>>>16)&65535)<<16>>16};g.interleave3=function(d,f,c){d&=1023;d=(d|d<<16)&4278190335;d=(d|d<<8)&251719695;d=(d|d<<4)&3272356035;f&=1023;f=
(f|f<<16)&4278190335;f=(f|f<<8)&251719695;f=(f|f<<4)&3272356035;c&=1023;c=(c|c<<16)&4278190335;c=(c|c<<8)&251719695;c=(c|c<<4)&3272356035;return(d|d<<2)&1227133513|((f|f<<2)&1227133513)<<1|((c|c<<2)&1227133513)<<2};g.deinterleave3=function(d,f){d=d>>>f&1227133513;d=(d|d>>>2)&3272356035;d=(d|d>>>4)&251719695;d=(d|d>>>8)&4278190335;return((d|d>>>16)&1023)<<22>>22};g.nextCombination=function(d){var f=d|d-1;return f+1|(~f&-~f)-1>>>h(d)+1}},{}],10:[function(b,k,g){function h(c,l,p){p=p||2;var n=l&&l.length,
b=n?l[0]*p:c.length,x=m(c,0,b,p,!0),h=[];if(!x)return h;var t;if(n){var g=p;n=[];var v;var C=0;for(v=l.length;C<v;C++){var r=l[C]*g;var A=C<v-1?l[C+1]*g:c.length;r=m(c,r,A,g,!1);r===r.next&&(r.steiner=!0);n.push(q(r))}n.sort(a);for(C=0;C<n.length;C++){l=n[C];g=x;if(g=e(l,g))l=w(g,l),d(l,l.next);x=d(x,x.next)}}if(c.length>80*p){var k=t=c[0];var u=n=c[1];for(g=p;g<b;g+=p)C=c[g],l=c[g+1],C<k&&(k=C),l<u&&(u=l),C>t&&(t=C),l>n&&(n=l);t=Math.max(t-k,n-u);t=0!==t?1/t:0}f(x,h,p,k,u,t);return h}function m(a,
c,e,d,f){if(f===0<y(a,c,e,d))for(f=c;f<e;f+=d)var l=A(f,a[f],a[f+1],l);else for(f=e-d;f>=c;f-=d)l=A(f,a[f],a[f+1],l);l&&x(l,l.next)&&(u(l),l=l.next);return l}function d(a,c){if(!a)return a;c||(c=a);do{var e=!1;if(a.steiner||!x(a,a.next)&&0!==p(a.prev,a,a.next))a=a.next;else{u(a);a=c=a.prev;if(a===a.next)break;e=!0}}while(e||a!==c);return c}function f(a,e,b,q,m,h,g){if(a){if(!g&&h){var C=a,r=C;do null===r.z&&(r.z=l(r.x,r.y,q,m,h)),r.prevZ=r.prev,r=r.nextZ=r.next;while(r!==C);r.prevZ.nextZ=null;r.prevZ=
null;C=r;var A,k,B,y,z=1;do{r=C;var D=C=null;for(k=0;r;){k++;var E=r;for(A=B=0;A<z&&(B++,E=E.nextZ,E);A++);for(y=z;0<B||0<y&&E;)0!==B&&(0===y||!E||r.z<=E.z)?(A=r,r=r.nextZ,B--):(A=E,E=E.nextZ,y--),D?D.nextZ=A:C=A,A.prevZ=D,D=A;r=E}D.nextZ=null;z*=2}while(1<k)}for(C=a;a.prev!==a.next;){r=a.prev;E=a.next;if(h)D=c(a,q,m,h);else a:if(D=a,k=D.prev,B=D,z=D.next,0<=p(k,B,z))D=!1;else{for(A=D.next.next;A!==D.prev;){if(n(k.x,k.y,B.x,B.y,z.x,z.y,A.x,A.y)&&0<=p(A.prev,A,A.next)){D=!1;break a}A=A.next}D=!0}if(D)e.push(r.i/
b),e.push(a.i/b),e.push(E.i/b),u(a),C=a=E.next;else if(a=E,a===C){if(!g)f(d(a),e,b,q,m,h,1);else if(1===g){g=e;C=b;r=a;do E=r.prev,D=r.next.next,!x(E,D)&&t(E,r,r.next,D)&&v(E,D)&&v(D,E)&&(g.push(E.i/C),g.push(r.i/C),g.push(D.i/C),u(r),u(r.next),r=a=D),r=r.next;while(r!==a);a=r;f(a,e,b,q,m,h,2)}else if(2===g)a:{g=a;do{for(C=g.next.next;C!==g.prev;){if(r=g.i!==C.i){r=g;E=C;if(D=r.next.i!==E.i&&r.prev.i!==E.i){b:{D=r;do{if(D.i!==r.i&&D.next.i!==r.i&&D.i!==E.i&&D.next.i!==E.i&&t(D,D.next,r,E)){D=!0;break b}D=
D.next}while(D!==r);D=!1}D=!D}if(D=D&&v(r,E)&&v(E,r)){D=r;k=!1;B=(r.x+E.x)/2;E=(r.y+E.y)/2;do D.y>E!==D.next.y>E&&D.next.y!==D.y&&B<(D.next.x-D.x)*(E-D.y)/(D.next.y-D.y)+D.x&&(k=!k),D=D.next;while(D!==r);D=k}r=D}if(r){a=w(g,C);g=d(g,g.next);a=d(a,a.next);f(g,e,b,q,m,h);f(a,e,b,q,m,h);break a}C=C.next}g=g.next}while(g!==a)}break}}}}function c(a,c,e,d){var f=a.prev,b=a.next;if(0<=p(f,a,b))return!1;var q=f.x>a.x?f.x>b.x?f.x:b.x:a.x>b.x?a.x:b.x,m=f.y>a.y?f.y>b.y?f.y:b.y:a.y>b.y?a.y:b.y,x=l(f.x<a.x?f.x<
b.x?f.x:b.x:a.x<b.x?a.x:b.x,f.y<a.y?f.y<b.y?f.y:b.y:a.y<b.y?a.y:b.y,c,e,d);c=l(q,m,c,e,d);e=a.prevZ;for(d=a.nextZ;e&&e.z>=x&&d&&d.z<=c;){if(e!==a.prev&&e!==a.next&&n(f.x,f.y,a.x,a.y,b.x,b.y,e.x,e.y)&&0<=p(e.prev,e,e.next))return!1;e=e.prevZ;if(d!==a.prev&&d!==a.next&&n(f.x,f.y,a.x,a.y,b.x,b.y,d.x,d.y)&&0<=p(d.prev,d,d.next))return!1;d=d.nextZ}for(;e&&e.z>=x;){if(e!==a.prev&&e!==a.next&&n(f.x,f.y,a.x,a.y,b.x,b.y,e.x,e.y)&&0<=p(e.prev,e,e.next))return!1;e=e.prevZ}for(;d&&d.z<=c;){if(d!==a.prev&&d!==
a.next&&n(f.x,f.y,a.x,a.y,b.x,b.y,d.x,d.y)&&0<=p(d.prev,d,d.next))return!1;d=d.nextZ}return!0}function a(a,c){return a.x-c.x}function e(a,c){var e=c,d=a.x,f=a.y,l=-Infinity;do{if(f<=e.y&&f>=e.next.y&&e.next.y!==e.y){var p=e.x+(f-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(p<=d&&p>l){l=p;if(p===d){if(f===e.y)return e;if(f===e.next.y)return e.next}var b=e.x<e.next.x?e:e.next}}e=e.next}while(e!==c);if(!b)return null;if(d===l)return b.prev;c=b;p=b.x;var q=b.y,m=Infinity;for(e=b.next;e!==c;){if(d>=e.x&&e.x>=
p&&d!==e.x&&n(f<q?d:l,f,p,q,f<q?l:d,f,e.x,e.y)){var x=Math.abs(f-e.y)/(d-e.x);(x<m||x===m&&e.x>b.x)&&v(e,a)&&(b=e,m=x)}e=e.next}return b}function l(a,c,e,d,f){a=32767*(a-e)*f;c=32767*(c-d)*f;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;c=(c|c<<8)&16711935;c=(c|c<<4)&252645135;c=(c|c<<2)&858993459;return(a|a<<1)&1431655765|((c|c<<1)&1431655765)<<1}function q(a){var c=a,e=a;do c.x<e.x&&(e=c),c=c.next;while(c!==a);return e}function n(a,c,e,d,f,l,p,b){return 0<=(f-p)*(c-b)-(a-p)*(l-b)&&
0<=(a-p)*(d-b)-(e-p)*(c-b)&&0<=(e-p)*(l-b)-(f-p)*(d-b)}function p(a,c,e){return(c.y-a.y)*(e.x-c.x)-(c.x-a.x)*(e.y-c.y)}function x(a,c){return a.x===c.x&&a.y===c.y}function t(a,c,e,d){return x(a,c)&&x(e,d)||x(a,d)&&x(e,c)?!0:0<p(a,c,e)!==0<p(a,c,d)&&0<p(e,d,a)!==0<p(e,d,c)}function v(a,c){return 0>p(a.prev,a,a.next)?0<=p(a,c,a.next)&&0<=p(a,a.prev,c):0>p(a,c,a.prev)||0>p(a,a.next,c)}function w(a,c){var e=new z(a.i,a.x,a.y),d=new z(c.i,c.x,c.y),f=a.next,l=c.prev;a.next=c;c.prev=a;e.next=f;f.prev=e;
d.next=e;e.prev=d;l.next=d;d.prev=l;return d}function A(a,c,e,d){a=new z(a,c,e);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function u(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function z(a,c,e){this.i=a;this.x=c;this.y=e;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function y(a,c,e,d){for(var f=0,l=e-d;c<e;c+=d)f+=(a[l]-a[c])*(a[c+1]+a[l+1]),l=c;return f}k.exports=h;k.exports.default=
h;h.deviation=function(a,c,e,d){var f=c&&c.length,l=Math.abs(y(a,0,f?c[0]*e:a.length,e));if(f){f=0;for(var p=c.length;f<p;f++)l-=Math.abs(y(a,c[f]*e,f<p-1?c[f+1]*e:a.length,e))}for(f=c=0;f<d.length;f+=3){p=d[f]*e;var b=d[f+1]*e,n=d[f+2]*e;c+=Math.abs((a[p]-a[n])*(a[b+1]-a[p+1])-(a[p]-a[b])*(a[n+1]-a[p+1]))}return 0===l&&0===c?0:Math.abs((c-l)/l)};h.flatten=function(a){for(var c=a[0][0].length,e={vertices:[],holes:[],dimensions:c},d=0,f=0;f<a.length;f++){for(var l=0;l<a[f].length;l++)for(var p=0;p<
c;p++)e.vertices.push(a[f][l][p]);0<f&&(d+=a[f-1].length,e.holes.push(d))}return e}},{}],11:[function(b,k,g){(function(b){var m=/iPhone/i,d=/iPod/i,f=/iPad/i,c=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,a=/Android/i,e=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,l=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,q=/Windows Phone/i,n=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,p=/BlackBerry/i,x=/BB10/i,h=/Opera Mini/i,g=/(CriOS|Chrome)(?=.*\bMobile\b)/i,
w=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,A=/(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)/i,u=function(b){b=b||navigator.userAgent;var t=b.split("[FBAN");"undefined"!==typeof t[1]&&(b=t[0]);t=b.split("Twitter");"undefined"!==typeof t[1]&&(b=t[0]);this.apple={phone:m.test(b),ipod:d.test(b),tablet:!m.test(b)&&f.test(b),device:m.test(b)||d.test(b)||f.test(b)};this.amazon={phone:e.test(b),tablet:!e.test(b)&&l.test(b),device:e.test(b)||l.test(b)};this.android={phone:e.test(b)||c.test(b),tablet:!e.test(b)&&
!c.test(b)&&(l.test(b)||a.test(b)),device:e.test(b)||l.test(b)||c.test(b)||a.test(b)};this.windows={phone:q.test(b),tablet:n.test(b),device:q.test(b)||n.test(b)};this.other={blackberry:p.test(b),blackberry10:x.test(b),opera:h.test(b),firefox:w.test(b),chrome:g.test(b),device:p.test(b)||x.test(b)||h.test(b)||w.test(b)||g.test(b)};this.seven_inch=A.test(b);this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch;this.phone=this.apple.phone||this.android.phone||
this.windows.phone;this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet;if("undefined"===typeof window)return this},z=function(){var a=new u;a.Class=u;return a};"undefined"!==typeof k&&k.exports&&"undefined"===typeof window?k.exports=u:"undefined"!==typeof k&&k.exports&&"undefined"!==typeof window?k.exports=z():"function"===typeof define&&define.amd?define("isMobile",[],b.isMobile=z()):b.isMobile=z()})(this)},{}],12:[function(b,k,g){function h(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function");
}function m(c,a){c._head?(c._tail._next=a,a._prev=c._tail):c._head=a;c._tail=a;a._owner=c;return a}Object.defineProperty(g,"__esModule",{value:!0});var d=function(){function c(a,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(a,e,d){e&&c(a.prototype,e);d&&c(a,d);return a}}(),f=function(){function c(a,e,d){void 0===e&&(e=!1);h(this,c);this._fn=a;this._once=e;this._thisArg=d;this._next=
this._prev=this._owner=null}d(c,[{key:"detach",value:function(){if(null===this._owner)return!1;this._owner.detach(this);return!0}}]);return c}();b=function(){function c(){h(this,c);this._head=this._tail=void 0}d(c,[{key:"handlers",value:function(){var a=this._head;if(0>=arguments.length||void 0===arguments[0]?0:arguments[0])return!!a;for(var c=[];a;)c.push(a),a=a._next;return c}},{key:"has",value:function(a){if(!(a instanceof f))throw Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");
return a._owner===this}},{key:"dispatch",value:function(){var a=this._head;if(!a)return!1;for(;a;)a._once&&this.detach(a),a._fn.apply(a._thisArg,arguments),a=a._next;return!0}},{key:"add",value:function(a){var c=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!==typeof a)throw Error("MiniSignal#add(): First arg must be a Function.");return m(this,new f(a,!1,c))}},{key:"once",value:function(a){var c=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!==
typeof a)throw Error("MiniSignal#once(): First arg must be a Function.");return m(this,new f(a,!0,c))}},{key:"detach",value:function(a){if(!(a instanceof f))throw Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");if(a._owner!==this)return this;a._prev&&(a._prev._next=a._next);a._next&&(a._next._prev=a._prev);a===this._head?(this._head=a._next,null===a._next&&(this._tail=null)):a===this._tail&&(this._tail=a._prev,this._tail._next=null);a._owner=null;return this}},{key:"detachAll",
value:function(){var a=this._head;if(!a)return this;for(this._head=this._tail=null;a;)a._owner=null,a=a._next;return this}}]);return c}();b.MiniSignalBinding=f;g["default"]=b;k.exports=g["default"]},{}],13:[function(b,k,g){var h=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;k.exports=function(){try{if(!Object.assign)return!1;var d=new String("abc");d[5]="de";if("5"===Object.getOwnPropertyNames(d)[0])return!1;var c={};for(d=0;10>d;d++)c["_"+
String.fromCharCode(d)]=d;if("0123456789"!==Object.getOwnPropertyNames(c).map(function(a){return c[a]}).join(""))return!1;var a={};"abcdefghijklmnopqrst".split("").forEach(function(c){a[c]=c});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},a)).join("")?!1:!0}catch(e){return!1}}()?Object.assign:function(f,c){if(null===f||void 0===f)throw new TypeError("Object.assign cannot be called with null or undefined");var a=Object(f);for(var e,l=1;l<arguments.length;l++){var b=Object(arguments[l]);
for(var n in b)m.call(b,n)&&(a[n]=b[n]);if(h){e=h(b);for(var p=0;p<e.length;p++)d.call(b,e[p])&&(a[e[p]]=b[e[p]])}}return a}},{}],14:[function(b,k,g){k.exports=function(b,m){m=m||{};var d="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");b={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}[m.strictMode?
"strict":"loose"].exec(b);var f={};for(m=14;m--;)f[d[m]]=b[m]||"";f.queryKey={};f[d[12]].replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(c,a,e){a&&(f.queryKey[a]=e)});return f}},{}],15:[function(b,k,g){(function(){var b={linear:function(b,d,f,c){return f*b/c+d},easeInQuad:function(b,d,f,c){return f*(b/=c)*b+d},easeOutQuad:function(b,d,f,c){return-f*(b/=c)*(b-2)+d},easeInOutQuad:function(b,d,f,c){return 1>(b/=c/2)?f/2*b*b+d:-f/2*(--b*(b-2)-1)+d},easeInCubic:function(b,d,f,c){return f*(b/=c)*b*b+d},easeOutCubic:function(b,
d,f,c){return f*((b=b/c-1)*b*b+1)+d},easeInOutCubic:function(b,d,f,c){return 1>(b/=c/2)?f/2*b*b*b+d:f/2*((b-=2)*b*b+2)+d},easeInQuart:function(b,d,f,c){return f*(b/=c)*b*b*b+d},easeOutQuart:function(b,d,f,c){return-f*((b=b/c-1)*b*b*b-1)+d},easeInOutQuart:function(b,d,f,c){return 1>(b/=c/2)?f/2*b*b*b*b+d:-f/2*((b-=2)*b*b*b-2)+d},easeInQuint:function(b,d,f,c){return f*(b/=c)*b*b*b*b+d},easeOutQuint:function(b,d,f,c){return f*((b=b/c-1)*b*b*b*b+1)+d},easeInOutQuint:function(b,d,f,c){return 1>(b/=c/2)?
f/2*b*b*b*b*b+d:f/2*((b-=2)*b*b*b*b+2)+d},easeInSine:function(b,d,f,c){return-f*Math.cos(b/c*(Math.PI/2))+f+d},easeOutSine:function(b,d,f,c){return f*Math.sin(b/c*(Math.PI/2))+d},easeInOutSine:function(b,d,f,c){return-f/2*(Math.cos(Math.PI*b/c)-1)+d},easeInExpo:function(b,d,f,c){return 0===b?d:f*Math.pow(2,10*(b/c-1))+d},easeOutExpo:function(b,d,f,c){return b===c?d+f:f*(-Math.pow(2,-10*b/c)+1)+d},easeInOutExpo:function(b,d,f,c){0===b&&d;b===c&&d+f;return 1>(b/=c/2)?f/2*Math.pow(2,10*(b-1))+d:f/2*
(-Math.pow(2,-10*--b)+2)+d},easeInCirc:function(b,d,f,c){return-f*(Math.sqrt(1-(b/=c)*b)-1)+d},easeOutCirc:function(b,d,f,c){return f*Math.sqrt(1-(b=b/c-1)*b)+d},easeInOutCirc:function(b,d,f,c){return 1>(b/=c/2)?-f/2*(Math.sqrt(1-b*b)-1)+d:f/2*(Math.sqrt(1-(b-=2)*b)+1)+d},easeInElastic:function(b,d,f,c){var a=0;var e=f;0===b?d:1===(b/=c)&&d+f;a||(a=.3*c);e<Math.abs(f)?(e=f,f=a/4):f=a/(2*Math.PI)*Math.asin(f/e);return-(e*Math.pow(2,10*--b)*Math.sin(2*(b*c-f)*Math.PI/a))+d},easeOutElastic:function(b,
d,f,c){var a=0;var e=f;0===b?d:1===(b/=c)&&d+f;a||(a=.3*c);if(e<Math.abs(f)){e=f;var l=a/4}else l=a/(2*Math.PI)*Math.asin(f/e);return e*Math.pow(2,-10*b)*Math.sin(2*(b*c-l)*Math.PI/a)+f+d},easeInOutElastic:function(b,d,f,c){var a=0;var e=f;0===b?d:2===(b/=c/2)&&d+f;a||(a=.3*c*1.5);if(e<Math.abs(f)){e=f;var l=a/4}else l=a/(2*Math.PI)*Math.asin(f/e);return 1>b?-.5*e*Math.pow(2,10*--b)*Math.sin(2*(b*c-l)*Math.PI/a)+d:e*Math.pow(2,-10*--b)*Math.sin(2*(b*c-l)*Math.PI/a)*.5+f+d},easeInBack:function(b,d,
f,c,a){void 0===a&&(a=1.70158);return f*(b/=c)*b*((a+1)*b-a)+d},easeOutBack:function(b,d,f,c,a){void 0===a&&(a=1.70158);return f*((b=b/c-1)*b*((a+1)*b+a)+1)+d},easeInOutBack:function(b,d,f,c,a){void 0===a&&(a=1.70158);return 1>(b/=c/2)?f/2*b*b*(((a*=1.525)+1)*b-a)+d:f/2*((b-=2)*b*(((a*=1.525)+1)*b+a)+2)+d},easeInBounce:function(m,d,f,c){m=b.easeOutBounce(c-m,0,f,c);return f-m+d},easeOutBounce:function(b,d,f,c){return(b/=c)<1/2.75?7.5625*f*b*b+d:b<2/2.75?f*(7.5625*(b-=1.5/2.75)*b+.75)+d:b<2.5/2.75?
f*(7.5625*(b-=2.25/2.75)*b+.9375)+d:f*(7.5625*(b-=2.625/2.75)*b+.984375)+d},easeInOutBounce:function(m,d,f,c){if(m<c/2)return m=b.easeInBounce(2*m,0,f,c),.5*m+d;m=b.easeOutBounce(2*m-c,0,f,c);return.5*m+.5*f+d}};(function(b){return"object"===typeof g?k.exports=b:"function"===typeof define&&define.amd?define([],b):this.penner=b})(b)}).call(this)},{}],16:[function(b,k,g){var h=new ArrayBuffer(0),m=function(d,f,c,a){this.gl=d;this.buffer=d.createBuffer();this.type=f||d.ARRAY_BUFFER;this.drawType=a||
d.STATIC_DRAW;this.data=h;c&&this.upload(c);this._updateID=0};m.prototype.upload=function(d,f,c){c||this.bind();c=this.gl;d=d||this.data;this.data.byteLength>=d.byteLength?c.bufferSubData(this.type,f||0,d):c.bufferData(this.type,d,this.drawType);this.data=d};m.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)};m.createVertexBuffer=function(d,f,c){return new m(d,d.ARRAY_BUFFER,f,c)};m.createIndexBuffer=function(d,f,c){return new m(d,d.ELEMENT_ARRAY_BUFFER,f,c)};m.create=function(d,
f,c,a){return new m(d,f,c,a)};m.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)};k.exports=m},{}],17:[function(b,k,g){var h=b("./GLTexture"),m=function(d,f,c){this.gl=d;this.framebuffer=d.createFramebuffer();this.texture=this.stencil=null;this.width=f||100;this.height=c||100};m.prototype.enableTexture=function(d){var f=this.gl;this.texture=d||new h(f);this.texture.bind();this.bind();f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,this.texture.texture,0)};m.prototype.enableStencil=
function(){if(!this.stencil){var d=this.gl;this.stencil=d.createRenderbuffer();d.bindRenderbuffer(d.RENDERBUFFER,this.stencil);d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,this.stencil);d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_STENCIL,this.width,this.height)}};m.prototype.clear=function(d,f,c,a){this.bind();var e=this.gl;e.clearColor(d,f,c,a);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)};m.prototype.bind=function(){var d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,
this.framebuffer)};m.prototype.unbind=function(){var d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,null)};m.prototype.resize=function(d,f){var c=this.gl;this.width=d;this.height=f;this.texture&&this.texture.uploadData(null,d,f);this.stencil&&(c.bindRenderbuffer(c.RENDERBUFFER,this.stencil),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,d,f))};m.prototype.destroy=function(){var d=this.gl;this.texture&&this.texture.destroy();d.deleteFramebuffer(this.framebuffer);this.texture=this.stencil=this.gl=
null};m.createRGBA=function(d,f,c,a){a=h.fromData(d,null,f,c);a.enableNearestScaling();a.enableWrapClamp();d=new m(d,f,c);d.enableTexture(a);d.unbind();return d};m.createFloat32=function(d,f,c,a){a=new h.fromData(d,a,f,c);a.enableNearestScaling();a.enableWrapClamp();d=new m(d,f,c);d.enableTexture(a);d.unbind();return d};k.exports=m},{"./GLTexture":19}],18:[function(b,k,g){var h=b("./shader/compileProgram"),m=b("./shader/extractAttributes"),d=b("./shader/extractUniforms"),f=b("./shader/setPrecision"),
c=b("./shader/generateUniformAccessObject");b=function(a,e,l,b,n){this.gl=a;b&&(e=f(e,b),l=f(l,b));this.program=h(a,e,l,n);this.attributes=m(a,this.program);this.uniformData=d(a,this.program);this.uniforms=c(a,this.uniformData)};b.prototype.bind=function(){this.gl.useProgram(this.program);return this};b.prototype.destroy=function(){this.uniforms=this.uniformData=this.attributes=null;this.gl.deleteProgram(this.program)};k.exports=b},{"./shader/compileProgram":24,"./shader/extractAttributes":26,"./shader/extractUniforms":27,
"./shader/generateUniformAccessObject":28,"./shader/setPrecision":32}],19:[function(b,k,g){var h=function(d,f,c,a,e){this.gl=d;this.texture=d.createTexture();this.premultiplyAlpha=this.mipmap=!1;this.width=f||-1;this.height=c||-1;this.format=a||d.RGBA;this.type=e||d.UNSIGNED_BYTE};h.prototype.upload=function(d){this.bind();var f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var c=d.videoWidth||d.width,a=d.videoHeight||d.height;a!==this.height||c!==this.width?f.texImage2D(f.TEXTURE_2D,
0,this.format,this.format,this.type,d):f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.format,this.type,d);this.width=c;this.height=a};var m=!1;h.prototype.uploadData=function(d,f,c){this.bind();var a=this.gl;if(d instanceof Float32Array){if(!m)if(a.getExtension("OES_texture_float"))m=!0;else throw Error("floating point textures not available");this.type=a.FLOAT}else this.type=this.type||a.UNSIGNED_BYTE;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);f!==this.width||c!==this.height?
a.texImage2D(a.TEXTURE_2D,0,this.format,f,c,0,this.format,this.type,d||null):a.texSubImage2D(a.TEXTURE_2D,0,0,0,f,c,this.format,this.type,d||null);this.width=f;this.height=c};h.prototype.bind=function(d){var f=this.gl;void 0!==d&&f.activeTexture(f.TEXTURE0+d);f.bindTexture(f.TEXTURE_2D,this.texture)};h.prototype.unbind=function(){var d=this.gl;d.bindTexture(d.TEXTURE_2D,null)};h.prototype.minFilter=function(d){var f=this.gl;this.bind();this.mipmap?f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,
d?f.LINEAR_MIPMAP_LINEAR:f.NEAREST_MIPMAP_NEAREST):f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,d?f.LINEAR:f.NEAREST)};h.prototype.magFilter=function(d){var f=this.gl;this.bind();f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,d?f.LINEAR:f.NEAREST)};h.prototype.enableMipmap=function(){var d=this.gl;this.bind();this.mipmap=!0;d.generateMipmap(d.TEXTURE_2D)};h.prototype.enableLinearScaling=function(){this.minFilter(!0);this.magFilter(!0)};h.prototype.enableNearestScaling=function(){this.minFilter(!1);
this.magFilter(!1)};h.prototype.enableWrapClamp=function(){var d=this.gl;this.bind();d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE)};h.prototype.enableWrapRepeat=function(){var d=this.gl;this.bind();d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT)};h.prototype.enableWrapMirrorRepeat=function(){var d=this.gl;this.bind();d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,
d.MIRRORED_REPEAT);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.MIRRORED_REPEAT)};h.prototype.destroy=function(){this.gl.deleteTexture(this.texture)};h.fromSource=function(d,f,c){d=new h(d);d.premultiplyAlpha=c||!1;d.upload(f);return d};h.fromData=function(d,f,c,a){d=new h(d);d.uploadData(f,c,a);return d};k.exports=h},{}],20:[function(b,k,g){function h(d,f){this.nativeVaoExtension=null;h.FORCE_NATIVE||(this.nativeVaoExtension=d.getExtension("OES_vertex_array_object")||d.getExtension("MOZ_OES_vertex_array_object")||
d.getExtension("WEBKIT_OES_vertex_array_object"));this.nativeState=f;this.nativeVaoExtension&&(this.nativeVao=this.nativeVaoExtension.createVertexArrayOES(),f=d.getParameter(d.MAX_VERTEX_ATTRIBS),this.nativeState={tempAttribState:Array(f),attribState:Array(f)});this.gl=d;this.attributes=[];this.indexBuffer=null;this.dirty=!1}var m=b("./setVertexAttribArrays");h.prototype.constructor=h;k.exports=h;h.FORCE_NATIVE=!1;h.prototype.bind=function(){if(this.nativeVao){this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao);
if(this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this};h.prototype.unbind=function(){this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null);return this};h.prototype.activate=function(){for(var d=this.gl,f=null,c=0;c<this.attributes.length;c++){var a=this.attributes[c];f!==a.buffer&&(a.buffer.bind(),f=a.buffer);d.vertexAttribPointer(a.attribute.location,a.attribute.size,a.type||d.FLOAT,a.normalized||!1,a.stride||
0,a.start||0)}m(d,this.attributes,this.nativeState);this.indexBuffer&&this.indexBuffer.bind();return this};h.prototype.addAttribute=function(d,f,c,a,e,l){this.attributes.push({buffer:d,attribute:f,location:f.location,type:c||this.gl.FLOAT,normalized:a||!1,stride:e||0,start:l||0});this.dirty=!0;return this};h.prototype.addIndex=function(d){this.indexBuffer=d;this.dirty=!0;return this};h.prototype.clear=function(){this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao);this.attributes.length=
0;this.indexBuffer=null;return this};h.prototype.draw=function(d,f,c){var a=this.gl;this.indexBuffer?a.drawElements(d,f||this.indexBuffer.data.length,a.UNSIGNED_SHORT,2*(c||0)):a.drawArrays(d,c,f||this.getSize());return this};h.prototype.destroy=function(){this.nativeState=this.attributes=this.indexBuffer=this.gl=null;this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao);this.nativeVao=this.nativeVaoExtension=null};h.prototype.getSize=function(){var d=this.attributes[0];return d.buffer.data.length/
(d.stride/4||d.attribute.size)}},{"./setVertexAttribArrays":23}],21:[function(b,k,g){k.exports=function(b,m){b=b.getContext("webgl",m)||b.getContext("experimental-webgl",m);if(!b)throw Error("This browser does not support webGL. Try using the canvas renderer");return b}},{}],22:[function(b,k,g){b={createContext:b("./createContext"),setVertexAttribArrays:b("./setVertexAttribArrays"),GLBuffer:b("./GLBuffer"),GLFramebuffer:b("./GLFramebuffer"),GLShader:b("./GLShader"),GLTexture:b("./GLTexture"),VertexArrayObject:b("./VertexArrayObject"),
shader:b("./shader")};"undefined"!==typeof k&&k.exports&&(k.exports=b);"undefined"!==typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=b)},{"./GLBuffer":16,"./GLFramebuffer":17,"./GLShader":18,"./GLTexture":19,"./VertexArrayObject":20,"./createContext":21,"./setVertexAttribArrays":23,"./shader":29}],23:[function(b,k,g){k.exports=function(b,m,d){var f;if(d){var c=d.tempAttribState,a=d.attribState;for(f=0;f<c.length;f++)c[f]=!1;for(f=0;f<m.length;f++)c[m[f].attribute.location]=!0;for(f=
0;f<a.length;f++)a[f]!==c[f]&&(a[f]=c[f],d.attribState[f]?b.enableVertexAttribArray(f):b.disableVertexAttribArray(f))}else for(f=0;f<m.length;f++)b.enableVertexAttribArray(m[f].attribute.location)}},{}],24:[function(b,k,g){var h=function(b,d,f){d=b.createShader(d);b.shaderSource(d,f);b.compileShader(d);return b.getShaderParameter(d,b.COMPILE_STATUS)?d:(console.log(b.getShaderInfoLog(d)),null)};k.exports=function(b,d,f,c){d=h(b,b.VERTEX_SHADER,d);f=h(b,b.FRAGMENT_SHADER,f);var a=b.createProgram();
b.attachShader(a,d);b.attachShader(a,f);if(c)for(var e in c)b.bindAttribLocation(a,c[e],e);b.linkProgram(a);b.getProgramParameter(a,b.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",b.getProgramParameter(a,b.VALIDATE_STATUS)),console.error("gl.getError()",b.getError()),""!==b.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",b.getProgramInfoLog(a)),b.deleteProgram(a),a=null);b.deleteShader(d);b.deleteShader(f);
return a}},{}],25:[function(b,k,g){var h=function(b){b=Array(b);for(var d=0;d<b.length;d++)b[d]=!1;return b};k.exports=function(b,d){switch(b){case "float":return 0;case "vec2":return new Float32Array(2*d);case "vec3":return new Float32Array(3*d);case "vec4":return new Float32Array(4*d);case "int":case "sampler2D":return 0;case "ivec2":return new Int32Array(2*d);case "ivec3":return new Int32Array(3*d);case "ivec4":return new Int32Array(4*d);case "bool":return!1;case "bvec2":return h(2*d);case "bvec3":return h(3*
d);case "bvec4":return h(4*d);case "mat2":return new Float32Array([1,0,0,1]);case "mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case "mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},{}],26:[function(b,k,g){var h=b("./mapType"),m=b("./mapSize"),d=function(d,c,a,e){gl.vertexAttribPointer(this.location,this.size,d||gl.FLOAT,c||!1,a||0,e||0)};k.exports=function(f,c){for(var a={},e=f.getProgramParameter(c,f.ACTIVE_ATTRIBUTES),b=0;b<e;b++){var q=f.getActiveAttrib(c,b),n=h(f,q.type);
a[q.name]={type:n,size:m(n),location:f.getAttribLocation(c,q.name),pointer:d}}return a}},{"./mapSize":30,"./mapType":31}],27:[function(b,k,g){var h=b("./mapType"),m=b("./defaultValue");k.exports=function(d,f){for(var c={},a=d.getProgramParameter(f,d.ACTIVE_UNIFORMS),e=0;e<a;e++){var b=d.getActiveUniform(f,e),q=b.name.replace(/\[.*?\]/,""),n=h(d,b.type);c[q]={type:n,size:b.size,location:d.getUniformLocation(f,q),value:m(n,b.size)}}return c}},{"./defaultValue":25,"./mapType":31}],28:[function(b,k,g){function h(c,
a){return function(e){this.data[c].value=e;var b=this.data[c].location;if(1===a.size)d[a.type](this.gl,b,e);else f[a.type](this.gl,b,e)}}var m=function(c){return function(){return this.data[c].value}},d={float:function(c,a,e){c.uniform1f(a,e)},vec2:function(c,a,e){c.uniform2f(a,e[0],e[1])},vec3:function(c,a,e){c.uniform3f(a,e[0],e[1],e[2])},vec4:function(c,a,e){c.uniform4f(a,e[0],e[1],e[2],e[3])},int:function(c,a,e){c.uniform1i(a,e)},ivec2:function(c,a,e){c.uniform2i(a,e[0],e[1])},ivec3:function(c,
a,e){c.uniform3i(a,e[0],e[1],e[2])},ivec4:function(c,a,e){c.uniform4i(a,e[0],e[1],e[2],e[3])},bool:function(c,a,e){c.uniform1i(a,e)},bvec2:function(c,a,e){c.uniform2i(a,e[0],e[1])},bvec3:function(c,a,e){c.uniform3i(a,e[0],e[1],e[2])},bvec4:function(c,a,e){c.uniform4i(a,e[0],e[1],e[2],e[3])},mat2:function(c,a,e){c.uniformMatrix2fv(a,!1,e)},mat3:function(c,a,e){c.uniformMatrix3fv(a,!1,e)},mat4:function(c,a,e){c.uniformMatrix4fv(a,!1,e)},sampler2D:function(c,a,e){c.uniform1i(a,e)}},f={float:function(c,
a,e){c.uniform1fv(a,e)},vec2:function(c,a,e){c.uniform2fv(a,e)},vec3:function(c,a,e){c.uniform3fv(a,e)},vec4:function(c,a,e){c.uniform4fv(a,e)},int:function(c,a,e){c.uniform1iv(a,e)},ivec2:function(c,a,e){c.uniform2iv(a,e)},ivec3:function(c,a,e){c.uniform3iv(a,e)},ivec4:function(c,a,e){c.uniform4iv(a,e)},bool:function(c,a,e){c.uniform1iv(a,e)},bvec2:function(c,a,e){c.uniform2iv(a,e)},bvec3:function(c,a,e){c.uniform3iv(a,e)},bvec4:function(c,a,e){c.uniform4iv(a,e)},sampler2D:function(c,a,e){c.uniform1iv(a,
e)}};k.exports=function(c,a){var e={data:{}};e.gl=c;for(var d=Object.keys(a),f=0;f<d.length;f++){for(var b=d[f],p=b.split("."),x=p[p.length-1],t=e,g=0;g<p.length-1;g++){var w=t[p[g]]||{data:{}};t=t[p[g]]=w}p=t;b=a[b];p.data[x]=b;p.gl=c;Object.defineProperty(p,x,{get:m(x),set:h(x,b)})}return e}},{}],29:[function(b,k,g){k.exports={compileProgram:b("./compileProgram"),defaultValue:b("./defaultValue"),extractAttributes:b("./extractAttributes"),extractUniforms:b("./extractUniforms"),generateUniformAccessObject:b("./generateUniformAccessObject"),
setPrecision:b("./setPrecision"),mapSize:b("./mapSize"),mapType:b("./mapType")}},{"./compileProgram":24,"./defaultValue":25,"./extractAttributes":26,"./extractUniforms":27,"./generateUniformAccessObject":28,"./mapSize":30,"./mapType":31,"./setPrecision":32}],30:[function(b,k,g){var h={"float":1,vec2:2,vec3:3,vec4:4,"int":1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};k.exports=function(b){return h[b]}},{}],31:[function(b,k,g){var h=null,m={FLOAT:"float",
FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};k.exports=function(d,f){if(!h){var c=Object.keys(m);h={};for(var a=0;a<c.length;++a){var e=c[a];h[d[e]]=m[e]}}return h[f]}},{}],32:[function(b,k,g){k.exports=function(b,m){return"precision"!==b.substring(0,9)?"precision "+m+" float;\n"+b:b}},
{}],33:[function(b,k,g){(function(h){!function(b){"object"==typeof g&&"undefined"!=typeof k?k.exports=b():"function"==typeof define&&define.amd?define([],b):("undefined"!=typeof window?window:"undefined"!=typeof h?h:"undefined"!=typeof self?self:this).pixiParticles=b()}(function(){return function(){function h(d,f,c){function a(l,n){if(!f[l]){if(!d[l]){var p="function"==typeof b&&b;if(!n&&p)return p(l,!0);if(e)return e(l,!0);n=Error("Cannot find module '"+l+"'");throw n.code="MODULE_NOT_FOUND",n;}n=
f[l]={exports:{}};d[l][0].call(n.exports,function(c){return a(d[l][1][c]||c)},n,n.exports,h,d,f,c)}return f[l].exports}for(var e="function"==typeof b&&b,l=0;l<c.length;l++)a(c[l]);return a}return h}()({1:[function(b,d,f){var c=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e])};return function(c,e){function d(){this.constructor=c}a(c,e);c.prototype=null===e?Object.create(e):
(d.prototype=e.prototype,new d)}}();Object.defineProperty(f,"__esModule",{value:!0});b=b("./Particle");var a=PIXI.Texture;b=function(e){function d(a){a=e.call(this,a)||this;return a.textures=null,a.duration=0,a.framerate=0,a.elapsed=0,a.loop=!1,a}return c(d,e),d.prototype.init=function(){this.Particle_init();this.elapsed=0;0>this.framerate&&(this.duration=this.maxLife,this.framerate=this.textures.length/this.duration)},d.prototype.applyArt=function(a){this.textures=a.textures;this.framerate=a.framerate;
this.duration=a.duration;this.loop=a.loop},d.prototype.update=function(a){var c=this.Particle_update(a);0<=c&&(this.elapsed+=a,this.elapsed>this.duration&&(this.loop?this.elapsed%=this.duration:this.elapsed=this.duration-1E-6),this.texture=this.textures[this.elapsed*this.framerate+1E-7|0]||PIXI.Texture.EMPTY);return c},d.prototype.destroy=function(){this.Particle_destroy();this.textures=null},d.parseArt=function(c){for(var e,d,f,b,l,q=[],h=0;h<c.length;++h){e=c[h];q[h]=d={};d.textures=l=[];f=e.textures;
for(var m=0;m<f.length;++m)if("string"==typeof(b=f[m]))l.push(a.fromImage(b));else if(b instanceof a)l.push(b);else{var g=b.count||1;for(b="string"==typeof b.texture?a.fromImage(b.texture):b.texture;0<g;--g)l.push(b)}"matchLife"==e.framerate?(d.framerate=-1,d.duration=0,d.loop=!1):(d.loop=!!e.loop,d.framerate=0<e.framerate?e.framerate:60,d.duration=l.length/d.framerate)}return q},d}(b.default);f.default=b},{"./Particle":3}],2:[function(b,d,f){Object.defineProperty(f,"__esModule",{value:!0});var c=
b("./ParticleUtils"),a=b("./Particle"),e=b("./PropertyNode"),l=PIXI.ticker.shared,q=new PIXI.Point;b=function(){function d(c,e,d){this._particleConstructor=a.default;this.startSpeed=this.startAlpha=this.particleImages=null;this.minimumSpeedMultiplier=1;this.acceleration=null;this.maxSpeed=NaN;this.startScale=null;this.minimumScaleMultiplier=1;this.startColor=null;this.maxStartRotation=this.minStartRotation=this.maxLifetime=this.minLifetime=0;this.noRotation=!1;this.particleBlendMode=this.maxRotationSpeed=
this.minRotationSpeed=0;this.extraData=this.customEase=null;this.spawnChance=this._frequency=1;this.maxParticles=1E3;this.emitterLifetime=-1;this.spawnCircle=this.spawnRect=this._spawnFunc=this.spawnType=this.spawnPos=null;this.particlesPerWave=1;this.rotation=this.angleStart=this.particleSpacing=0;this._prevEmitterPos=this.ownerPos=null;this._posChanged=this._prevPosIsValid=!1;this._parent=null;this.addAtBack=!1;this.particleCount=0;this._emit=!1;this._spawnTimer=0;this._emitterLife=-1;this._origArt=
this._origConfig=this._poolFirst=this._activeParticlesLast=this._activeParticlesFirst=null;this._destroyWhenComplete=this._autoUpdate=!1;this._completeCallback=null;this.parent=c;e&&d&&this.init(e,d);this.recycle=this.recycle;this.update=this.update;this.rotate=this.rotate;this.updateSpawnPos=this.updateSpawnPos;this.updateOwnerPos=this.updateOwnerPos}return Object.defineProperty(d.prototype,"frequency",{get:function(){return this._frequency},set:function(a){this._frequency="number"==typeof a&&0<
a?a:1},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"particleConstructor",{get:function(){return this._particleConstructor},set:function(a){if(a!=this._particleConstructor){this._particleConstructor=a;this.cleanup();for(a=this._poolFirst;a;a=a.next)a.destroy();this._poolFirst=null;this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"parent",{get:function(){return this._parent},set:function(a){this.cleanup();
this._parent=a},enumerable:!0,configurable:!0}),d.prototype.init=function(a,d){if(a&&d){this.cleanup();this._origConfig=d;this._origArt=a;a=Array.isArray(a)?a.slice():[a];var f=this._particleConstructor;this.particleImages=f.parseArt?f.parseArt(a):a;d.alpha?this.startAlpha=e.default.createList(d.alpha):this.startAlpha=new e.default(1,0);d.speed?(this.startSpeed=e.default.createList(d.speed),this.minimumSpeedMultiplier=d.speed.minimumSpeedMultiplier||1):(this.minimumSpeedMultiplier=1,this.startSpeed=
new e.default(0,0));(a=d.acceleration)&&(a.x||a.y)?(this.startSpeed.next=null,this.acceleration=new PIXI.Point(a.x,a.y),this.maxSpeed=d.maxSpeed||NaN):this.acceleration=new PIXI.Point;d.scale?(this.startScale=e.default.createList(d.scale),this.minimumScaleMultiplier=d.scale.minimumScaleMultiplier||1):(this.startScale=new e.default(1,0),this.minimumScaleMultiplier=1);d.color?this.startColor=e.default.createList(d.color):this.startColor=new e.default({r:255,g:255,b:255},0);d.startRotation?(this.minStartRotation=
d.startRotation.min,this.maxStartRotation=d.startRotation.max):this.minStartRotation=this.maxStartRotation=0;d.noRotation&&(this.minStartRotation||this.maxStartRotation)?this.noRotation=!!d.noRotation:this.noRotation=!1;d.rotationSpeed?(this.minRotationSpeed=d.rotationSpeed.min,this.maxRotationSpeed=d.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0;this.minLifetime=d.lifetime.min;this.maxLifetime=d.lifetime.max;this.particleBlendMode=c.default.getBlendMode(d.blendMode);d.ease?this.customEase=
"function"==typeof d.ease?d.ease:c.default.generateEase(d.ease):this.customEase=null;f.parseData?this.extraData=f.parseData(d.extraData):this.extraData=d.extraData||null;this.spawnRect=this.spawnCircle=null;this.particlesPerWave=1;d.particlesPerWave&&1<d.particlesPerWave&&(this.particlesPerWave=d.particlesPerWave);this.angleStart=this.particleSpacing=0;switch(d.spawnType){case "rect":this.spawnType="rect";this._spawnFunc=this._spawnRect;f=d.spawnRect;this.spawnRect=new PIXI.Rectangle(f.x,f.y,f.w,
f.h);break;case "circle":this.spawnType="circle";this._spawnFunc=this._spawnCircle;f=d.spawnCircle;this.spawnCircle=new PIXI.Circle(f.x,f.y,f.r);break;case "ring":this.spawnType="ring";this._spawnFunc=this._spawnRing;f=d.spawnCircle;this.spawnCircle=new PIXI.Circle(f.x,f.y,f.r);this.spawnCircle.minRadius=f.minR;break;case "burst":this.spawnType="burst";this._spawnFunc=this._spawnBurst;this.particleSpacing=d.particleSpacing;this.angleStart=d.angleStart?d.angleStart:0;break;default:this.spawnType="point",
this._spawnFunc=this._spawnPoint}this.frequency=d.frequency;this.spawnChance="number"==typeof d.spawnChance&&0<d.spawnChance?d.spawnChance:1;this.emitterLifetime=d.emitterLifetime||-1;this.maxParticles=0<d.maxParticles?d.maxParticles:1E3;this.addAtBack=!!d.addAtBack;this.rotation=0;this.ownerPos=new PIXI.Point;this.spawnPos=new PIXI.Point(d.pos.x,d.pos.y);this._prevEmitterPos=this.spawnPos.clone();this._prevPosIsValid=!1;this._spawnTimer=0;this.emit=void 0===d.emit||!!d.emit;this.autoUpdate=void 0!==
d.autoUpdate&&!!d.autoUpdate}},d.prototype.recycle=function(a){a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next);a==this._activeParticlesLast&&(this._activeParticlesLast=a.prev);a==this._activeParticlesFirst&&(this._activeParticlesFirst=a.next);a.prev=null;a.next=this._poolFirst;this._poolFirst=a;a.parent&&a.parent.removeChild(a);--this.particleCount},d.prototype.rotate=function(a){if(this.rotation!=a){var e=a-this.rotation;this.rotation=a;c.default.rotatePoint(e,this.spawnPos);this._posChanged=
!0}},d.prototype.updateSpawnPos=function(a,c){this._posChanged=!0;this.spawnPos.x=a;this.spawnPos.y=c},d.prototype.updateOwnerPos=function(a,c){this._posChanged=!0;this.ownerPos.x=a;this.ownerPos.y=c},d.prototype.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(d.prototype,"emit",{get:function(){return this._emit},set:function(a){this._emit=!!a;this._emitterLife=this.emitterLifetime},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"autoUpdate",{get:function(){return this._autoUpdate},
set:function(a){this._autoUpdate&&!a?l.remove(this.update,this):!this._autoUpdate&&a&&l.add(this.update,this);this._autoUpdate=!!a},enumerable:!0,configurable:!0}),d.prototype.playOnceAndDestroy=function(a){this._destroyWhenComplete=this.emit=this.autoUpdate=!0;this._completeCallback=a},d.prototype.playOnce=function(a){this.emit=!0;this._completeCallback=a},d.prototype.update=function(a){if(this._autoUpdate&&(a=a/PIXI.settings.TARGET_FPMS/1E3),this._parent){var c;for(c=this._activeParticlesFirst;c;c=
e){var e=c.next;c.update(a)}var d,f;this._prevPosIsValid&&(d=this._prevEmitterPos.x,f=this._prevEmitterPos.y);c=this.ownerPos.x+this.spawnPos.x;e=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=0>a?0:a;0>=this._spawnTimer;){if(0<this._emitterLife&&(this._emitterLife-=this._frequency,0>=this._emitterLife)){this._emitterLife=this._spawnTimer=0;this.emit=!1;break}if(!(this.particleCount>=this.maxParticles)){var b=void 0;if(b=this.minLifetime==this.maxLifetime?this.minLifetime:Math.random()*
(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<b){if(this._prevPosIsValid&&this._posChanged){var l=1+this._spawnTimer/a;var p=(c-d)*l+d;var n=(e-f)*l+f}else p=c,n=e;l=0;for(var q=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);l<q;++l)if(!(1>this.spawnChance&&Math.random()>=this.spawnChance)){var h=void 0;if(this._poolFirst?(h=this._poolFirst,this._poolFirst=this._poolFirst.next,h.next=null):h=new this.particleConstructor(this),1<this.particleImages.length?
h.applyArt(this.particleImages[Math.floor(Math.random()*this.particleImages.length)]):h.applyArt(this.particleImages[0]),h.alphaList.reset(this.startAlpha),1!=this.minimumSpeedMultiplier&&(h.speedMultiplier=Math.random()*(1-this.minimumSpeedMultiplier)+this.minimumSpeedMultiplier),h.speedList.reset(this.startSpeed),h.acceleration.x=this.acceleration.x,h.acceleration.y=this.acceleration.y,h.maxSpeed=this.maxSpeed,1!=this.minimumScaleMultiplier&&(h.scaleMultiplier=Math.random()*(1-this.minimumScaleMultiplier)+
this.minimumScaleMultiplier),h.scaleList.reset(this.startScale),h.colorList.reset(this.startColor),this.minRotationSpeed==this.maxRotationSpeed?h.rotationSpeed=this.minRotationSpeed:h.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,h.noRotation=this.noRotation,h.maxLife=b,h.blendMode=this.particleBlendMode,h.ease=this.customEase,h.extraData=this.extraData,this._spawnFunc(h,p,n,l),h.init(),h.update(-this._spawnTimer),h.parent){var m=this._parent.children;
if(m[0]==h)m.shift();else if(m[m.length-1]==h)m.pop();else{var g=m.indexOf(h);m.splice(g,1)}this.addAtBack?m.unshift(h):m.push(h)}else this.addAtBack?this._parent.addChildAt(h,0):this._parent.addChild(h);this._activeParticlesLast?(this._activeParticlesLast.next=h,h.prev=this._activeParticlesLast,this._activeParticlesLast=h):this._activeParticlesLast=this._activeParticlesFirst=h;++this.particleCount}}}this._spawnTimer+=this._frequency}this._posChanged&&(this._prevEmitterPos.x=c,this._prevEmitterPos.y=
e,this._prevPosIsValid=!0,this._posChanged=!1);this._emit||this._activeParticlesFirst||(this._completeCallback&&this._completeCallback(),this._destroyWhenComplete&&this.destroy())}},d.prototype._spawnPoint=function(a,c,e){this.minStartRotation==this.maxStartRotation?a.rotation=this.minStartRotation+this.rotation:a.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation;a.position.x=c;a.position.y=e},d.prototype._spawnRect=function(a,e,d){this.minStartRotation==
this.maxStartRotation?a.rotation=this.minStartRotation+this.rotation:a.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation;q.x=Math.random()*this.spawnRect.width+this.spawnRect.x;q.y=Math.random()*this.spawnRect.height+this.spawnRect.y;0!==this.rotation&&c.default.rotatePoint(this.rotation,q);a.position.x=e+q.x;a.position.y=d+q.y},d.prototype._spawnCircle=function(a,e,d){this.minStartRotation==this.maxStartRotation?a.rotation=this.minStartRotation+
this.rotation:a.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation;q.x=Math.random()*this.spawnCircle.radius;q.y=0;c.default.rotatePoint(360*Math.random(),q);q.x+=this.spawnCircle.x;q.y+=this.spawnCircle.y;0!==this.rotation&&c.default.rotatePoint(this.rotation,q);a.position.x=e+q.x;a.position.y=d+q.y},d.prototype._spawnRing=function(a,e,d){var f=this.spawnCircle;this.minStartRotation==this.maxStartRotation?a.rotation=this.minStartRotation+this.rotation:
a.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation;f.minRadius!==f.radius?q.x=Math.random()*(f.radius-f.minRadius)+f.minRadius:q.x=f.radius;q.y=0;f=360*Math.random();a.rotation+=f;c.default.rotatePoint(f,q);q.x+=this.spawnCircle.x;q.y+=this.spawnCircle.y;0!==this.rotation&&c.default.rotatePoint(this.rotation,q);a.position.x=e+q.x;a.position.y=d+q.y},d.prototype._spawnBurst=function(a,c,e,d){0===this.particleSpacing?a.rotation=360*Math.random():
a.rotation=this.angleStart+this.particleSpacing*d+this.rotation;a.position.x=c;a.position.y=e},d.prototype.cleanup=function(){var a;for(a=this._activeParticlesFirst;a;a=c){var c=a.next;this.recycle(a);a.parent&&a.parent.removeChild(a)}this._activeParticlesFirst=this._activeParticlesLast=null;this.particleCount=0},d.prototype.destroy=function(){this.autoUpdate=!1;this.cleanup();for(var a,c=this._poolFirst;c;c=a)a=c.next,c.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=
this.startColor=this.startScale=this.startAlpha=this.startSpeed=this.customEase=this._completeCallback=null},d}();f.default=b},{"./Particle":3,"./ParticleUtils":4,"./PropertyNode":7}],3:[function(b,d,f){var c=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e])};return function(c,e){function d(){this.constructor=c}a(c,e);c.prototype=null===e?Object.create(e):(d.prototype=
e.prototype,new d)}}();Object.defineProperty(f,"__esModule",{value:!0});var a=b("./ParticleUtils"),e=b("./PropertyList");b=function(d){function f(a){var c=d.call(this)||this;return c.emitter=a,c.anchor.x=c.anchor.y=.5,c.velocity=new PIXI.Point,c.maxLife=0,c.age=0,c.ease=null,c.extraData=null,c.alphaList=new e.default,c.speedList=new e.default,c.speedMultiplier=1,c.acceleration=new PIXI.Point,c.maxSpeed=NaN,c.scaleList=new e.default,c.scaleMultiplier=1,c.colorList=new e.default(!0),c._doAlpha=!1,c._doScale=
!1,c._doSpeed=!1,c._doAcceleration=!1,c._doColor=!1,c._doNormalMovement=!1,c._oneOverLife=0,c.next=null,c.prev=null,c.init=c.init,c.Particle_init=f.prototype.init,c.update=c.update,c.Particle_update=f.prototype.update,c.Sprite_destroy=d.prototype.destroy,c.Particle_destroy=f.prototype.destroy,c.applyArt=c.applyArt,c.kill=c.kill,c}return c(f,d),f.prototype.init=function(){this.age=0;this.velocity.x=this.speedList.current.value*this.speedMultiplier;this.velocity.y=0;a.default.rotatePoint(this.rotation,
this.velocity);this.noRotation?this.rotation=0:this.rotation*=a.default.DEG_TO_RADS;this.rotationSpeed*=a.default.DEG_TO_RADS;this.alpha=this.alphaList.current.value;this.scale.x=this.scale.y=this.scaleList.current.value;this._doAlpha=!!this.alphaList.current.next;this._doSpeed=!!this.speedList.current.next;this._doScale=!!this.scaleList.current.next;this._doColor=!!this.colorList.current.next;this._doAcceleration=0!==this.acceleration.x||0!==this.acceleration.y;this._doNormalMovement=this._doSpeed||
0!==this.speedList.current.value||this._doAcceleration;this._oneOverLife=1/this.maxLife;var c=this.colorList.current.value;this.tint=a.default.combineRGBComponents(c.r,c.g,c.b);this.visible=!0},f.prototype.applyArt=function(a){this.texture=a||PIXI.Texture.EMPTY},f.prototype.update=function(c){if(this.age+=c,this.age>=this.maxLife||0>this.age)return this.kill(),-1;var e=this.age*this._oneOverLife;if(this.ease&&(e=4==this.ease.length?this.ease(e,0,1,1):this.ease(e)),this._doAlpha&&(this.alpha=this.alphaList.interpolate(e)),
this._doScale){var d=this.scaleList.interpolate(e)*this.scaleMultiplier;this.scale.x=this.scale.y=d}this._doNormalMovement&&(this._doSpeed?(d=this.speedList.interpolate(e)*this.speedMultiplier,a.default.normalize(this.velocity),a.default.scaleBy(this.velocity,d)):this._doAcceleration&&(this.velocity.x+=this.acceleration.x*c,this.velocity.y+=this.acceleration.y*c,this.maxSpeed)&&(d=a.default.length(this.velocity),d>this.maxSpeed&&a.default.scaleBy(this.velocity,this.maxSpeed/d)),this.position.x+=this.velocity.x*
c,this.position.y+=this.velocity.y*c);return this._doColor&&(this.tint=this.colorList.interpolate(e)),0!==this.rotationSpeed?this.rotation+=this.rotationSpeed*c:this.acceleration&&!this.noRotation&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x)),e},f.prototype.kill=function(){this.emitter.recycle(this)},f.prototype.destroy=function(){this.parent&&this.parent.removeChild(this);this.Sprite_destroy();this.emitter=this.velocity=this.colorList=this.scaleList=this.alphaList=this.speedList=this.ease=
this.next=this.prev=null},f.parseArt=function(c){var e;for(e=c.length;0<=e;--e)"string"==typeof c[e]&&(c[e]=PIXI.Texture.fromImage(c[e]));if(a.default.verbose)for(e=c.length-1;0<e;--e)if(c[e].baseTexture!=c[e-1].baseTexture){window.console&&console.warn("PixiParticles: using particle textures from different images may hinder performance in WebGL");break}return c},f.parseData=function(a){return a},f}(PIXI.Sprite);f.default=b},{"./ParticleUtils":4,"./PropertyList":6}],4:[function(b,d,f){Object.defineProperty(f,
"__esModule",{value:!0});var c=PIXI.BLEND_MODES,a=b("./PropertyNode"),e={verbose:!1,DEG_TO_RADS:Math.PI/180,rotatePoint:function(a,c){if(a){a*=e.DEG_TO_RADS;var d=Math.sin(a);a=Math.cos(a);var f=c.x*d+c.y*a;c.x=c.x*a-c.y*d;c.y=f}},combineRGBComponents:function(a,c,e){return a<<16|c<<8|e},normalize:function(a){var c=1/e.length(a);a.x*=c;a.y*=c},scaleBy:function(a,c){a.x*=c;a.y*=c},length:function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},hexToRGB:function(a,c){c||(c={});"#"==a.charAt(0)?a=a.substr(1):
0===a.indexOf("0x")&&(a=a.substr(2));var e;return 8==a.length&&(e=a.substr(0,2),a=a.substr(2)),c.r=parseInt(a.substr(0,2),16),c.g=parseInt(a.substr(2,2),16),c.b=parseInt(a.substr(4,2),16),e&&(c.a=parseInt(e,16)),c},generateEase:function(a){var c=a.length,e=1/c;return function(d){var f,b,l=c*d|0;return f=(d-l*e)*c,b=a[l]||a[c-1],b.s+f*(2*(1-f)*(b.cp-b.s)+f*(b.e-b.s))}},getBlendMode:function(a){if(!a)return c.NORMAL;for(a=a.toUpperCase();0<=a.indexOf(" ");)a=a.replace(" ","_");return c[a]||c.NORMAL},
createSteppedGradient:function(c,d){void 0===d&&(d=10);("number"!=typeof d||0>=d)&&(d=10);var f=new a.default(c[0].value,c[0].time);f.isStepped=!0;for(var b=f,l=c[0],q=1,h=c[q],m=1;m<d;++m){for(var g=m/d;g>h.time;)l=h,h=c[++q];g=(g-l.time)/(h.time-l.time);var k=e.hexToRGB(l.value),z=e.hexToRGB(h.value),y={};y.r=(z.r-k.r)*g+k.r;y.g=(z.g-k.g)*g+k.g;y.b=(z.b-k.b)*g+k.b;b.next=new a.default(y,m/d);b=b.next}return f}};f.default=e},{"./PropertyNode":7}],5:[function(b,d,f){var c=this&&this.__extends||function(){var a=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e])};return function(c,e){function d(){this.constructor=c}a(c,e);c.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}();Object.defineProperty(f,"__esModule",{value:!0});var a=b("./ParticleUtils"),e=b("./Particle"),l=new PIXI.Point,q="pow sqrt abs floor round ceil E PI sin cos tan asin acos atan atan2 log".split(" "),n=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(q).join("|"),
"g");b=function(d){function f(a){a=d.call(this,a)||this;return a.path=null,a.initialRotation=0,a.initialPosition=new PIXI.Point,a.movement=0,a}return c(f,d),f.prototype.init=function(){this.initialRotation=this.rotation;this.Particle_init();this.path=this.extraData.path;this._doNormalMovement=!this.path;this.movement=0;this.initialPosition.x=this.position.x;this.initialPosition.y=this.position.y},f.prototype.update=function(c){var e=this.Particle_update(c);if(0<=e&&this.path){var d=this.speedList.interpolate(e)*
this.speedMultiplier;this.movement+=d*c;l.x=this.movement;l.y=this.path(this.movement);a.default.rotatePoint(this.initialRotation,l);this.position.x=this.initialPosition.x+l.x;this.position.y=this.initialPosition.y+l.y}return e},f.prototype.destroy=function(){this.Particle_destroy();this.path=this.initialPosition=null},f.parseArt=function(a){return e.default.parseArt(a)},f.parseData=function(c){var e={};if(c&&c.path)try{for(var d,f=c.path,b=f.match(n),l=b.length-1;0<=l;--l)0<=q.indexOf(b[l])&&(b[l]=
"Math."+b[l]);d=(f=b.join(""),new Function("x","return "+f+";"));e.path=d}catch(y){a.default.verbose&&console.error("PathParticle: error in parsing path expression"),e.path=null}else a.default.verbose&&console.error("PathParticle requires a path string in extraData!"),e.path=null;return e},f}(e.default);f.default=b},{"./Particle":3,"./ParticleUtils":4}],6:[function(b,d,f){function c(a){return this.ease&&(a=this.ease(a)),(this.next.value-this.current.value)*a+this.current.value}function a(a){this.ease&&
(a=this.ease(a));var c=this.current.value,e=this.next.value;return p.default.combineRGBComponents((e.r-c.r)*a+c.r,(e.g-c.g)*a+c.g,(e.b-c.b)*a+c.b)}function e(a){for(this.ease&&(a=this.ease(a));a>this.next.time;)this.current=this.next,this.next=this.next.next;return a=(a-this.current.time)/(this.next.time-this.current.time),(this.next.value-this.current.value)*a+this.current.value}function l(a){for(this.ease&&(a=this.ease(a));a>this.next.time;)this.current=this.next,this.next=this.next.next;a=(a-this.current.time)/
(this.next.time-this.current.time);var c=this.current.value,e=this.next.value;return p.default.combineRGBComponents((e.r-c.r)*a+c.r,(e.g-c.g)*a+c.g,(e.b-c.b)*a+c.b)}function q(a){for(this.ease&&(a=this.ease(a));this.next&&a>this.next.time;)this.current=this.next,this.next=this.next.next;return this.current.value}function n(a){for(this.ease&&(a=this.ease(a));this.next&&a>this.next.time;)this.current=this.next,this.next=this.next.next;a=this.current.value;return p.default.combineRGBComponents(a.r,a.g,
a.b)}Object.defineProperty(f,"__esModule",{value:!0});var p=b("./ParticleUtils");b=function(){function d(a){void 0===a&&(a=!1);this.next=this.current=null;this.isColor=!!a;this.ease=this.interpolate=null}return d.prototype.reset=function(d){this.current=d;(this.next=d.next)&&1<=this.next.time?this.interpolate=this.isColor?a:c:d.isStepped?this.interpolate=this.isColor?n:q:this.interpolate=this.isColor?l:e;this.ease=this.current.ease},d}();f.default=b},{"./ParticleUtils":4}],7:[function(b,d,f){Object.defineProperty(f,
"__esModule",{value:!0});var c=b("./ParticleUtils");b=function(){function a(a,d,f){this.value="string"==typeof a?c.default.hexToRGB(a):a;this.time=d;this.next=null;this.isStepped=!1;this.ease=f?"function"==typeof f?f:c.default.generateEase(f):null}return a.createList=function(c){if(Array.isArray(c.list)){var e=c.list,d,f;if(f=d=new a(e[0].value,e[0].time,c.ease),2<e.length||2===e.length&&e[1].value!==e[0].value)for(var b=1;b<e.length;++b)d.next=new a(e[b].value,e[b].time),d=d.next;return f.isStepped=
!!c.isStepped,f}e=new a(c.start,0);return c.end!==c.start&&(e.next=new a(c.end,1)),e},a}();f.default=b},{"./ParticleUtils":4}],8:[function(b,d,f){Object.defineProperty(f,"__esModule",{value:!0});d=b("./ParticleUtils.js");f.ParticleUtils=d.default;d=b("./Particle.js");f.Particle=d.default;d=b("./Emitter.js");f.Emitter=d.default;d=b("./PathParticle.js");f.PathParticle=d.default;b=b("./AnimatedParticle.js");f.AnimatedParticle=b.default},{"./AnimatedParticle.js":1,"./Emitter.js":2,"./Particle.js":3,"./ParticleUtils.js":4,
"./PathParticle.js":5}],9:[function(b,d,f){if(Object.defineProperty(f,"__esModule",{value:!0}),"undefined"==typeof PIXI)throw"pixi-particles requires pixi.js to be loaded first";PIXI.particles||(PIXI.particles={});b=b("./particles");for(var c in b)PIXI.particles[c]=b[c];void 0!==d&&d.exports&&(d.exports=b)},{"./particles":8}]},{},[9])(9)})}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],34:[function(b,k,g){function h(d,c){if("function"!==
typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var m=function(){function d(c,a){for(var e=0;e<a.length;e++){var d=a[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,e){a&&d(c.prototype,
a);e&&d(c,e);return c}}(),d=b("./utils");b=b("./plugin");k.exports=function(f){function c(a,e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;e=e||{};a.time=e.time||150;a.ease=d.ease(e.ease,"easeInOutSine");a.friction=e.friction||.5;e.sides=e.sides||"all";e.sides&&
("all"===e.sides?a.top=a.bottom=a.left=a.right=!0:"horizontal"===e.sides?a.right=a.left=!0:"vertical"===e.sides?a.top=a.bottom=!0:(a.top=-1!==e.sides.indexOf("top"),a.bottom=-1!==e.sides.indexOf("bottom"),a.left=-1!==e.sides.indexOf("left"),a.right=-1!==e.sides.indexOf("right")));a.parseUnderflow(e.underflow||"center");a.last={};return a}h(c,f);m(c,[{key:"parseUnderflow",value:function(a){a=a.toLowerCase();"center"===a?this.underflowY=this.underflowX=0:(this.underflowX=-1!==a.indexOf("left")?-1:-1!==
a.indexOf("right")?1:0,this.underflowY=-1!==a.indexOf("top")?-1:-1!==a.indexOf("bottom")?1:0)}},{key:"down",value:function(){this.toX=this.toY=null}},{key:"up",value:function(){this.bounce()}},{key:"update",value:function(a){if(!this.paused){this.bounce();if(this.toX){var c=this.toX;c.time+=a;this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"});c.time>=this.time?(this.parent.x=c.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(c.time,c.start,c.delta,
this.time)}this.toY&&(c=this.toY,c.time+=a,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),c.time>=this.time?(this.parent.y=c.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(c.time,c.start,c.delta,this.time))}}},{key:"calcUnderflowX",value:function(){switch(this.underflowX){case -1:var a=0;break;case 1:a=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:a=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return a}},{key:"calcUnderflowY",
value:function(){switch(this.underflowY){case -1:var a=0;break;case 1:a=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:a=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return a}},{key:"bounce",value:function(){if(!this.paused){var a=void 0,c=this.parent.plugins.decelerate;if(c&&(c.x||c.y)&&(c.x&&c.percentChangeX===c.friction||c.y&&c.percentChangeY===c.friction)){a=this.parent.OOB();if(a.left&&this.left||a.right&&this.right)c.percentChangeX=this.friction;if(a.top&&
this.top||a.bottom&&this.bottom)c.percentChangeY=this.friction}var d=this.parent.plugins.drag||{},f=this.parent.plugins.pinch||{};c=c||{};d.active||f.active||this.toX&&this.toY||c.x&&c.y||(a=a||this.parent.OOB(),d=a.cornerPoint,this.toX||c.x||(f=null,a.left&&this.left?f=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():0:a.right&&this.right&&(f=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-d.x),null!==f&&this.parent.x!==f&&(this.toX={time:0,start:this.parent.x,
delta:f-this.parent.x,end:f},this.parent.emit("bounce-x-start",this.parent))),this.toY||c.y||(c=null,a.top&&this.top?c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():0:a.bottom&&this.bottom&&(c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-d.y),null!==c&&this.parent.y!==c&&(this.toY={time:0,start:this.parent.y,delta:c-this.parent.y,end:c},this.parent.emit("bounce-y-start",this.parent))))}}},{key:"reset",value:function(){this.toX=this.toY=
null}}]);return c}(b)},{"./plugin":42,"./utils":45}],35:[function(b,k,g){function h(d,f){if("function"!==typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var m=function(){function d(d,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=
!0;"value"in e&&(e.writable=!0);Object.defineProperty(d,e.key,e)}}return function(f,c,a){c&&d(f.prototype,c);a&&d(f,a);return f}}();b=b("./plugin");k.exports=function(d){function f(c,a){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");c=(f.__proto__||Object.getPrototypeOf(f)).call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.minWidth=a.minWidth;c.minHeight=
a.minHeight;c.maxWidth=a.maxWidth;c.maxHeight=a.maxHeight;c.clamp();return c}h(f,d);m(f,[{key:"resize",value:function(){this.clamp()}},{key:"clamp",value:function(){if(!this.paused){var c=this.parent.worldScreenWidth,a=this.parent.worldScreenHeight;this.minWidth&&c<this.minWidth&&(c=this.parent.scale.x,this.parent.fitWidth(this.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/c,c=this.parent.worldScreenWidth,a=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,
type:"clamp-zoom"}));this.maxWidth&&c>this.maxWidth&&(c=this.parent.scale.x,this.parent.fitWidth(this.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/c,a=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}));this.minHeight&&a<this.minHeight&&(c=this.parent.scale.y,this.parent.fitHeight(this.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/c,a=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}));
this.maxHeight&&a>this.maxHeight&&(c=this.parent.scale.y,this.parent.fitHeight(this.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/c,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}]);return f}(b)},{"./plugin":42}],36:[function(b,k,g){function h(d,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,
configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var m=function(){function d(c,a){for(var e=0;e<a.length;e++){var d=a[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,e){a&&d(c.prototype,a);e&&d(c,e);return c}}();g=b("./plugin");var d=b("./utils");k.exports=function(f){function c(a,e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");e=e||{};a=(c.__proto__||
Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;"undefined"===typeof e.direction?(a.left=d.defaults(e.left,null),a.right=d.defaults(e.right,null),a.top=d.defaults(e.top,null),a.bottom=d.defaults(e.bottom,null)):(a.left="x"===e.direction||"all"===e.direction,a.right="x"===e.direction||"all"===e.direction,a.top="y"===e.direction||"all"===e.direction,a.bottom=
"y"===e.direction||"all"===e.direction);a.parseUnderflow(e.underflow||"center");a.move();return a}h(c,f);m(c,[{key:"parseUnderflow",value:function(a){a=a.toLowerCase();"center"===a?this.underflowY=this.underflowX=0:(this.underflowX=-1!==a.indexOf("left")?-1:-1!==a.indexOf("right")?1:0,this.underflowY=-1!==a.indexOf("top")?-1:-1!==a.indexOf("bottom")?1:0)}},{key:"move",value:function(){this.update()}},{key:"update",value:function(){if(!this.paused){var a=this.parent.plugins.decelerate||{};if(null!==
this.left||null!==this.right){var c=void 0;if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case -1:0!==this.parent.x&&(this.parent.x=0,c=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,c=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,c=!0)}else null!==
this.left&&this.parent.left<(!0===this.left?0:this.left)&&(this.parent.x=-(!0===this.left?0:this.left)*this.parent.scale.x,a.x=0,c=!0),null!==this.right&&this.parent.right>(!0===this.right?this.parent.worldWidth:this.right)&&(this.parent.x=-(!0===this.right?this.parent.worldWidth:this.right)*this.parent.scale.x+this.parent.screenWidth,a.x=0,c=!0);c&&this.parent.emit("moved",{viewport:this.parent,type:"clamp-x"})}if(null!==this.top||null!==this.bottom){c=void 0;if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case -1:0!==
this.parent.y&&(this.parent.y=0,c=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,c=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,c=!0)}else null!==this.top&&this.parent.top<(!0===this.top?0:this.top)&&(this.parent.y=-(!0===this.top?0:this.top)*this.parent.scale.y,a.y=
0,c=!0),null!==this.bottom&&this.parent.bottom>(!0===this.bottom?this.parent.worldHeight:this.bottom)&&(this.parent.y=-(!0===this.bottom?this.parent.worldHeight:this.bottom)*this.parent.scale.y+this.parent.screenHeight,a.y=0,c=!0);c&&this.parent.emit("moved",{viewport:this.parent,type:"clamp-y"})}}}}]);return c}(g)},{"./plugin":42,"./utils":45}],37:[function(b,k,g){function h(d,f){if("function"!==typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);
d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var m=function(){function d(d,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(d,e.key,e)}}return function(f,c,a){c&&d(f.prototype,c);a&&d(f,a);return f}}();b=b("./plugin");k.exports=function(d){function f(c,a){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");
c=(f.__proto__||Object.getPrototypeOf(f)).call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;a=a||{};c.friction=a.friction||.95;c.bounce=a.bounce||.5;c.minSpeed="undefined"!==typeof a.minSpeed?a.minSpeed:.01;c.saved=[];return c}h(f,d);m(f,[{key:"down",value:function(){this.saved=[];this.x=this.y=!1}},{key:"move",value:function(){if(!this.paused){var c=this.parent.countDownPointers();if(1===
c||1<c&&!this.parent.plugins.pinch)this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),60<this.saved.length&&this.saved.splice(0,30)}}},{key:"up",value:function(){if(0===this.parent.countDownPointers()&&this.saved.length){var c=performance.now(),a=!0,e=!1,d=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var f=this.saved[Symbol.iterator](),b;!(a=(b=f.next()).done);a=!0){var p=b.value;if(p.time>=c-100){var h=c-p.time;this.x=(this.parent.x-p.x)/h;this.y=(this.parent.y-
p.y)/h;this.percentChangeX=this.percentChangeY=this.friction;break}}}catch(t){e=!0,d=t}finally{try{!a&&f.return&&f.return()}finally{if(e)throw d;}}}}},{key:"activate",value:function(c){c=c||{};"undefined"!==typeof c.x&&(this.x=c.x,this.percentChangeX=this.friction);"undefined"!==typeof c.y&&(this.y=c.y,this.percentChangeY=this.friction)}},{key:"update",value:function(c){if(!this.paused){var a=void 0;this.x&&(this.parent.x+=this.x*c,this.x*=this.percentChangeX,Math.abs(this.x)<this.minSpeed&&(this.x=
0),a=!0);this.y&&(this.parent.y+=this.y*c,this.y*=this.percentChangeY,Math.abs(this.y)<this.minSpeed&&(this.y=0),a=!0);a&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}}},{key:"reset",value:function(){this.x=this.y=null}}]);return f}(b)},{"./plugin":42}],38:[function(b,k,g){function h(d,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,
writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var m=function(){function d(c,a){for(var e=0;e<a.length;e++){var d=a[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,e){a&&d(c.prototype,a);e&&d(c,e);return c}}(),d=b("./utils");b=b("./plugin");k.exports=function(f){function c(a,e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");e=e||
{};a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.moved=!1;a.wheelActive=d.defaults(e.wheel,!0);a.wheelScroll=e.wheelScroll||1;a.reverse=e.reverse?1:-1;a.clampWheel=e.clampWheel;a.xDirection=!e.direction||"all"===e.direction||"x"===e.direction;a.yDirection=!e.direction||"all"===e.direction||"y"===e.direction;a.parseUnderflow(e.underflow||
"center");return a}h(c,f);m(c,[{key:"parseUnderflow",value:function(a){a=a.toLowerCase();"center"===a?this.underflowY=this.underflowX=0:(this.underflowX=-1!==a.indexOf("left")?-1:-1!==a.indexOf("right")?1:0,this.underflowY=-1!==a.indexOf("top")?-1:-1!==a.indexOf("bottom")?1:0)}},{key:"down",value:function(a){if(!this.paused){var c=this.parent.countDownPointers();if((1===c||1<c&&!this.parent.plugins.pinch)&&this.parent.parent)return c=this.parent.parent.toLocal(a.data.global),this.last={x:a.data.global.x,
y:a.data.global.y,parent:c},this.current=a.data.pointerId,!0;this.last=null}}},{key:"move",value:function(a){if(!this.paused&&this.last&&this.current===a.data.pointerId){var c=a.data.global.x,d=a.data.global.y,f=this.parent.countDownPointers();if(1===f||1<f&&!this.parent.plugins.pinch){f=c-this.last.x;var b=d-this.last.y;if(this.moved||this.xDirection&&this.parent.checkThreshold(f)||this.yDirection&&this.parent.checkThreshold(b))return a=this.parent.parent.toLocal(a.data.global),this.xDirection&&
(this.parent.x+=a.x-this.last.parent.x),this.yDirection&&(this.parent.y+=a.y-this.last.parent.y),this.last={x:c,y:d,parent:a},this.moved||this.parent.emit("drag-start",{screen:this.last,world:this.parent.toWorld(this.last),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}else this.moved=!1}}},{key:"up",value:function(){var a=this.parent.getTouchPointers();if(1===a.length){a=a[0];if(a.last){var c=this.parent.parent.toLocal(a.last);this.last={x:a.last.x,
y:a.last.y,parent:c};this.current=a.last.data.pointerId}this.moved=!1;return!0}if(this.last&&this.moved)return this.parent.emit("drag-end",{screen:this.last,world:this.parent.toWorld(this.last),viewport:this.parent}),this.last=this.moved=!1,!0}},{key:"wheel",value:function(a){if(!this.paused&&this.wheelActive&&!this.parent.plugins.wheel)return this.xDirection&&(this.parent.x+=a.deltaX*this.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=a.deltaY*this.wheelScroll*this.reverse),this.clampWheel&&
this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",this.parent),this.parent.passiveWheel||a.preventDefault(),!0}},{key:"resume",value:function(){this.last=null;this.paused=!1}},{key:"clamp",value:function(){var a=this.parent.plugins.decelerate||{};if("y"!==this.clampWheel)if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case -1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=
(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else 0>this.parent.left?(this.parent.x=0,a.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,a.x=0);if("x"!==this.clampWheel)if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case -1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-
this.parent.screenWorldHeight)/2}else 0>this.parent.top&&(this.parent.y=0,a.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,a.y=0)}},{key:"active",get:function(){return this.moved}}]);return c}(b)},{"./plugin":42,"./utils":45}],39:[function(b,k,g){function h(d,f){if("function"!==typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);d.prototype=Object.create(f&&
f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var m=function(){function d(d,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(d,e.key,e)}}return function(f,c,a){c&&d(f.prototype,c);a&&d(f,a);return f}}();b=b("./plugin");k.exports=function(d){function f(c,a,d){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");
c=(f.__proto__||Object.getPrototypeOf(f)).call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;d=d||{};c.speed=d.speed||0;c.target=a;c.radius=d.radius;return c}h(f,d);m(f,[{key:"update",value:function(){if(!this.paused){var c=this.parent.center,a=this.target.x,d=this.target.y;if(this.radius)if(Math.sqrt(Math.pow(this.target.y-c.y,2)+Math.pow(this.target.x-c.x,2))>this.radius)d=Math.atan2(this.target.y-
c.y,this.target.x-c.x),a=this.target.x-Math.cos(d)*this.radius,d=this.target.y-Math.sin(d)*this.radius;else return;var f=a-c.x,b=d-c.y;if(f||b){if(this.speed){var n=Math.atan2(d-c.y,a-c.x),p=Math.cos(n)*this.speed;n=Math.sin(n)*this.speed;this.parent.moveCenter(Math.abs(p)>Math.abs(f)?a:c.x+p,Math.abs(n)>Math.abs(b)?d:c.y+n)}else this.parent.moveCenter(a,d);this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}}}]);return f}(b)},{"./plugin":42}],40:[function(b,k,g){function h(d,c){if("function"!==
typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var m=function(){function d(c,a){for(var d=0;d<a.length;d++){var f=a[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(c,f.key,f)}}return function(c,a,e){a&&d(c.prototype,
a);e&&d(c,e);return c}}(),d=b("./utils");b=b("./plugin");k.exports=function(f){function c(a,d){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;d=d||{};a.options=d;a.reverse=d.reverse?1:-1;a.noDecelerate=d.noDecelerate;a.linear=d.linear;a.radiusSquared=Math.pow(d.radius,
2);a.resize();a.speed=d.speed||8;return a}h(c,f);m(c,[{key:"resize",value:function(){var a=this.options,c=a.distance;d.exists(c)?(this.top=this.left=c,this.right=window.innerWidth-c,this.bottom=window.innerHeight-c):this.radius||(this.left=d.exists(a.left)?a.left:null,this.top=d.exists(a.top)?a.top:null,this.right=d.exists(a.right)?window.innerWidth-a.right:null,this.bottom=d.exists(a.bottom)?window.innerHeight-a.bottom:null)}},{key:"down",value:function(){this.horizontal=this.vertical=null}},{key:"move",
value:function(a){if("MOUSE"===a.data.identifier&&0===a.data.buttons){var c=a.data.global.x;a=a.data.global.y;if(this.radiusSquared){var f=this.parent.toScreen(this.parent.center);Math.pow(f.x-c,2)+Math.pow(f.y-a,2)>=this.radiusSquared?(c=Math.atan2(f.y-a,f.x-c),this.linear?(this.horizontal=Math.round(Math.cos(c))*this.speed*this.reverse*.06,this.vertical=Math.round(Math.sin(c))*this.speed*this.reverse*.06):(this.horizontal=Math.cos(c)*this.speed*this.reverse*.06,this.vertical=Math.sin(c)*this.speed*
this.reverse*.06)):(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0)}else d.exists(this.left)&&c<this.left?this.horizontal=1*this.reverse*this.speed*.06:d.exists(this.right)&&c>this.right?this.horizontal=-1*this.reverse*this.speed*.06:(this.decelerateHorizontal(),this.horizontal=0),d.exists(this.top)&&a<this.top?this.vertical=1*this.reverse*this.speed*.06:d.exists(this.bottom)&&a>this.bottom?this.vertical=-1*this.reverse*this.speed*
.06:(this.decelerateVertical(),this.vertical=0)}}},{key:"decelerateHorizontal",value:function(){var a=this.parent.plugins.decelerate;this.horizontal&&a&&!this.noDecelerate&&a.activate({x:this.horizontal*this.speed*this.reverse/(1E3/60)})}},{key:"decelerateVertical",value:function(){var a=this.parent.plugins.decelerate;this.vertical&&a&&!this.noDecelerate&&a.activate({y:this.vertical*this.speed*this.reverse/(1E3/60)})}},{key:"up",value:function(){this.horizontal&&this.decelerateHorizontal();this.vertical&&
this.decelerateVertical();this.horizontal=this.vertical=null}},{key:"update",value:function(){if(!this.paused&&(this.horizontal||this.vertical)){var a=this.parent.center;this.horizontal&&(a.x+=this.horizontal*this.speed);this.vertical&&(a.y+=this.vertical*this.speed);this.parent.moveCenter(a);this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}]);return c}(b)},{"./plugin":42,"./utils":45}],41:[function(b,k,g){function h(d,f){if("function"!==typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+
typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var m=function(){function d(d,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(d,e.key,e)}}return function(f,c,a){c&&d(f.prototype,c);a&&d(f,a);return f}}();b=b("./plugin");k.exports=function(d){function f(c,a){if(!(this instanceof
f))throw new TypeError("Cannot call a class as a function");c=(f.__proto__||Object.getPrototypeOf(f)).call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;a=a||{};c.percent=a.percent||1;c.noDrag=a.noDrag;c.center=a.center;return c}h(f,d);m(f,[{key:"down",value:function(){if(2<=this.parent.countDownPointers())return this.active=!0}},{key:"move",value:function(c){if(!this.paused&&this.active){var a=
c.data.global.x,d=c.data.global.y,f=this.parent.getTouchPointers();if(2<=f.length){var b=f[0];f=f[1];var n=b.last&&f.last?Math.sqrt(Math.pow(f.last.x-b.last.x,2)+Math.pow(f.last.y-b.last.y,2)):null;b.pointerId===c.data.pointerId?b.last={x:a,y:d,data:c.data}:f.pointerId===c.data.pointerId&&(f.last={x:a,y:d,data:c.data});n?(a=void 0,c={x:b.last.x+(f.last.x-b.last.x)/2,y:b.last.y+(f.last.y-b.last.y)/2},this.center||(a=this.parent.toLocal(c)),b=(Math.sqrt(Math.pow(f.last.x-b.last.x,2)+Math.pow(f.last.y-
b.last.y,2))-n)/this.parent.screenWidth*this.parent.scale.x*this.percent,this.parent.scale.x+=b,this.parent.scale.y+=b,this.parent.emit("zoomed",{viewport:this.parent,type:"pinch"}),(b=this.parent.plugins["clamp-zoom"])&&b.clamp(),this.center?this.parent.moveCenter(this.center):(b=this.parent.toGlobal(a),this.parent.x+=c.x-b.x,this.parent.y+=c.y-b.y,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),!this.noDrag&&this.lastCenter&&(this.parent.x+=c.x-this.lastCenter.x,this.parent.y+=c.y-
this.lastCenter.y,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=c,this.moved=!0):this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}}}},{key:"up",value:function(){if(this.pinching&&1>=this.parent.touches.length)return this.active=!1,this.lastCenter=null,this.moved=this.pinching=!1,this.parent.emit("pinch-end",this.parent),!0}}]);return f}(b)},{"./plugin":42}],42:[function(b,k,g){var h=function(){function b(d,f){for(var c=0;c<f.length;c++){var a=
f[c];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(d,a.key,a)}}return function(d,f,c){f&&b(d.prototype,f);c&&b(d,c);return d}}();k.exports=function(){function b(d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.parent=d;this.paused=!1}h(b,[{key:"down",value:function(){}},{key:"move",value:function(){}},{key:"up",value:function(){}},{key:"wheel",value:function(){}},{key:"update",value:function(){}},{key:"resize",
value:function(){}},{key:"reset",value:function(){}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1}}]);return b}()},{}],43:[function(b,k,g){function h(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}
var m=function(){function c(a,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(a,d,f){d&&c(a.prototype,d);f&&c(a,f);return a}}(),d=function q(a,d,f){null===a&&(a=Function.prototype);var e=Object.getOwnPropertyDescriptor(a,d);if(void 0===e){if(a=Object.getPrototypeOf(a),null!==a)return q(a,d,f)}else{if("value"in e)return e.value;d=e.get;return void 0===d?void 0:d.call(f)}};g=b("./plugin");
var f=b("./utils");k.exports=function(a){function e(a,d){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var b=(e.__proto__||Object.getPrototypeOf(e)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;d=d||{};b.width=d.width;b.height=d.height;0<b.width&&(b.x_scale=a._screenWidth/b.width);0<b.height&&(b.y_scale=a._screenHeight/b.height);b.xIndependent=f.exists(b.x_scale);
b.yIndependent=f.exists(b.y_scale);b.x_scale=b.xIndependent?b.x_scale:b.y_scale;b.y_scale=b.yIndependent?b.y_scale:b.x_scale;b.time=f.defaults(d.time,1E3);b.ease=f.ease(d.ease,"easeInOutSine");b.center=d.center;b.noMove=d.noMove;b.stopOnResize=d.stopOnResize;b.removeOnInterrupt=d.removeOnInterrupt;b.removeOnComplete=f.defaults(d.removeOnComplete,!0);b.interrupt=f.defaults(d.interrupt,!0);0===b.time?(a.container.scale.x=b.x_scale,a.container.scale.y=b.y_scale,b.removeOnComplete&&b.parent.removePlugin("snap-zoom")):
d.forceStart&&b.createSnapping();return b}h(e,a);m(e,[{key:"createSnapping",value:function(){var a=this.parent.scale;this.snapping={time:0,startX:a.x,startY:a.y,deltaX:this.x_scale-a.x,deltaY:this.y_scale-a.y};this.parent.emit("snap-zoom-start",this.parent)}},{key:"resize",value:function(){this.snapping=null;0<this.width&&(this.x_scale=this.parent._screenWidth/this.width);0<this.height&&(this.y_scale=this.parent._screenHeight/this.height);this.x_scale=this.xIndependent?this.x_scale:this.y_scale;this.y_scale=
this.yIndependent?this.y_scale:this.x_scale}},{key:"reset",value:function(){this.snapping=null}},{key:"wheel",value:function(){this.removeOnInterrupt&&this.parent.removePlugin("snap-zoom")}},{key:"down",value:function(){this.removeOnInterrupt?this.parent.removePlugin("snap-zoom"):this.interrupt&&(this.snapping=null)}},{key:"update",value:function(a){if(!(this.paused||this.interrupt&&0!==this.parent.countDownPointers())){var d=void 0;this.center||this.noMove||(d=this.parent.center);if(!this.snapping)this.parent.scale.x===
this.x_scale&&this.parent.scale.y===this.y_scale||this.createSnapping();else if(this.snapping){var e=this.snapping;e.time+=a;e.time>=this.time?(this.parent.scale.set(this.x_scale,this.y_scale),this.removeOnComplete&&this.parent.removePlugin("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null):(a=this.snapping,this.parent.scale.x=this.ease(a.time,a.startX,a.deltaX,this.time),this.parent.scale.y=this.ease(a.time,a.startY,a.deltaY,this.time));(a=this.parent.plugins["clamp-zoom"])&&
a.clamp();this.noMove||(this.center?this.parent.moveCenter(this.center):this.parent.moveCenter(d))}}}},{key:"resume",value:function(){this.snapping=null;d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"resume",this).call(this)}}]);return e}(g)},{"./plugin":42,"./utils":45}],44:[function(b,k,g){function h(d,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,
enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var m=function(){function d(c,a){for(var d=0;d<a.length;d++){var f=a[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(c,f.key,f)}}return function(c,a,e){a&&d(c.prototype,a);e&&d(c,e);return c}}();g=b("./plugin");var d=b("./utils");k.exports=function(f){function c(a,e,f,b){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;b=b||{};a.friction=b.friction||.8;a.time=b.time||1E3;a.ease=d.ease(b.ease,"easeInOutSine");a.x=e;a.y=f;a.topLeft=b.topLeft;a.interrupt=d.defaults(b.interrupt,!0);a.removeOnComplete=b.removeOnComplete;a.removeOnInterrupt=b.removeOnInterrupt;b.forceStart&&a.startEase();return a}h(c,f);m(c,[{key:"snapStart",
value:function(){this.percent=0;this.snapping={time:0};var a=this.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-a.x;this.deltaY=this.y-a.y;this.startX=a.x;this.startY=a.y;this.parent.emit("snap-start",this.parent)}},{key:"wheel",value:function(){this.removeOnInterrupt&&this.parent.removePlugin("snap")}},{key:"down",value:function(){this.removeOnInterrupt?this.parent.removePlugin("snap"):this.interrupt&&(this.snapping=null)}},{key:"up",value:function(){if(0===this.parent.countDownPointers()){var a=
this.parent.plugins.decelerate;a&&(a.x||a.y)&&(a.percentChangeX=a.percentChangeY=this.friction)}}},{key:"update",value:function(a){if(!(this.paused||this.interrupt&&0!==this.parent.countDownPointers()))if(this.snapping){var c=this.snapping;c.time+=a;a=void 0;if(c.time>this.time){a=!0;c=this.startX+this.deltaX;var d=this.startY+this.deltaY}else d=this.ease(c.time,0,1,this.time),c=this.startX+this.deltaX*d,d=this.startY+this.deltaY*d;this.topLeft?this.parent.moveCorner(c,d):this.parent.moveCenter(c,
d);this.parent.emit("moved",{viewport:this.parent,type:"snap"});a&&(this.removeOnComplete&&this.parent.removePlugin("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else a=this.topLeft?this.parent.corner:this.parent.center,a.x===this.x&&a.y===this.y||this.snapStart()}}]);return c}(g)},{"./plugin":42,"./utils":45}],45:[function(b,k,g){function h(d){return void 0!==d&&null!==d}var m=b("penner");k.exports={exists:h,defaults:function(d,f){return void 0!==d&&null!==d?d:f},ease:function(d,
f){if(h(d)){if("function"===typeof d)return d;if("string"===typeof d)return m[d]}else return m[f]}}},{penner:15}],46:[function(b,k,g){function h(a,c){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!==typeof c&&"function"!==typeof c?a:c}function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}var d=function(){function a(a,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(c,d,e){d&&a(c.prototype,d);e&&a(c,e);return c}}(),f=function r(a,c,d){null===a&&(a=Function.prototype);var e=Object.getOwnPropertyDescriptor(a,c);if(void 0===e){if(a=Object.getPrototypeOf(a),
null!==a)return r(a,c,d)}else{if("value"in e)return e.value;c=e.get;return void 0===c?void 0:c.call(d)}},c=b("./utils"),a=b("./drag"),e=b("./pinch"),l=b("./clamp"),q=b("./clamp-zoom"),n=b("./decelerate"),p=b("./bounce"),x=b("./snap"),t=b("./snap-zoom"),v=b("./follow"),w=b("./wheel"),A=b("./mouse-edges"),u="drag pinch wheel follow mouse-edges decelerate bounce snap-zoom clamp-zoom snap clamp".split(" ");b=function(b){function g(a){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");
a=a||{};var d=h(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));d.plugins={};d.pluginsList=[];d._screenWidth=a.screenWidth;d._screenHeight=a.screenHeight;d._worldWidth=a.worldWidth;d._worldHeight=a.worldHeight;d.hitAreaFullScreen=c.defaults(a.hitAreaFullScreen,!0);d.forceHitArea=a.forceHitArea;d.passiveWheel=c.defaults(a.passiveWheel,!0);d.stopEvent=a.stopPropagation;d.threshold=c.defaults(a.threshold,5);d.interaction=a.interaction||null;d.div=a.divWheel||document.body;d.listeners(d.div);
d.touches=[];a.noTicker||(d.ticker=a.ticker||PIXI.ticker.shared,d.tickerFunction=function(){return d.update(d.ticker.elapsedMS)},d.ticker.add(d.tickerFunction));return d}m(g,b);d(g,[{key:"removeListeners",value:function(){this.ticker.remove(this.tickerFunction);this.div.removeEventListener("wheel",this.wheelFunction)}},{key:"destroy",value:function(a){f(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"destroy",this).call(this,a);this.removeListeners()}},{key:"update",value:function(a){if(!this.pause){var c=
!0,d=!1,e=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var f=this.pluginsList[Symbol.iterator](),b;!(c=(b=f.next()).done);c=!0)b.value.update(a)}catch(I){d=!0,e=I}finally{try{!c&&f.return&&f.return()}finally{if(d)throw e;}}this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&
(this.emit("zoomed-end",this),this.zooming=!1));this.forceHitArea||(this.hitArea.x=this.left,this.hitArea.y=this.top,this.hitArea.width=this.worldScreenWidth,this.hitArea.height=this.worldScreenHeight);this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y;this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y}}}},{key:"resize",value:function(a,c,
d,e){this._screenWidth=a||window.innerWidth;this._screenHeight=c||window.innerHeight;this._worldWidth=d;this._worldHeight=e;this.resizePlugins()}},{key:"resizePlugins",value:function(){var a=!0,c=!1,d=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var e=this.pluginsList[Symbol.iterator](),f;!(a=(f=e.next()).done);a=!0)f.value.resize()}catch(F){c=!0,d=F}finally{try{!a&&e.return&&e.return()}finally{if(c)throw d;}}}},{key:"getVisibleBounds",value:function(){return{x:this.left,y:this.top,
width:this.worldScreenWidth,height:this.worldScreenHeight}}},{key:"listeners",value:function(a){var c=this;this.interactive=!0;this.forceHitArea||(this.hitArea=new PIXI.Rectangle(0,0,this.worldWidth,this.worldHeight));this.on("pointerdown",this.down);this.on("pointermove",this.move);this.on("pointerup",this.up);this.on("pointerupoutside",this.up);this.on("pointercancel",this.up);this.on("pointerout",this.up);this.wheelFunction=function(a){return c.handleWheel(a)};a.addEventListener("wheel",this.wheelFunction,
{passive:this.passiveWheel});this.leftDown=!1}},{key:"down",value:function(a){if(!this.pause){"mouse"===a.data.pointerType?0==a.data.originalEvent.button&&(this.leftDown=!0):this.touches.push(a.data.pointerId);if(1===this.countDownPointers()){this.last={x:a.data.global.x,y:a.data.global.y};var c=this.plugins.decelerate,d=this.plugins.bounce;this.clickedAvailable=c&&!(Math.abs(c.x)<this.threshold&&Math.abs(c.y)<this.threshold)||d&&(d.toX||d.toY)?!1:!0}else this.clickedAvailable=!1;c=void 0;d=!0;var e=
!1,f=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var b=this.pluginsList[Symbol.iterator](),l;!(d=(l=b.next()).done);d=!0)l.value.down(a)&&(c=!0)}catch(K){e=!0,f=K}finally{try{!d&&b.return&&b.return()}finally{if(e)throw f;}}c&&this.stopEvent&&a.stopPropagation()}}},{key:"checkThreshold",value:function(a){return Math.abs(a)>=this.threshold?!0:!1}},{key:"move",value:function(a){if(!this.pause){var c=void 0,d=!0,e=!1,f=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();
for(var b=this.pluginsList[Symbol.iterator](),l;!(d=(l=b.next()).done);d=!0)l.value.move(a)&&(c=!0)}catch(K){e=!0,f=K}finally{try{!d&&b.return&&b.return()}finally{if(e)throw f;}}this.clickedAvailable&&(d=a.data.global.y-this.last.y,this.checkThreshold(a.data.global.x-this.last.x)||this.checkThreshold(d))&&(this.clickedAvailable=!1);c&&this.stopEvent&&a.stopPropagation()}}},{key:"up",value:function(a){if(!this.pause){a.data.originalEvent instanceof MouseEvent&&0==a.data.originalEvent.button&&(this.leftDown=
!1);if("mouse"!==a.data.pointerType)for(var c=0;c<this.touches.length;c++)if(this.touches[c]===a.data.pointerId){this.touches.splice(c,1);break}c=void 0;var d=!0,e=!1,f=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var b=this.pluginsList[Symbol.iterator](),l;!(d=(l=b.next()).done);d=!0)l.value.up(a)&&(c=!0)}catch(K){e=!0,f=K}finally{try{!d&&b.return&&b.return()}finally{if(e)throw f;}}this.clickedAvailable&&0===this.countDownPointers()&&(this.emit("clicked",{screen:this.last,world:this.toWorld(this.last),
viewport:this}),this.clickedAvailable=!1);c&&this.stopEvent&&a.stopPropagation()}}},{key:"getPointerPosition",value:function(a){var c=new PIXI.Point;this.interaction?this.interaction.mapPositionToPoint(c,a.clientX,a.clientY):(c.x=a.clientX,c.y=a.clientY);return c}},{key:"handleWheel",value:function(a){if(!this.pause){var c=this.toLocal(this.getPointerPosition(a));if(this.left<=c.x&&c.x<=this.right&&this.top<=c.y&&c.y<=this.bottom){c=void 0;var d=!0,e=!1,f=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();
for(var b=this.pluginsList[Symbol.iterator](),l;!(d=(l=b.next()).done);d=!0)l.value.wheel(a)&&(c=!0)}catch(K){e=!0,f=K}finally{try{!d&&b.return&&b.return()}finally{if(e)throw f;}}return c}}}},{key:"toWorld",value:function(){return 2===arguments.length?this.toLocal({x:arguments[0],y:arguments[1]}):this.toLocal(arguments[0])}},{key:"toScreen",value:function(){return 2===arguments.length?this.toGlobal({x:arguments[0],y:arguments[1]}):this.toGlobal(arguments[0])}},{key:"moveCenter",value:function(a,c){if(isNaN(a)){var d=
a.x;a=a.y}else d=a,a=c;this.position.set((this.worldScreenWidth/2-d)*this.scale.x,(this.worldScreenHeight/2-a)*this.scale.y);this._reset();return this}},{key:"moveCorner",value:function(){1===arguments.length?this.position.set(-arguments[0].x*this.scale.x,-arguments[0].y*this.scale.y):this.position.set(-arguments[0]*this.scale.x,-arguments[1]*this.scale.y);this._reset();return this}},{key:"fitWidth",value:function(a,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,e=arguments[3],
f=void 0;c&&(f=this.center);a=a||this.worldWidth;this.scale.x=this.screenWidth/a;d&&(this.scale.y=this.scale.x);d=this.plugins["clamp-zoom"];!e&&d&&d.clamp();c&&this.moveCenter(f);return this}},{key:"fitHeight",value:function(a,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,e=arguments[3],f=void 0;c&&(f=this.center);a=a||this.worldHeight;this.scale.y=this.screenHeight/a;d&&(this.scale.x=this.scale.y);d=this.plugins["clamp-zoom"];!e&&d&&d.clamp();c&&this.moveCenter(f);return this}},
{key:"fitWorld",value:function(a){var c=void 0;a&&(c=this.center);this.scale.x=this._screenWidth/this._worldWidth;this.scale.y=this._screenHeight/this._worldHeight;this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;var d=this.plugins["clamp-zoom"];d&&d.clamp();a&&this.moveCenter(c);return this}},{key:"fit",value:function(a,c,d){var e=void 0;a&&(e=this.center);c=c||this.worldWidth;d=d||this.worldHeight;this.scale.x=this.screenWidth/c;this.scale.y=this.screenHeight/d;this.scale.x<
this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;(c=this.plugins["clamp-zoom"])&&c.clamp();a&&this.moveCenter(e);return this}},{key:"zoomPercent",value:function(a,c){var d=void 0;c&&(d=this.center);this.scale.set(this.scale.x+this.scale.x*a);(a=this.plugins["clamp-zoom"])&&a.clamp();c&&this.moveCenter(d);return this}},{key:"zoom",value:function(a,c){this.fitWidth(a+this.worldScreenWidth,c);return this}},{key:"snapZoom",value:function(a){this.plugins["snap-zoom"]=new t(this,a);this.pluginsSort();
return this}},{key:"OOB",value:function(){var a={};a.left=0>this.left;a.right=this.right>this._worldWidth;a.top=0>this.top;a.bottom=this.bottom>this._worldHeight;a.cornerPoint={x:this._worldWidth*this.scale.x-this._screenWidth,y:this._worldHeight*this.scale.y-this._screenHeight};return a}},{key:"countDownPointers",value:function(){return(this.leftDown?1:0)+this.touches.length}},{key:"getTouchPointers",value:function(){var a=[],c=this.trackedPointers,d;for(d in c){var e=c[d];-1!==this.touches.indexOf(e.pointerId)&&
a.push(e)}return a}},{key:"getPointers",value:function(){var a=[],c=this.trackedPointers,d;for(d in c)a.push(c[d]);return a}},{key:"_reset",value:function(){this.plugins.bounce&&(this.plugins.bounce.reset(),this.plugins.bounce.bounce());this.plugins.decelerate&&this.plugins.decelerate.reset();this.plugins.snap&&this.plugins.snap.reset();this.plugins.clamp&&this.plugins.clamp.update();this.plugins["clamp-zoom"]&&this.plugins["clamp-zoom"].clamp()}},{key:"removePlugin",value:function(a){this.plugins[a]&&
(this.plugins[a]=null,this.emit(a+"-remove"),this.pluginsSort())}},{key:"pausePlugin",value:function(a){this.plugins[a]&&this.plugins[a].pause()}},{key:"resumePlugin",value:function(a){this.plugins[a]&&this.plugins[a].resume()}},{key:"pluginsSort",value:function(){this.pluginsList=[];var a=!0,c=!1,d=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var e=u[Symbol.iterator](),f;!(a=(f=e.next()).done);a=!0){var b=f.value;this.plugins[b]&&this.pluginsList.push(this.plugins[b])}}catch(I){c=
!0,d=I}finally{try{!a&&e.return&&e.return()}finally{if(c)throw d;}}}},{key:"drag",value:function(c){this.plugins.drag=new a(this,c);this.pluginsSort();return this}},{key:"clamp",value:function(a){this.plugins.clamp=new l(this,a);this.pluginsSort();return this}},{key:"decelerate",value:function(a){this.plugins.decelerate=new n(this,a);this.pluginsSort();return this}},{key:"bounce",value:function(a){this.plugins.bounce=new p(this,a);this.pluginsSort();return this}},{key:"pinch",value:function(a){this.plugins.pinch=
new e(this,a);this.pluginsSort();return this}},{key:"snap",value:function(a,c,d){this.plugins.snap=new x(this,a,c,d);this.pluginsSort();return this}},{key:"follow",value:function(a,c){this.plugins.follow=new v(this,a,c);this.pluginsSort();return this}},{key:"wheel",value:function(a){this.plugins.wheel=new w(this,a);this.pluginsSort();return this}},{key:"clampZoom",value:function(a){this.plugins["clamp-zoom"]=new q(this,a);this.pluginsSort();return this}},{key:"mouseEdges",value:function(a){this.plugins["mouse-edges"]=
new A(this,a);this.pluginsSort();return this}},{key:"screenWidth",get:function(){return this._screenWidth},set:function(a){this._screenWidth=a}},{key:"screenHeight",get:function(){return this._screenHeight},set:function(a){this._screenHeight=a}},{key:"worldWidth",get:function(){return this._worldWidth?this._worldWidth:this.width},set:function(a){this._worldWidth=a;this.resizePlugins()}},{key:"worldHeight",get:function(){return this._worldHeight?this._worldHeight:this.height},set:function(a){this._worldHeight=
a;this.resizePlugins()}},{key:"worldScreenWidth",get:function(){return this._screenWidth/this.scale.x}},{key:"worldScreenHeight",get:function(){return this._screenHeight/this.scale.y}},{key:"screenWorldWidth",get:function(){return this._worldWidth*this.scale.x}},{key:"screenWorldHeight",get:function(){return this._worldHeight*this.scale.y}},{key:"center",get:function(){return{x:this.worldScreenWidth/2-this.x/this.scale.x,y:this.worldScreenHeight/2-this.y/this.scale.y}},set:function(a){this.moveCenter(a)}},
{key:"corner",get:function(){return{x:-this.x/this.scale.x,y:-this.y/this.scale.y}},set:function(a){this.moveCorner(a)}},{key:"right",get:function(){return-this.x/this.scale.x+this.worldScreenWidth},set:function(a){this.x=-a*this.scale.x+this.screenWidth;this._reset()}},{key:"left",get:function(){return-this.x/this.scale.x},set:function(a){this.x=-a*this.scale.x;this._reset()}},{key:"top",get:function(){return-this.y/this.scale.y},set:function(a){this.y=-a*this.scale.y;this._reset()}},{key:"bottom",
get:function(){return-this.y/this.scale.y+this.worldScreenHeight},set:function(a){this.y=-a*this.scale.y+this.screenHeight;this._reset()}},{key:"dirty",get:function(){return this._dirty},set:function(a){this._dirty=a}},{key:"forceHitArea",get:function(){return this._forceHitArea},set:function(a){a?this.hitArea=this._forceHitArea=a:(this._forceHitArea=!1,this.hitArea=new PIXI.Rectangle(0,0,this.worldWidth,this.worldHeight))}},{key:"pause",get:function(){return this._pause},set:function(a){this._pause=
a;this.lastViewport=null;this.zooming=this.moving=!1;a&&(this.touches=[],this.leftDown=!1)}}]);return g}(PIXI.Container);"undefined"!==typeof PIXI&&(PIXI.extras.Viewport=b);k.exports=b},{"./bounce":34,"./clamp":36,"./clamp-zoom":35,"./decelerate":37,"./drag":38,"./follow":39,"./mouse-edges":40,"./pinch":41,"./snap":44,"./snap-zoom":43,"./utils":45,"./wheel":47}],47:[function(b,k,g){function h(d,f){if("function"!==typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+
typeof f);d.prototype=Object.create(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});f&&(Object.setPrototypeOf?Object.setPrototypeOf(d,f):d.__proto__=f)}var m=function(){function d(d,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(d,e.key,e)}}return function(f,c,a){c&&d(f.prototype,c);a&&d(f,a);return f}}();b=b("./plugin");k.exports=function(d){function f(c,a){if(!(this instanceof
f))throw new TypeError("Cannot call a class as a function");c=(f.__proto__||Object.getPrototypeOf(f)).call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;a=a||{};c.percent=a.percent||.1;c.center=a.center;c.reverse=a.reverse;c.smooth=a.smooth;c.interrupt="undefined"===typeof a.interrupt?!0:a.interrupt;return c}h(f,d);m(f,[{key:"down",value:function(){this.interrupt&&(this.smoothing=null)}},
{key:"update",value:function(){if(this.smoothing){var c=this.smoothingCenter,a=this.smoothing,d=void 0;this.center||(d=this.parent.toLocal(c));this.parent.scale.x+=a.x;this.parent.scale.y+=a.y;this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});if(a=this.parent.plugins["clamp-zoom"])a.clamp(),this.smoothing=null;this.center?this.parent.moveCenter(this.center):(d=this.parent.toGlobal(d),this.parent.x+=c.x-d.x,this.parent.y+=c.y-d.y);this.smoothingCount++;this.smoothingCount>=this.smooth&&
(this.smoothing=null)}}},{key:"wheel",value:function(c){if(!this.paused){var a=this.parent.getPointerPosition(c),d=1+this.percent*(this.reverse?0<c.deltaY?1:-1:0>c.deltaY?1:-1);if(this.smooth)this.smoothing={x:((this.parent.scale.x+(this.smoothing?this.smoothing.x*(this.smooth-this.smoothingCount):0))*d-this.parent.scale.x)/this.smooth,y:((this.parent.scale.y+(this.smoothing?this.smoothing.y*(this.smooth-this.smoothingCount):0))*d-this.parent.scale.y)/this.smooth},this.smoothingCount=0,this.smoothingCenter=
a;else{var f=void 0;this.center||(f=this.parent.toLocal(a));this.parent.scale.x*=d;this.parent.scale.y*=d;this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});if(d=this.parent.plugins["clamp-zoom"])d.clamp(),this.smoothing=null;this.center?this.parent.moveCenter(this.center):(f=this.parent.toGlobal(f),this.parent.x+=a.x-f.x,this.parent.y+=a.y-f.y)}this.parent.emit("moved",{viewport:this.parent,type:"wheel"});this.parent.emit("wheel",{wheel:{dx:c.deltaX,dy:c.deltaY,dz:c.deltaZ},event:c,viewport:this.parent});
this.parent.passiveWheel||c.preventDefault()}}}]);return f}(b)},{"./plugin":42}],48:[function(b,k,g){g.__esModule=!0;var h=function(d){if(d&&d.__esModule)return d;var f={};if(null!=d)for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(f[c]=d[c]);f.default=d;return f}(b("../core")),m=(k=b("ismobilejs"))&&k.__esModule?k:{default:k};b=b("./accessibleTarget");h.utils.mixins.delayMixin(h.DisplayObject.prototype,(b&&b.__esModule?b:{default:b}).default);b=function(){function d(f){if(!(this instanceof
d))throw new TypeError("Cannot call a class as a function");!m.default.tablet&&!m.default.phone||navigator.isCocoonJS||this.createTouchHook();var c=document.createElement("div");c.style.width="100px";c.style.height="100px";c.style.position="absolute";c.style.top="0px";c.style.left="0px";c.style.zIndex=2;this.div=c;this.pool=[];this.renderId=0;this.debug=!1;this.renderer=f;this.children=[];this._onKeyDown=this._onKeyDown.bind(this);this._onMouseMove=this._onMouseMove.bind(this);this.isMobileAccessabillity=
this.isActive=!1;window.addEventListener("keydown",this._onKeyDown,!1)}d.prototype.createTouchHook=function(){var d=this,c=document.createElement("button");c.style.width="1px";c.style.height="1px";c.style.position="absolute";c.style.top="-1000px";c.style.left="-1000px";c.style.zIndex=2;c.style.backgroundColor="#FF0000";c.title="HOOK DIV";c.addEventListener("focus",function(){d.isMobileAccessabillity=!0;d.activate();document.body.removeChild(c)});document.body.appendChild(c)};d.prototype.activate=
function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))};d.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",
this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))};d.prototype.updateAccessibleObjects=function(d){if(d.visible){d.accessible&&d.interactive&&(d._accessibleActive||this.addChild(d),d.renderId=this.renderId);d=d.children;for(var c=0;c<d.length;c++)this.updateAccessibleObjects(d[c])}};d.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var d=this.renderer.view.getBoundingClientRect(),
c=d.width/this.renderer.width,a=d.height/this.renderer.height,e=this.div;e.style.left=d.left+"px";e.style.top=d.top+"px";e.style.width=this.renderer.width+"px";e.style.height=this.renderer.height+"px";for(d=0;d<this.children.length;d++){var b=this.children[d];if(b.renderId!==this.renderId)b._accessibleActive=!1,h.utils.removeItems(this.children,d,1),this.div.removeChild(b._accessibleDiv),this.pool.push(b._accessibleDiv),b._accessibleDiv=null,d--,0===this.children.length&&this.deactivate();else{e=
b._accessibleDiv;var q=b.hitArea,n=b.worldTransform;b.hitArea?(e.style.left=(n.tx+q.x*n.a)*c+"px",e.style.top=(n.ty+q.y*n.d)*a+"px",e.style.width=q.width*n.a*c+"px",e.style.height=q.height*n.d*a+"px"):(q=b.getBounds(),this.capHitArea(q),e.style.left=q.x*c+"px",e.style.top=q.y*a+"px",e.style.width=q.width*c+"px",e.style.height=q.height*a+"px",e.title!==b.accessibleTitle&&null!==b.accessibleTitle&&(e.title=b.accessibleTitle),e.getAttribute("aria-label")!==b.accessibleHint&&null!==b.accessibleHint&&
e.setAttribute("aria-label",b.accessibleHint))}}this.renderId++}};d.prototype.capHitArea=function(d){0>d.x&&(d.width+=d.x,d.x=0);0>d.y&&(d.height+=d.y,d.y=0);d.x+d.width>this.renderer.width&&(d.width=this.renderer.width-d.x);d.y+d.height>this.renderer.height&&(d.height=this.renderer.height-d.y)};d.prototype.addChild=function(d){var c=this.pool.pop();c||(c=document.createElement("button"),c.style.width="100px",c.style.height="100px",c.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",
c.style.position="absolute",c.style.zIndex=2,c.style.borderStyle="none",-1<navigator.userAgent.toLowerCase().indexOf("chrome")?c.setAttribute("aria-live","off"):c.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?c.setAttribute("aria-relevant","additions"):c.setAttribute("aria-relevant","text"),c.addEventListener("click",this._onClick.bind(this)),c.addEventListener("focus",this._onFocus.bind(this)),c.addEventListener("focusout",this._onFocusOut.bind(this)));d.accessibleTitle&&
null!==d.accessibleTitle?c.title=d.accessibleTitle:d.accessibleHint&&null!==d.accessibleHint||(c.title="displayObject "+d.tabIndex);d.accessibleHint&&null!==d.accessibleHint&&c.setAttribute("aria-label",d.accessibleHint);d._accessibleActive=!0;d._accessibleDiv=c;c.displayObject=d;this.children.push(d);this.div.appendChild(d._accessibleDiv);d._accessibleDiv.tabIndex=d.tabIndex};d.prototype._onClick=function(d){var c=this.renderer.plugins.interaction;c.dispatchEvent(d.target.displayObject,"click",c.eventData)};
d.prototype._onFocus=function(d){d.target.getAttribute("aria-live","off")||d.target.setAttribute("aria-live","assertive");var c=this.renderer.plugins.interaction;c.dispatchEvent(d.target.displayObject,"mouseover",c.eventData)};d.prototype._onFocusOut=function(d){d.target.getAttribute("aria-live","off")||d.target.setAttribute("aria-live","polite");var c=this.renderer.plugins.interaction;c.dispatchEvent(d.target.displayObject,"mouseout",c.eventData)};d.prototype._onKeyDown=function(d){9===d.keyCode&&
this.activate()};d.prototype._onMouseMove=function(d){0===d.movementX&&0===d.movementY||this.deactivate()};d.prototype.destroy=function(){this.div=null;for(var d=0;d<this.children.length;d++)this.children[d].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0);window.removeEventListener("keydown",this._onKeyDown);this.renderer=this.children=this.pool=null};return d}();g.default=b;h.WebGLRenderer.registerPlugin("accessibility",b);h.CanvasRenderer.registerPlugin("accessibility",
b)},{"../core":73,"./accessibleTarget":49,ismobilejs:11}],49:[function(b,k,g){g.__esModule=!0;g.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],50:[function(b,k,g){g.__esModule=!0;var h=b("./accessibleTarget");Object.defineProperty(g,"accessibleTarget",{enumerable:!0,get:function(){return(h&&h.__esModule?h:{default:h}).default}});var m=b("./AccessibilityManager");Object.defineProperty(g,"AccessibilityManager",{enumerable:!0,get:function(){return(m&&
m.__esModule?m:{default:m}).default}})},{"./AccessibilityManager":48,"./accessibleTarget":49}],51:[function(b,k,g){g.__esModule=!0;var h=function(){function a(a,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(c,d,e){d&&a(c.prototype,d);e&&a(c,e);return c}}(),m=b("./autoDetectRenderer"),d=(k=b("./display/Container"))&&k.__esModule?k:{default:k},f=b("./ticker"),c=(k=b("./settings"))&&
k.__esModule?k:{default:k},a=b("./const");b=function(){function e(a,b,n,p,h){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");"number"===typeof a&&(a=Object.assign({width:a,height:b||c.default.RENDER_OPTIONS.height,forceCanvas:!!p,sharedTicker:!!h},n));this._options=a=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},a);this.renderer=(0,m.autoDetectRenderer)(a);this.stage=new d.default;this._ticker=null;this.ticker=a.sharedTicker?f.shared:
new f.Ticker;a.autoStart&&this.start()}e.prototype.render=function(){this.renderer.render(this.stage)};e.prototype.stop=function(){this._ticker.stop()};e.prototype.start=function(){this._ticker.start()};e.prototype.destroy=function(a,c){if(this._ticker){var d=this._ticker;this.ticker=null;d.destroy()}this.stage.destroy(c);this.stage=null;this.renderer.destroy(a);this._options=this.renderer=null};h(e,[{key:"ticker",set:function(c){this._ticker&&this._ticker.remove(this.render,this);(this._ticker=c)&&
c.add(this.render,this,a.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]);return e}();g.default=b},{"./autoDetectRenderer":53,"./const":54,"./display/Container":56,"./settings":109,"./ticker":129}],52:[function(b,k,g){function h(d,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&
c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}function m(d,c){if(d instanceof Array)"precision"!==d[0].substring(0,9)&&(d=d.slice(0),d.unshift("precision "+c+" float;"));else if("precision"!==d.trim().substring(0,9))return"precision "+c+" float;\n"+d;return d}g.__esModule=!0;k=b("pixi-gl-core");var d=(b=b("./settings"))&&b.__esModule?b:{default:b};b=function(f){function c(a,e,b,q,n){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");a=f.call(this,a,m(e,n||d.default.PRECISION_VERTEX),m(b,n||d.default.PRECISION_FRAGMENT),void 0,q);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}h(c,f);return c}(k.GLShader);g.default=b},{"./settings":109,"pixi-gl-core":22}],53:[function(b,k,g){g.__esModule=!0;g.autoDetectRenderer=function(f,c,a,e){var b=f&&f.forceCanvas;void 0!==e&&
(b=e);return!b&&h.isWebGLSupported()?new d.default(f,c,a):new m.default(f,c,a)};var h=function(d){if(d&&d.__esModule)return d;var c={};if(null!=d)for(var a in d)Object.prototype.hasOwnProperty.call(d,a)&&(c[a]=d[a]);c.default=d;return c}(b("./utils")),m=(k=b("./renderers/canvas/CanvasRenderer"))&&k.__esModule?k:{default:k},d=(b=b("./renderers/webgl/WebGLRenderer"))&&b.__esModule?b:{default:b}},{"./renderers/canvas/CanvasRenderer":85,"./renderers/webgl/WebGLRenderer":92,"./utils":133}],54:[function(b,
k,g){g.__esModule=!0;g.VERSION="4.8.2";g.PI_2=2*Math.PI;g.RAD_TO_DEG=180/Math.PI;g.DEG_TO_RAD=Math.PI/180;g.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2};g.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19};g.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};g.SCALE_MODES=
{LINEAR:0,NEAREST:1};g.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2};g.GC_MODES={AUTO:0,MANUAL:1};g.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i;g.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;g.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;g.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4};g.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"};g.TRANSFORM_MODE={STATIC:0,
DYNAMIC:1};g.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1};g.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],55:[function(b,k,g){g.__esModule=!0;var h=b("../math");b=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity;this.rect=null}b.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY};b.prototype.clear=function(){this.updateID++;
this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};b.prototype.getRectangle=function(d){if(this.minX>this.maxX||this.minY>this.maxY)return h.Rectangle.EMPTY;d=d||new h.Rectangle(0,0,1,1);d.x=this.minX;d.y=this.minY;d.width=this.maxX-this.minX;d.height=this.maxY-this.minY;return d};b.prototype.addPoint=function(d){this.minX=Math.min(this.minX,d.x);this.maxX=Math.max(this.maxX,d.x);this.minY=Math.min(this.minY,d.y);this.maxY=Math.max(this.maxY,d.y)};b.prototype.addQuad=function(d){var f=this.minX,
c=this.minY,a=this.maxX,e=this.maxY,b=d[0],q=d[1];f=b<f?b:f;c=q<c?q:c;a=b>a?b:a;e=q>e?q:e;b=d[2];q=d[3];f=b<f?b:f;c=q<c?q:c;a=b>a?b:a;e=q>e?q:e;b=d[4];q=d[5];f=b<f?b:f;c=q<c?q:c;a=b>a?b:a;e=q>e?q:e;b=d[6];q=d[7];this.minX=b<f?b:f;this.minY=q<c?q:c;this.maxX=b>a?b:a;this.maxY=q>e?q:e};b.prototype.addFrame=function(d,f,c,a,e){var b=d.worldTransform;d=b.a;var q=b.b,n=b.c,p=b.d,h=b.tx;b=b.ty;var m=this.minX,g=this.minY,w=this.maxX,k=this.maxY,u=d*f+n*c+h,z=q*f+p*c+b;m=u<m?u:m;g=z<g?z:g;w=u>w?u:w;k=z>
k?z:k;u=d*a+n*c+h;z=q*a+p*c+b;m=u<m?u:m;g=z<g?z:g;w=u>w?u:w;k=z>k?z:k;u=d*f+n*e+h;z=q*f+p*e+b;m=u<m?u:m;g=z<g?z:g;w=u>w?u:w;k=z>k?z:k;u=d*a+n*e+h;z=q*a+p*e+b;this.minX=u<m?u:m;this.minY=z<g?z:g;this.maxX=u>w?u:w;this.maxY=z>k?z:k};b.prototype.addVertices=function(d,f,c,a){var e=d.worldTransform;d=e.a;var b=e.b,q=e.c,n=e.d,p=e.tx;e=e.ty;for(var h=this.minX,m=this.minY,g=this.maxX,w=this.maxY;c<a;c+=2){var k=f[c],u=f[c+1],z=d*k+q*u+p;k=n*u+b*k+e;h=z<h?z:h;m=k<m?k:m;g=z>g?z:g;w=k>w?k:w}this.minX=h;this.minY=
m;this.maxX=g;this.maxY=w};b.prototype.addBounds=function(d){var f=this.minX,c=this.minY,a=this.maxX,e=this.maxY;this.minX=d.minX<f?d.minX:f;this.minY=d.minY<c?d.minY:c;this.maxX=d.maxX>a?d.maxX:a;this.maxY=d.maxY>e?d.maxY:e};b.prototype.addBoundsMask=function(d,f){var c=d.minX>f.minX?d.minX:f.minX,a=d.minY>f.minY?d.minY:f.minY,e=d.maxX<f.maxX?d.maxX:f.maxX;d=d.maxY<f.maxY?d.maxY:f.maxY;if(c<=e&&a<=d){f=this.minX;var b=this.minY,q=this.maxX,n=this.maxY;this.minX=c<f?c:f;this.minY=a<b?a:b;this.maxX=
e>q?e:q;this.maxY=d>n?d:n}};b.prototype.addBoundsArea=function(d,b){var c=d.minX>b.x?d.minX:b.x,a=d.minY>b.y?d.minY:b.y,e=d.maxX<b.x+b.width?d.maxX:b.x+b.width;d=d.maxY<b.y+b.height?d.maxY:b.y+b.height;if(c<=e&&a<=d){b=this.minX;var f=this.minY,q=this.maxX,n=this.maxY;this.minX=c<b?c:b;this.minY=a<f?a:f;this.maxX=e>q?e:q;this.maxY=d>n?d:n}};return b}();g.default=b},{"../math":78}],56:[function(b,k,g){function h(d,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+
typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}g.__esModule=!0;var m=function(){function d(c,a){for(var d=0;d<a.length;d++){var b=a[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(c,b.key,b)}}return function(c,a,e){a&&d(c.prototype,a);e&&d(c,e);return c}}(),d=b("../utils");b=b("./DisplayObject");b=function(b){function c(){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");var a=b.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.children=[];return a}h(c,b);c.prototype.onChildrenChange=function(){};c.prototype.addChild=function(a){var c=arguments.length;if(1<c)for(var d=0;d<c;d++)this.addChild(arguments[d]);else a.parent&&a.parent.removeChild(a),a.parent=this,a.transform._parentID=-1,this.children.push(a),
this._boundsID++,this.onChildrenChange(this.children.length-1),a.emit("added",this);return a};c.prototype.addChildAt=function(a,c){if(0>c||c>this.children.length)throw Error(a+"addChildAt: The index "+c+" supplied is out of bounds "+this.children.length);a.parent&&a.parent.removeChild(a);a.parent=this;a.transform._parentID=-1;this.children.splice(c,0,a);this._boundsID++;this.onChildrenChange(c);a.emit("added",this);return a};c.prototype.swapChildren=function(a,c){if(a!==c){var d=this.getChildIndex(a),
e=this.getChildIndex(c);this.children[d]=c;this.children[e]=a;this.onChildrenChange(d<e?d:e)}};c.prototype.getChildIndex=function(a){a=this.children.indexOf(a);if(-1===a)throw Error("The supplied DisplayObject must be a child of the caller");return a};c.prototype.setChildIndex=function(a,c){if(0>c||c>=this.children.length)throw Error("The index "+c+" supplied is out of bounds "+this.children.length);var e=this.getChildIndex(a);(0,d.removeItems)(this.children,e,1);this.children.splice(c,0,a);this.onChildrenChange(c)};
c.prototype.getChildAt=function(a){if(0>a||a>=this.children.length)throw Error("getChildAt: Index ("+a+") does not exist.");return this.children[a]};c.prototype.removeChild=function(a){var c=arguments.length;if(1<c)for(var b=0;b<c;b++)this.removeChild(arguments[b]);else{c=this.children.indexOf(a);if(-1===c)return null;a.parent=null;a.transform._parentID=-1;(0,d.removeItems)(this.children,c,1);this._boundsID++;this.onChildrenChange(c);a.emit("removed",this)}return a};c.prototype.removeChildAt=function(a){var c=
this.getChildAt(a);c.parent=null;c.transform._parentID=-1;(0,d.removeItems)(this.children,a,1);this._boundsID++;this.onChildrenChange(a);c.emit("removed",this);return c};c.prototype.removeChildren=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=arguments[1];c="number"===typeof c?c:this.children.length;var d=c-a;if(0<d&&d<=c){c=this.children.splice(a,d);for(d=0;d<c.length;++d)c[d].parent=null,c[d].transform&&(c[d].transform._parentID=-1);this._boundsID++;this.onChildrenChange(a);
for(a=0;a<c.length;++a)c[a].emit("removed",this);return c}if(0===d&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.");};c.prototype.updateTransform=function(){this._boundsID++;this.transform.updateTransform(this.parent.transform);this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var a=0,c=this.children.length;a<c;++a){var d=this.children[a];d.visible&&d.updateTransform()}};c.prototype.calculateBounds=function(){this._bounds.clear();
this._calculateBounds();for(var a=0;a<this.children.length;a++){var c=this.children[a];c.visible&&c.renderable&&(c.calculateBounds(),c._mask?(c._mask.calculateBounds(),this._bounds.addBoundsMask(c._bounds,c._mask._bounds)):c.filterArea?this._bounds.addBoundsArea(c._bounds,c.filterArea):this._bounds.addBounds(c._bounds))}this._lastBoundsID=this._boundsID};c.prototype._calculateBounds=function(){};c.prototype.renderWebGL=function(a){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable)if(this._mask||
this._filters)this.renderAdvancedWebGL(a);else{this._renderWebGL(a);for(var c=0,d=this.children.length;c<d;++c)this.children[c].renderWebGL(a)}};c.prototype.renderAdvancedWebGL=function(a){a.flush();var c=this._filters,d=this._mask;if(c){this._enabledFilters||(this._enabledFilters=[]);for(var b=this._enabledFilters.length=0;b<c.length;b++)c[b].enabled&&this._enabledFilters.push(c[b]);this._enabledFilters.length&&a.filterManager.pushFilter(this,this._enabledFilters)}d&&a.maskManager.pushMask(this,
this._mask);this._renderWebGL(a);b=0;for(var f=this.children.length;b<f;b++)this.children[b].renderWebGL(a);a.flush();d&&a.maskManager.popMask(this,this._mask);c&&this._enabledFilters&&this._enabledFilters.length&&a.filterManager.popFilter()};c.prototype._renderWebGL=function(a){};c.prototype._renderCanvas=function(a){};c.prototype.renderCanvas=function(a){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable){this._mask&&a.maskManager.pushMask(this._mask);this._renderCanvas(a);for(var c=0,d=this.children.length;c<
d;++c)this.children[c].renderCanvas(a);this._mask&&a.maskManager.popMask(a)}};c.prototype.destroy=function(a){b.prototype.destroy.call(this);var c="boolean"===typeof a?a:a&&a.children,d=this.removeChildren(0,this.children.length);if(c)for(c=0;c<d.length;++c)d[c].destroy(a)};m(c,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){var c=this.getLocalBounds().width;this.scale.x=0!==c?a/c:1;this._width=a}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},
set:function(a){var c=this.getLocalBounds().height;this.scale.y=0!==c?a/c:1;this._height=a}}]);return c}((b&&b.__esModule?b:{default:b}).default);g.default=b;b.prototype.containerUpdateTransform=b.prototype.updateTransform},{"../utils":133,"./DisplayObject":57}],57:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&
c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;var d=function(){function a(a,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(c,d,e){d&&a(c.prototype,d);e&&a(c,e);return c}}();k=b("eventemitter3");k=h(k);var f=b("../const"),c=b("../settings"),a=h(c);c=b("./TransformStatic");
var e=h(c);c=b("./Transform");var l=h(c);c=b("./Bounds");var q=h(c),n=b("../math");b=function(c){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var d=c.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;var n=a.default.TRANSFORM_MODE===f.TRANSFORM_MODE.STATIC?e.default:l.default;d.tempDisplayObjectParent=null;d.transform=new n;d.alpha=1;d.visible=
!0;d.renderable=!0;d.parent=null;d.worldAlpha=1;d.filterArea=null;d._filters=null;d._enabledFilters=null;d._bounds=new q.default;d._boundsID=0;d._lastBoundsID=-1;d._boundsRect=null;d._localBoundsRect=null;d._mask=null;d._destroyed=!1;return d}m(b,c);b.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform);this.worldAlpha=this.alpha*this.parent.worldAlpha;this._bounds.updateID++};b.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),
this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)};b.prototype.getBounds=function(a,c){a||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null));this._boundsID!==this._lastBoundsID&&this.calculateBounds();c||(this._boundsRect||(this._boundsRect=new n.Rectangle),c=this._boundsRect);return this._bounds.getRectangle(c)};
b.prototype.getLocalBounds=function(a){var c=this.transform,d=this.parent;this.parent=null;this.transform=this._tempDisplayObjectParent.transform;a||(this._localBoundsRect||(this._localBoundsRect=new n.Rectangle),a=this._localBoundsRect);a=this.getBounds(!1,a);this.parent=d;this.transform=c;return a};b.prototype.toGlobal=function(a,c){2<arguments.length&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,
this.displayObjectUpdateTransform(),this.parent=null));return this.worldTransform.apply(a,c)};b.prototype.toLocal=function(a,c,d,e){c&&(a=c.toGlobal(a,d,e));e||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null));return this.worldTransform.applyInverse(a,d)};b.prototype.renderWebGL=function(a){};b.prototype.renderCanvas=function(a){};b.prototype.setParent=function(a){if(!a||
!a.addChild)throw Error("setParent: Argument must be a Container");a.addChild(this);return a};b.prototype.setTransform=function(){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,b=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,f=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,l=7<arguments.length&&
void 0!==arguments[7]?arguments[7]:0,n=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;this.position.x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.position.y=a;this.scale.x=c?c:1;this.scale.y=d?d:1;this.rotation=e;this.skew.x=b;this.skew.y=f;this.pivot.x=l;this.pivot.y=n;return this};b.prototype.destroy=function(){this.removeAllListeners();this.parent&&this.parent.removeChild(this);this.filterArea=this._mask=this._currentBounds=this._bounds=this.parent=this.transform=null;
this.interactiveChildren=this.interactive=!1;this._destroyed=!0};d(b,[{key:"_tempDisplayObjectParent",get:function(){null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new b);return this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(a){this.transform.position.x=a}},{key:"y",get:function(){return this.position.y},set:function(a){this.transform.position.y=a}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",
get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(a){this.transform.position.copy(a)}},{key:"scale",get:function(){return this.transform.scale},set:function(a){this.transform.scale.copy(a)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(a){this.transform.pivot.copy(a)}},{key:"skew",get:function(){return this.transform.skew},set:function(a){this.transform.skew.copy(a)}},{key:"rotation",get:function(){return this.transform.rotation},
set:function(a){this.transform.rotation=a}},{key:"worldVisible",get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0}},{key:"mask",get:function(){return this._mask},set:function(a){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1);if(this._mask=a)this._mask.renderable=!1,this._mask.isMask=!0}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(a){this._filters=a&&a.slice()}}]);return b}(k.default);g.default=b;b.prototype.displayObjectUpdateTransform=
b.prototype.updateTransform},{"../const":54,"../math":78,"../settings":109,"./Bounds":55,"./Transform":58,"./TransformStatic":60,eventemitter3:198}],58:[function(b,k,g){function h(d,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}g.__esModule=!0;
var m=function(){function d(c,a){for(var d=0;d<a.length;d++){var b=a[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(c,b.key,b)}}return function(c,a,e){a&&d(c.prototype,a);e&&d(c,e);return c}}(),d=b("../math");b=b("./TransformBase");b=function(b){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var a=b.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.position=new d.Point(0,0);a.scale=new d.Point(1,1);a.skew=new d.ObservablePoint(a.updateSkew,a,0,0);a.pivot=new d.Point(0,0);a._rotation=0;a._cx=1;a._sx=0;a._cy=0;a._sy=1;return a}h(c,b);c.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y);this._sx=Math.sin(this._rotation+this.skew._y);this._cy=-Math.sin(this._rotation-this.skew._x);this._sy=Math.cos(this._rotation-this.skew._x)};c.prototype.updateLocalTransform=
function(){var a=this.localTransform;a.a=this._cx*this.scale.x;a.b=this._sx*this.scale.x;a.c=this._cy*this.scale.y;a.d=this._sy*this.scale.y;a.tx=this.position.x-(this.pivot.x*a.a+this.pivot.y*a.c);a.ty=this.position.y-(this.pivot.x*a.b+this.pivot.y*a.d)};c.prototype.updateTransform=function(a){var c=this.localTransform;c.a=this._cx*this.scale.x;c.b=this._sx*this.scale.x;c.c=this._cy*this.scale.y;c.d=this._sy*this.scale.y;c.tx=this.position.x-(this.pivot.x*c.a+this.pivot.y*c.c);c.ty=this.position.y-
(this.pivot.x*c.b+this.pivot.y*c.d);a=a.worldTransform;var d=this.worldTransform;d.a=c.a*a.a+c.b*a.c;d.b=c.a*a.b+c.b*a.d;d.c=c.c*a.a+c.d*a.c;d.d=c.c*a.b+c.d*a.d;d.tx=c.tx*a.a+c.ty*a.c+a.tx;d.ty=c.tx*a.b+c.ty*a.d+a.ty;this._worldID++};c.prototype.setFromMatrix=function(a){a.decompose(this)};m(c,[{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a;this.updateSkew()}}]);return c}((b&&b.__esModule?b:{default:b}).default);g.default=b},{"../math":78,"./TransformBase":59}],
59:[function(b,k,g){g.__esModule=!0;var h=b("../math");b=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.worldTransform=new h.Matrix;this.localTransform=new h.Matrix;this._parentID=this._worldID=0}b.prototype.updateLocalTransform=function(){};b.prototype.updateTransform=function(d){d=d.worldTransform;var b=this.worldTransform,c=this.localTransform;b.a=c.a*d.a+c.b*d.c;b.b=c.a*d.b+c.b*d.d;b.c=c.c*d.a+c.d*d.c;b.d=c.c*d.b+c.d*d.d;b.tx=c.tx*
d.a+c.ty*d.c+d.tx;b.ty=c.tx*d.b+c.ty*d.d+d.ty;this._worldID++};return b}();g.default=b;b.prototype.updateWorldTransform=b.prototype.updateTransform;b.IDENTITY=new b},{"../math":78}],60:[function(b,k,g){function h(d,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):
d.__proto__=c)}g.__esModule=!0;var m=function(){function d(c,a){for(var d=0;d<a.length;d++){var b=a[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(c,b.key,b)}}return function(c,a,e){a&&d(c.prototype,a);e&&d(c,e);return c}}(),d=b("../math");b=b("./TransformBase");b=function(b){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var a=b.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.position=new d.ObservablePoint(a.onChange,a,0,0);a.scale=new d.ObservablePoint(a.onChange,a,1,1);a.pivot=new d.ObservablePoint(a.onChange,a,0,0);a.skew=new d.ObservablePoint(a.updateSkew,a,0,0);a._rotation=0;a._cx=1;a._sx=0;a._cy=0;a._sy=1;a._localID=0;a._currentLocalID=0;return a}h(c,b);c.prototype.onChange=function(){this._localID++};c.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y);this._sx=Math.sin(this._rotation+
this.skew._y);this._cy=-Math.sin(this._rotation-this.skew._x);this._sy=Math.cos(this._rotation-this.skew._x);this._localID++};c.prototype.updateLocalTransform=function(){var a=this.localTransform;this._localID!==this._currentLocalID&&(a.a=this._cx*this.scale._x,a.b=this._sx*this.scale._x,a.c=this._cy*this.scale._y,a.d=this._sy*this.scale._y,a.tx=this.position._x-(this.pivot._x*a.a+this.pivot._y*a.c),a.ty=this.position._y-(this.pivot._x*a.b+this.pivot._y*a.d),this._currentLocalID=this._localID,this._parentID=
-1)};c.prototype.updateTransform=function(a){var c=this.localTransform;this._localID!==this._currentLocalID&&(c.a=this._cx*this.scale._x,c.b=this._sx*this.scale._x,c.c=this._cy*this.scale._y,c.d=this._sy*this.scale._y,c.tx=this.position._x-(this.pivot._x*c.a+this.pivot._y*c.c),c.ty=this.position._y-(this.pivot._x*c.b+this.pivot._y*c.d),this._currentLocalID=this._localID,this._parentID=-1);if(this._parentID!==a._worldID){var d=a.worldTransform,b=this.worldTransform;b.a=c.a*d.a+c.b*d.c;b.b=c.a*d.b+
c.b*d.d;b.c=c.c*d.a+c.d*d.c;b.d=c.c*d.b+c.d*d.d;b.tx=c.tx*d.a+c.ty*d.c+d.tx;b.ty=c.tx*d.b+c.ty*d.d+d.ty;this._parentID=a._worldID;this._worldID++}};c.prototype.setFromMatrix=function(a){a.decompose(this);this._localID++};m(c,[{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a;this.updateSkew()}}]);return c}((b&&b.__esModule?b:{default:b}).default);g.default=b},{"../math":78,"./TransformBase":59}],61:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}
function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;k=b("../display/Container");k=h(k);var d=b("../textures/RenderTexture"),f=h(d);d=b("../textures/Texture");var c=h(d);d=b("./GraphicsData");var a=h(d);d=b("../sprites/Sprite");
var e=h(d),l=b("../math"),q=b("../utils"),n=b("../const");d=b("../display/Bounds");var p=h(d);d=b("./utils/bezierCurveTo");var x=h(d);b=b("../renderers/canvas/CanvasRenderer");var t=h(b),v=void 0,w=new l.Matrix,A=new l.Point,u=new Float32Array(4),z=new Float32Array(4);b=function(d){function b(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var c=d.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.fillAlpha=1;c.lineWidth=0;c.nativeLines=a;c.lineColor=0;c.lineAlignment=.5;c.graphicsData=[];c.tint=16777215;c._prevTint=16777215;c.blendMode=n.BLEND_MODES.NORMAL;c.currentPath=null;c._webGL={};c.isMask=!1;c.boundsPadding=0;c._localBounds=new p.default;c.dirty=0;c.fastRectDirty=-1;c.clearDirty=0;c.boundsDirty=-1;c.cachedSpriteDirty=!1;c._spriteRect=null;c._fastRect=!1;c._prevRectTint=null;c._prevRectFillColor=null;return c}m(b,d);b.prototype.clone=
function(){var a=new b;a.renderable=this.renderable;a.fillAlpha=this.fillAlpha;a.lineWidth=this.lineWidth;a.lineColor=this.lineColor;a.lineAlignment=this.lineAlignment;a.tint=this.tint;a.blendMode=this.blendMode;a.isMask=this.isMask;a.boundsPadding=this.boundsPadding;a.dirty=0;a.cachedSpriteDirty=this.cachedSpriteDirty;for(var c=0;c<this.graphicsData.length;++c)a.graphicsData.push(this.graphicsData[c].clone());a.currentPath=a.graphicsData[a.graphicsData.length-1];a.updateLocalBounds();return a};b.prototype._quadraticCurveLength=
function(a,c,d,e,b,f){b=a-(2*d+b);f=c-(2*e+f);a*=2*(d-2);e=2*(e-2)*c;c=4*(b*b+f*f);b=4*(b*a+f*e);e=a*a+e*e;f=2*Math.sqrt(c+b+e);a=Math.sqrt(c);d=2*c*a;var l=2*Math.sqrt(e),n=b/a;return(d*f+a*b*(f-l)+(4*e*c-b*b)*Math.log((2*a+n+f)/(n+l)))/(4*d)};b.prototype._bezierCurveLength=function(a,c,d,e,b,f,l,n){for(var p=0,q,h,m,x,g,t,v,w=a,k=c,A=1;10>=A;++A)q=A/10,h=q*q,m=h*q,x=1-q,g=x*x,t=g*x,v=t*a+3*g*q*d+3*x*h*b+m*l,q=t*c+3*g*q*e+3*x*h*f+m*n,h=w-v,m=k-q,w=v,k=q,p+=Math.sqrt(h*h+m*m);return p};b.prototype._segmentsCount=
function(a){a=Math.ceil(a/b.CURVES.maxLength);a<b.CURVES.minSegments?a=b.CURVES.minSegments:a>b.CURVES.maxSegments&&(a=b.CURVES.maxSegments);return a};b.prototype.lineStyle=function(){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.5;this.lineWidth=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.lineColor=a;this.lineAlpha=c;this.lineAlignment=d;this.currentPath&&
(this.currentPath.shape.points.length?(a=new l.Polygon(this.currentPath.shape.points.slice(-2)),a.closed=!1,this.drawShape(a)):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment));return this};b.prototype.moveTo=function(a,c){a=new l.Polygon([a,c]);a.closed=!1;this.drawShape(a);return this};b.prototype.lineTo=function(a,c){var d=this.currentPath.shape.points,e=d[d.length-1];
if(d[d.length-2]!==a||e!==c)d.push(a,c),this.dirty++;return this};b.prototype.quadraticCurveTo=function(a,c,d,e){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var f=this.currentPath.shape.points;0===f.length&&this.moveTo(0,0);for(var l=f[f.length-2],n=f[f.length-1],p=b.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(l,n,a,c,d,e)):20,q=1;q<=p;++q){var h=q/p;var m=l+(a-l)*h;var x=n+(c-n)*h;f.push(m+(a+(d-a)*h-m)*h,x+
(c+(e-c)*h-x)*h)}this.dirty++;return this};b.prototype.bezierCurveTo=function(a,c,d,e,f,l){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var n=this.currentPath.shape.points,p=n[n.length-2],q=n[n.length-1];n.length-=2;var h=b.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(p,q,a,c,d,e,f,l)):20;(0,x.default)(p,q,a,c,d,e,f,l,h,n);this.dirty++;return this};b.prototype.arcTo=function(a,c,d,e,b){this.currentPath?0===this.currentPath.shape.points.length&&
this.currentPath.shape.points.push(a,c):this.moveTo(a,c);var f=this.currentPath.shape.points,l=f[f.length-1]-c,n=f[f.length-2]-a;e-=c;d-=a;var p=Math.abs(l*d-n*e);if(1E-8>p||0===b)f[f.length-2]===a&&f[f.length-1]===c||f.push(a,c);else{var q=l*l+n*n,h=e*e+d*d,m=l*e+n*d;f=b*Math.sqrt(q)/p;p=b*Math.sqrt(h)/p;q=f*m/q;h=p*m/h;m=f*d+p*n;var x=f*e+p*l;this.arc(m+a,x+c,b,Math.atan2(l*(p+q)-x,n*(p+q)-m),Math.atan2(e*(f+h)-x,d*(f+h)-m),n*e>d*l)}this.dirty++;return this};b.prototype.arc=function(a,c,d,e,f){var l=
5<arguments.length&&void 0!==arguments[5]?arguments[5]:!1;if(e===f)return this;!l&&f<=e?f+=n.PI_2:l&&e<=f&&(e+=n.PI_2);var p=f-e,q=b.CURVES.adaptive?this._segmentsCount(Math.abs(p)*d):40*Math.ceil(Math.abs(p)/n.PI_2);if(0===p)return this;var h=a+Math.cos(e)*d,m=c+Math.sin(e)*d;if(l=this.currentPath?this.currentPath.shape.points:null){var x=Math.abs(l[l.length-1]-m);.001>Math.abs(l[l.length-2]-h)&&.001>x||l.push(h,m)}else this.moveTo(h,m),l=this.currentPath.shape.points;p/=2*q;h=2*p;m=Math.cos(p);
x=Math.sin(p);--q;for(var g=q%1/q,t=0;t<=q;++t){var v=p+e+h*(t+g*t),w=Math.cos(v);v=-Math.sin(v);l.push((m*w+x*v)*d+a,(m*-v+x*w)*d+c)}this.dirty++;return this};b.prototype.beginFill=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.filling=!0;this.fillColor=a;this.fillAlpha=c;this.currentPath&&2>=this.currentPath.shape.points.length&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,
this.currentPath.fillAlpha=this.fillAlpha);return this};b.prototype.endFill=function(){this.filling=!1;this.fillColor=null;this.fillAlpha=1;return this};b.prototype.drawRect=function(a,c,d,e){this.drawShape(new l.Rectangle(a,c,d,e));return this};b.prototype.drawRoundedRect=function(a,c,d,e,b){this.drawShape(new l.RoundedRectangle(a,c,d,e,b));return this};b.prototype.drawCircle=function(a,c,d){this.drawShape(new l.Circle(a,c,d));return this};b.prototype.drawEllipse=function(a,c,d,e){this.drawShape(new l.Ellipse(a,
c,d,e));return this};b.prototype.drawPolygon=function(a){var c=a,d=!0;c instanceof l.Polygon&&(d=c.closed,c=c.points);if(!Array.isArray(c)){c=Array(arguments.length);for(var e=0;e<c.length;++e)c[e]=arguments[e]}c=new l.Polygon(c);c.closed=d;this.drawShape(c);return this};b.prototype.drawStar=function(a,c,d,e,b){var f=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;b=b||e/2;f=-1*Math.PI/2+f;for(var l=2*d,p=n.PI_2/l,q=[],h=0;h<l;h++){var m=h%2?b:e,x=h*p+f;q.push(a+m*Math.cos(x),c+m*Math.sin(x))}return this.drawPolygon(q)};
b.prototype.clear=function(){if(this.lineWidth||this.filling||0<this.graphicsData.length)this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.canvasTintDirty=this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0;this._spriteRect=this.currentPath=null;return this};b.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===n.SHAPES.RECT&&!this.graphicsData[0].lineWidth};b.prototype._renderWebGL=function(a){this.dirty!==this.fastRectDirty&&
(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect());this._fastRect?this._renderSpriteRect(a):(a.setObjectRenderer(a.plugins.graphics),a.plugins.graphics.render(this))};b.prototype._renderSpriteRect=function(a){var d=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new e.default(new c.default(c.default.WHITE)));var b=this._spriteRect,f=this.graphicsData[0].fillColor;if(16777215===this.tint)b.tint=f;else if(this.tint!==this._prevRectTint||f!==this._prevRectFillColor)(0,q.hex2rgb)(f,
u),(0,q.hex2rgb)(this.tint,z),u[0]*=z[0],u[1]*=z[1],u[2]*=z[2],b.tint=(0,q.rgb2hex)(u),this._prevRectTint=this.tint,this._prevRectFillColor=f;b.alpha=this.graphicsData[0].fillAlpha;b.worldAlpha=this.worldAlpha*b.alpha;b.blendMode=this.blendMode;b._texture._frame.width=d.width;b._texture._frame.height=d.height;b.transform.worldTransform=this.transform.worldTransform;b.anchor.set(-d.x/d.width,-d.y/d.height);b._onAnchorUpdate();b._renderWebGL(a)};b.prototype._renderCanvas=function(a){!0!==this.isMask&&
a.plugins.graphics.render(this)};b.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var a=this._localBounds;this._bounds.addFrame(this.transform,a.minX,a.minY,a.maxX,a.maxY)};b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,A);for(var c=this.graphicsData,d=0;d<c.length;++d)if(a=c[d],a.fill&&a.shape&&a.shape.contains(A.x,A.y)){if(a.holes)for(c=0;c<a.holes.length;c++)if(a.holes[c].contains(A.x,
A.y))return!1;return!0}return!1};b.prototype.updateLocalBounds=function(){var a=Infinity,c=-Infinity,d=Infinity,e=-Infinity;if(this.graphicsData.length)for(var b,f,l,p,q,h=0;h<this.graphicsData.length;h++){b=this.graphicsData[h];l=b.type;var m=b.lineWidth;b=b.shape;if(l===n.SHAPES.RECT||l===n.SHAPES.RREC)f=b.x-m/2,l=b.y-m/2,p=b.width+m,q=b.height+m,a=f<a?f:a,c=f+p>c?f+p:c,d=l<d?l:d,e=l+q>e?l+q:e;else if(l===n.SHAPES.CIRC)f=b.x,l=b.y,p=b.radius+m/2,q=b.radius+m/2,a=f-p<a?f-p:a,c=f+p>c?f+p:c,d=l-q<
d?l-q:d,e=l+q>e?l+q:e;else if(l===n.SHAPES.ELIP)f=b.x,l=b.y,p=b.width+m/2,q=b.height+m/2,a=f-p<a?f-p:a,c=f+p>c?f+p:c,d=l-q<d?l-q:d,e=l+q>e?l+q:e;else{b=b.points;for(var x,g,t,v,w,k=0;k+2<b.length;k+=2)f=b[k],l=b[k+1],x=b[k+2],g=b[k+3],t=Math.abs(x-f),v=Math.abs(g-l),q=m,p=Math.sqrt(t*t+v*v),1E-9>p||(w=(q/p*v+t)/2,p=(q/p*t+v)/2,f=(x+f)/2,l=(g+l)/2,a=f-w<a?f-w:a,c=f+w>c?f+w:c,d=l-p<d?l-p:d,e=l+p>e?l+p:e)}}else e=d=c=a=0;h=this.boundsPadding;this._localBounds.minX=a-h;this._localBounds.maxX=c+h;this._localBounds.minY=
d-h;this._localBounds.maxY=e+h};b.prototype.drawShape=function(c){this.currentPath&&2>=this.currentPath.shape.points.length&&this.graphicsData.pop();this.currentPath=null;c=new a.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,c,this.lineAlignment);this.graphicsData.push(c);c.type===n.SHAPES.POLY&&(c.shape.closed=c.shape.closed,this.currentPath=c);this.dirty++;return c};b.prototype.generateCanvasTexture=function(a){var d=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:1,e=this.getLocalBounds(),b=f.default.create(e.width,e.height,a,d);v||(v=new t.default);this.transform.updateLocalTransform();this.transform.localTransform.copy(w);w.invert();w.tx-=e.x;w.ty-=e.y;v.render(this,b,!0,w);e=c.default.fromCanvas(b.baseTexture._canvasRenderTarget.canvas,a,"graphics");e.baseTexture.resolution=d;e.baseTexture.update();return e};b.prototype.closePath=function(){var a=this.currentPath;a&&a.shape&&a.shape.close();return this};b.prototype.addHole=
function(){var a=this.graphicsData.pop();this.currentPath=this.graphicsData[this.graphicsData.length-1];this.currentPath.addHole(a.shape);this.currentPath=null;return this};b.prototype.destroy=function(a){d.prototype.destroy.call(this,a);for(a=0;a<this.graphicsData.length;++a)this.graphicsData[a].destroy();for(var c in this._webGL)for(a=0;a<this._webGL[c].data.length;++a)this._webGL[c].data[a].destroy();this._spriteRect&&this._spriteRect.destroy();this._localBounds=this._webGL=this.currentPath=this.graphicsData=
null};return b}(k.default);g.default=b;b._SPRITE_TEXTURE=null;b.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},{"../const":54,"../display/Bounds":55,"../display/Container":56,"../math":78,"../renderers/canvas/CanvasRenderer":85,"../sprites/Sprite":110,"../textures/RenderTexture":121,"../textures/Texture":123,"../utils":133,"./GraphicsData":62,"./utils/bezierCurveTo":64}],62:[function(b,k,g){g.__esModule=!0;b=function(){function b(h,d,f,c,a,e,l,q,n){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
this.lineWidth=h;this.lineAlignment=n;this.nativeLines=l;this.lineColor=d;this.lineAlpha=f;this._lineTint=d;this.fillColor=c;this.fillAlpha=a;this._fillTint=c;this.fill=e;this.holes=[];this.shape=q;this.type=q.type}b.prototype.clone=function(){return new b(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)};b.prototype.addHole=function(b){this.holes.push(b)};b.prototype.destroy=function(){this.holes=this.shape=null};return b}();g.default=
b},{}],63:[function(b,k,g){g.__esModule=!0;k=(k=b("../../renderers/canvas/CanvasRenderer"))&&k.__esModule?k:{default:k};var h=b("../../const");b=function(){function b(d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.renderer=d}b.prototype.render=function(d){var b=this.renderer,c=b.context,a=d.worldAlpha,e=d.transform.worldTransform,l=b.resolution;c.setTransform(e.a*l,e.b*l,e.c*l,e.d*l,e.tx*l,e.ty*l);d.canvasTintDirty===d.dirty&&d._prevTint===d.tint||this.updateGraphicsTint(d);
b.setBlendMode(d.blendMode);for(b=0;b<d.graphicsData.length;b++){e=d.graphicsData[b];var q=e.shape;l=e._fillTint;var n=e._lineTint;c.lineWidth=e.lineWidth;if(e.type===h.SHAPES.POLY){c.beginPath();this.renderPolygon(q.points,q.closed,c);for(var p=0;p<e.holes.length;p++)this.renderPolygon(e.holes[p].points,!0,c);e.fill&&(c.globalAlpha=e.fillAlpha*a,c.fillStyle="#"+("00000"+(l|0).toString(16)).substr(-6),c.fill());e.lineWidth&&(c.globalAlpha=e.lineAlpha*a,c.strokeStyle="#"+("00000"+(n|0).toString(16)).substr(-6),
c.stroke())}else if(e.type===h.SHAPES.RECT){if(e.fillColor||0===e.fillColor)c.globalAlpha=e.fillAlpha*a,c.fillStyle="#"+("00000"+(l|0).toString(16)).substr(-6),c.fillRect(q.x,q.y,q.width,q.height);e.lineWidth&&(c.globalAlpha=e.lineAlpha*a,c.strokeStyle="#"+("00000"+(n|0).toString(16)).substr(-6),c.strokeRect(q.x,q.y,q.width,q.height))}else if(e.type===h.SHAPES.CIRC)c.beginPath(),c.arc(q.x,q.y,q.radius,0,2*Math.PI),c.closePath(),e.fill&&(c.globalAlpha=e.fillAlpha*a,c.fillStyle="#"+("00000"+(l|0).toString(16)).substr(-6),
c.fill()),e.lineWidth&&(c.globalAlpha=e.lineAlpha*a,c.strokeStyle="#"+("00000"+(n|0).toString(16)).substr(-6),c.stroke());else if(e.type===h.SHAPES.ELIP){var m=2*q.width,g=2*q.height;p=q.x-m/2;q=q.y-g/2;c.beginPath();var v=m/2*.5522848,w=g/2*.5522848,k=p+m,u=q+g;m=p+m/2;g=q+g/2;c.moveTo(p,g);c.bezierCurveTo(p,g-w,m-v,q,m,q);c.bezierCurveTo(m+v,q,k,g-w,k,g);c.bezierCurveTo(k,g+w,m+v,u,m,u);c.bezierCurveTo(m-v,u,p,g+w,p,g);c.closePath();e.fill&&(c.globalAlpha=e.fillAlpha*a,c.fillStyle="#"+("00000"+
(l|0).toString(16)).substr(-6),c.fill());e.lineWidth&&(c.globalAlpha=e.lineAlpha*a,c.strokeStyle="#"+("00000"+(n|0).toString(16)).substr(-6),c.stroke())}else if(e.type===h.SHAPES.RREC){p=q.x;g=q.y;v=q.width;w=q.height;q=q.radius;k=Math.min(v,w)/2|0;q=q>k?k:q;c.beginPath();c.moveTo(p,g+q);c.lineTo(p,g+w-q);c.quadraticCurveTo(p,g+w,p+q,g+w);c.lineTo(p+v-q,g+w);c.quadraticCurveTo(p+v,g+w,p+v,g+w-q);c.lineTo(p+v,g+q);c.quadraticCurveTo(p+v,g,p+v-q,g);c.lineTo(p+q,g);c.quadraticCurveTo(p,g,p,g+q);c.closePath();
if(e.fillColor||0===e.fillColor)c.globalAlpha=e.fillAlpha*a,c.fillStyle="#"+("00000"+(l|0).toString(16)).substr(-6),c.fill();e.lineWidth&&(c.globalAlpha=e.lineAlpha*a,c.strokeStyle="#"+("00000"+(n|0).toString(16)).substr(-6),c.stroke())}}};b.prototype.updateGraphicsTint=function(d){d._prevTint=d.tint;d.canvasTintDirty=d.dirty;for(var b=(d.tint>>16&255)/255,c=(d.tint>>8&255)/255,a=(d.tint&255)/255,e=0;e<d.graphicsData.length;++e){var l=d.graphicsData[e],q=l.fillColor|0,n=l.lineColor|0;l._fillTint=
((q>>16&255)/255*b*255<<16)+((q>>8&255)/255*c*255<<8)+(q&255)/255*a*255;l._lineTint=((n>>16&255)/255*b*255<<16)+((n>>8&255)/255*c*255<<8)+(n&255)/255*a*255}};b.prototype.renderPolygon=function(d,b,c){c.moveTo(d[0],d[1]);for(var a=1;a<d.length/2;++a)c.lineTo(d[2*a],d[2*a+1]);b&&c.closePath()};b.prototype.destroy=function(){this.renderer=null};return b}();g.default=b;k.default.registerPlugin("graphics",b)},{"../../const":54,"../../renderers/canvas/CanvasRenderer":85}],64:[function(b,k,g){g.__esModule=
!0;g.default=function(b,m,d,f,c,a,e,l,q){var n=9<arguments.length&&void 0!==arguments[9]?arguments[9]:[];n.push(b,m);for(var p=1,h;p<=q;++p){h=p/q;var g=1-h;var v=g*g;var w=v*g;var k=h*h;var u=k*h;n.push(w*b+3*v*h*d+3*g*k*c+u*e,w*m+3*v*h*f+3*g*k*a+u*l)}return n}},{}],65:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&
c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;var d=b("../../utils"),f=b("../../const");k=b("../../renderers/webgl/utils/ObjectRenderer");var c=h(k);k=b("../../renderers/webgl/WebGLRenderer");k=h(k);var a=b("./WebGLGraphicsData"),e=h(a);a=b("./shaders/PrimitiveShader");var l=h(a);a=b("./utils/buildPoly");var q=h(a);a=b("./utils/buildRectangle");var n=h(a);a=b("./utils/buildRoundedRectangle");
var p=h(a);b=b("./utils/buildCircle");var x=h(b);b=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var d=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d.graphicsDataPool=[];d.primitiveShader=null;d.gl=c.gl;d.CONTEXT_UID=0;return d}m(b,a);b.prototype.onContextChange=function(){this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;
this.primitiveShader=new l.default(this.gl)};b.prototype.destroy=function(){c.default.prototype.destroy.call(this);for(var a=0;a<this.graphicsDataPool.length;++a)this.graphicsDataPool[a].destroy();this.graphicsDataPool=null};b.prototype.render=function(a){var c=this.renderer,b=c.gl,e=a._webGL[this.CONTEXT_UID];e&&a.dirty===e.dirty||(this.updateGraphics(a),e=a._webGL[this.CONTEXT_UID]);c.bindShader(this.primitiveShader);c.state.setBlendMode(a.blendMode);for(var f=0,l=e.data.length;f<l;f++){var p=e.data[f];
var n=p.shader;c.bindShader(n);n.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0);n.uniforms.tint=(0,d.hex2rgb)(a.tint);n.uniforms.alpha=a.worldAlpha;c.bindVao(p.vao);p.nativeLines?b.drawArrays(b.LINES,0,p.points.length/6):p.vao.draw(b.TRIANGLE_STRIP,p.indices.length)}};b.prototype.updateGraphics=function(a){var c=this.renderer.gl,d=a._webGL[this.CONTEXT_UID];d||(d=a._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:c,clearDirty:-1,dirty:-1});d.dirty=a.dirty;if(a.clearDirty!==d.clearDirty){d.clearDirty=
a.clearDirty;for(c=0;c<d.data.length;c++)this.graphicsDataPool.push(d.data[c]);d.data.length=0;d.lastIndex=0}for(var b=void 0,e=d.lastIndex;e<a.graphicsData.length;e++){var l=a.graphicsData[e];c=this.getWebGLData(d,0);l.nativeLines&&l.lineWidth&&(b=this.getWebGLData(d,0,!0),d.lastIndex++);l.type===f.SHAPES.POLY&&(0,q.default)(l,c,b);l.type===f.SHAPES.RECT?(0,n.default)(l,c,b):l.type===f.SHAPES.CIRC||l.type===f.SHAPES.ELIP?(0,x.default)(l,c,b):l.type===f.SHAPES.RREC&&(0,p.default)(l,c,b);d.lastIndex++}this.renderer.bindVao(null);
for(a=0;a<d.data.length;a++)c=d.data[a],c.dirty&&c.upload()};b.prototype.getWebGLData=function(a,c,d){var b=a.data[a.data.length-1];if(!b||b.nativeLines!==d||32E4<b.points.length)b=this.graphicsDataPool.pop()||new e.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),b.nativeLines=d,b.reset(c),a.data.push(b);b.dirty=!0;return b};return b}(c.default);g.default=b;k.default.registerPlugin("graphics",b)},{"../../const":54,"../../renderers/webgl/WebGLRenderer":92,"../../renderers/webgl/utils/ObjectRenderer":102,
"../../utils":133,"./WebGLGraphicsData":66,"./shaders/PrimitiveShader":67,"./utils/buildCircle":68,"./utils/buildPoly":70,"./utils/buildRectangle":71,"./utils/buildRoundedRectangle":72}],66:[function(b,k,g){g.__esModule=!0;var h=(b=b("pixi-gl-core"))&&b.__esModule?b:{default:b};b=function(){function b(d,f,c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.gl=d;this.color=[0,0,0];this.points=[];this.indices=[];this.buffer=h.default.GLBuffer.createVertexBuffer(d);
this.indexBuffer=h.default.GLBuffer.createIndexBuffer(d);this.dirty=!0;this.nativeLines=!1;this.glIndices=this.glPoints=null;this.shader=f;this.vao=(new h.default.VertexArrayObject(d,c)).addIndex(this.indexBuffer).addAttribute(this.buffer,f.attributes.aVertexPosition,d.FLOAT,!1,24,0).addAttribute(this.buffer,f.attributes.aColor,d.FLOAT,!1,24,8)}b.prototype.reset=function(){this.points.length=0;this.indices.length=0};b.prototype.upload=function(){this.glPoints=new Float32Array(this.points);this.buffer.upload(this.glPoints);
this.glIndices=new Uint16Array(this.indices);this.indexBuffer.upload(this.glIndices);this.dirty=!1};b.prototype.destroy=function(){this.indices=this.points=this.color=null;this.vao.destroy();this.buffer.destroy();this.indexBuffer.destroy();this.glIndices=this.glPoints=this.indexBuffer=this.buffer=this.gl=null};return b}();g.default=b},{"pixi-gl-core":22}],67:[function(b,k,g){function h(b,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+
typeof d);b.prototype=Object.create(d&&d.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(b,d):b.__proto__=d)}g.__esModule=!0;b=b("../../../Shader");b=function(b){function d(f){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");f=b.call(this,f,"attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}",
"varying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!==typeof f&&"function"!==typeof f?this:f}h(d,b);return d}((b&&b.__esModule?b:{default:b}).default);g.default=b},{"../../../Shader":52}],68:[function(b,k,g){g.__esModule=!0;g.default=function(b,c,a){var e=b.shape,f=e.x,q=e.y,n;if(b.type===m.SHAPES.CIRC)var p=n=e.radius;else n=e.width,p=e.height;if(0!==n&&0!==p){e=Math.floor(30*
Math.sqrt(e.radius))||Math.floor(15*Math.sqrt(e.width+e.height));var x=2*Math.PI/e;if(b.fill){var g=(0,d.hex2rgb)(b.fillColor),v=b.fillAlpha,k=g[0]*v,A=g[1]*v;g=g[2]*v;var u=c.points,z=c.indices,y=u.length/6;z.push(y);for(var B=0;B<e+1;B++)u.push(f,q,k,A,g,v),u.push(f+Math.sin(x*B)*n,q+Math.cos(x*B)*p,k,A,g,v),z.push(y++,y++);z.push(y-1)}if(b.lineWidth){v=b.points;b.points=[];for(k=0;k<e;k++)b.points.push(f+Math.sin(x*-k)*n,q+Math.cos(x*-k)*p);b.points.push(b.points[0],b.points[1]);(0,h.default)(b,
c,a);b.points=v}}};var h=(k=b("./buildLine"))&&k.__esModule?k:{default:k},m=b("../../../const"),d=b("../../../utils")},{"../../../const":54,"../../../utils":133,"./buildLine":69}],69:[function(b,k,g){g.__esModule=!0;g.default=function(d,b,c){if(d.nativeLines){var a=d.points;if(0!==a.length){c=c.points;b=a.length/2;var e=(0,m.hex2rgb)(d.lineColor);var f=d.lineAlpha,q=e[0]*f,n=e[1]*f,p=e[2]*f;for(e=1;e<b;e++){var x=a[2*e],g=a[2*e+1];c.push(a[2*(e-1)],a[2*(e-1)+1]);c.push(q,n,p,f);c.push(x,g);c.push(q,
n,p,f)}}}else if(a=d.points,0!==a.length){f=new h.Point(a[0],a[1]);q=new h.Point(a[a.length-2],a[a.length-1]);f.x===q.x&&f.y===q.y&&(a=a.slice(),a.pop(),a.pop(),q=new h.Point(a[a.length-2],a[a.length-1]),c=q.x+.5*(f.x-q.x),f=q.y+.5*(f.y-q.y),a.unshift(c,f),a.push(c,f));c=b.points;b=b.indices;n=a.length/2;f=a.length;q=c.length/6;e=d.lineWidth/2;var v=(0,m.hex2rgb)(d.lineColor);p=d.lineAlpha;x=v[0]*p;g=v[1]*p;v=v[2]*p;var k=a[0],A=a[1],u=a[2],z=a[3],y=-(A-z),B=k-u,C=Math.sqrt(y*y+B*B);y=y/C*e;B=B/C*
e;u=d.lineAlignment;d=2*(1-u);var r=2*u;c.push(k-y*d,A-B*d,x,g,v,p);c.push(k+y*r,A+B*r,x,g,v,p);for(var D=1;D<n-1;++D){k=a[2*(D-1)];A=a[2*(D-1)+1];u=a[2*D];z=a[2*D+1];var E=a[2*(D+1)];var O=a[2*(D+1)+1];y=-(A-z);B=k-u;C=Math.sqrt(y*y+B*B);y/=C;B/=C;y*=e;B*=e;var F=-(z-O);var I=u-E;C=Math.sqrt(F*F+I*I);F/=C;I/=C;F*=e;I*=e;C=-B+A-(-B+z);var K=-y+u-(-y+k);k=(-y+k)*(-B+z)-(-y+u)*(-B+A);A=-I+O-(-I+z);var V=-F+u-(-F+E);E=(-F+E)*(-I+z)-(-F+u)*(-I+O);O=C*V-A*K;.1>Math.abs(O)?(c.push(u-y*d,z-B*d,x,g,v,p),
c.push(u+y*r,z+B*r,x,g,v,p)):(K=(K*E-V*k)/O,C=(A*k-C*E)/O,(K-u)*(K-u)+(C-z)*(C-z)>196*e*e?(y-=F,B-=I,C=Math.sqrt(y*y+B*B),y/=C,B/=C,y*=e,B*=e,c.push(u-y*d,z-B*d),c.push(x,g,v,p),c.push(u+y*r,z+B*r),c.push(x,g,v,p),c.push(u-y*r*d,z-B*d),c.push(x,g,v,p),f++):(c.push(u+(K-u)*d,z+(C-z)*d),c.push(x,g,v,p),c.push(u-(K-u)*r,z-(C-z)*r),c.push(x,g,v,p)))}k=a[2*(n-2)];A=a[2*(n-2)+1];u=a[2*(n-1)];z=a[2*(n-1)+1];y=-(A-z);B=k-u;C=Math.sqrt(y*y+B*B);y=y/C*e;B=B/C*e;c.push(u-y*d,z-B*d);c.push(x,g,v,p);c.push(u+
y*r,z+B*r);c.push(x,g,v,p);b.push(q);for(a=0;a<f;++a)b.push(q++);b.push(q-1)}};var h=b("../../../math"),m=b("../../../utils")},{"../../../math":78,"../../../utils":133}],70:[function(b,k,g){g.__esModule=!0;g.default=function(b,c,a){b.points=b.shape.points.slice();var e=b.points;if(b.fill&&6<=e.length){for(var f=[],q=b.holes,n=0;n<q.length;n++){var p=q[n];f.push(e.length/2);e=e.concat(p.points)}q=c.points;var x=c.indices;n=e.length/2;var g=(0,m.hex2rgb)(b.fillColor);p=b.fillAlpha;var k=g[0]*p,w=g[1]*
p;g=g[2]*p;f=(0,d.default)(e,f,2);if(!f)return;for(var A=q.length/6,u=0;u<f.length;u+=3)x.push(f[u]+A),x.push(f[u]+A),x.push(f[u+1]+A),x.push(f[u+2]+A),x.push(f[u+2]+A);for(f=0;f<n;f++)q.push(e[2*f],e[2*f+1],k,w,g,p)}0<b.lineWidth&&(0,h.default)(b,c,a)};var h=(k=b("./buildLine"))&&k.__esModule?k:{default:k},m=b("../../../utils"),d=(b=b("earcut"))&&b.__esModule?b:{default:b}},{"../../../utils":133,"./buildLine":69,earcut:10}],71:[function(b,k,g){g.__esModule=!0;g.default=function(d,b,c){var a=d.shape,
e=a.x,f=a.y,q=a.width;a=a.height;if(d.fill){var n=(0,m.hex2rgb)(d.fillColor),p=d.fillAlpha,x=n[0]*p,g=n[1]*p;n=n[2]*p;var k=b.points,w=b.indices,A=k.length/6;k.push(e,f);k.push(x,g,n,p);k.push(e+q,f);k.push(x,g,n,p);k.push(e,f+a);k.push(x,g,n,p);k.push(e+q,f+a);k.push(x,g,n,p);w.push(A,A,A+1,A+2,A+3,A+3)}d.lineWidth&&(p=d.points,d.points=[e,f,e+q,f,e+q,f+a,e,f+a,e,f],(0,h.default)(d,b,c),d.points=p)};var h=(k=b("./buildLine"))&&k.__esModule?k:{default:k},m=b("../../../utils")},{"../../../utils":133,
"./buildLine":69}],72:[function(b,k,g){function h(c,a,d,b,f,n){for(var e=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[],l,q,h,m,g=0,k;20>=g;++g)k=g/20,l=c+(d-c)*k,q=a+(b-a)*k,h=d+(f-d)*k,m=b+(n-b)*k,l+=(h-l)*k,q+=(m-q)*k,e.push(l,q);return e}g.__esModule=!0;g.default=function(c,a,b){var e=c.shape,q=e.x,n=e.y,p=e.width,g=e.height,t=e.radius;e=[];e.push(q,n+t);h(q,n+g-t,q,n+g,q+t,n+g,e);h(q+p-t,n+g,q+p,n+g,q+p,n+g-t,e);h(q+p,n+t,q+p,n,q+p-t,n,e);h(q+t,n,q,n,q,n+t+1E-10,e);if(c.fill){g=(0,
f.hex2rgb)(c.fillColor);q=c.fillAlpha;n=g[0]*q;p=g[1]*q;g=g[2]*q;t=a.points;for(var k=a.indices,w=t.length/6,A=(0,m.default)(e,null,2),u=0,z=A.length;u<z;u+=3)k.push(A[u]+w),k.push(A[u]+w),k.push(A[u+1]+w),k.push(A[u+2]+w),k.push(A[u+2]+w);k=0;for(w=e.length;k<w;k++)t.push(e[k],e[++k],n,p,g,q)}c.lineWidth&&(q=c.points,c.points=e,(0,d.default)(c,a,b),c.points=q)};var m=(k=b("earcut"))&&k.__esModule?k:{default:k},d=(k=b("./buildLine"))&&k.__esModule?k:{default:k},f=b("../../../utils")},{"../../../utils":133,
"./buildLine":69,earcut:10}],73:[function(b,k,g){function h(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);c.default=a;return c}function m(a){return a&&a.__esModule?a:{default:a}}g.__esModule=!0;g.autoDetectRenderer=g.Application=g.Filter=g.SpriteMaskFilter=g.Quad=g.RenderTarget=g.ObjectRenderer=g.WebGLManager=g.Shader=g.CanvasRenderTarget=g.TextureUvs=g.VideoBaseTexture=g.BaseRenderTexture=g.RenderTexture=g.BaseTexture=g.TextureMatrix=
g.Texture=g.Spritesheet=g.CanvasGraphicsRenderer=g.GraphicsRenderer=g.GraphicsData=g.Graphics=g.TextMetrics=g.TextStyle=g.Text=g.SpriteRenderer=g.CanvasTinter=g.CanvasSpriteRenderer=g.Sprite=g.TransformBase=g.TransformStatic=g.Transform=g.Container=g.DisplayObject=g.Bounds=g.glCore=g.WebGLRenderer=g.CanvasRenderer=g.ticker=g.utils=g.settings=void 0;var d=b("./const");Object.keys(d).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(g,a,{enumerable:!0,get:function(){return d[a]}})});
var f=b("./math");Object.keys(f).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(g,a,{enumerable:!0,get:function(){return f[a]}})});var c=b("pixi-gl-core");Object.defineProperty(g,"glCore",{enumerable:!0,get:function(){return m(c).default}});var a=b("./display/Bounds");Object.defineProperty(g,"Bounds",{enumerable:!0,get:function(){return m(a).default}});var e=b("./display/DisplayObject");Object.defineProperty(g,"DisplayObject",{enumerable:!0,get:function(){return m(e).default}});
var l=b("./display/Container");Object.defineProperty(g,"Container",{enumerable:!0,get:function(){return m(l).default}});var q=b("./display/Transform");Object.defineProperty(g,"Transform",{enumerable:!0,get:function(){return m(q).default}});var n=b("./display/TransformStatic");Object.defineProperty(g,"TransformStatic",{enumerable:!0,get:function(){return m(n).default}});var p=b("./display/TransformBase");Object.defineProperty(g,"TransformBase",{enumerable:!0,get:function(){return m(p).default}});var x=
b("./sprites/Sprite");Object.defineProperty(g,"Sprite",{enumerable:!0,get:function(){return m(x).default}});var t=b("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(g,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return m(t).default}});var v=b("./sprites/canvas/CanvasTinter");Object.defineProperty(g,"CanvasTinter",{enumerable:!0,get:function(){return m(v).default}});var w=b("./sprites/webgl/SpriteRenderer");Object.defineProperty(g,"SpriteRenderer",{enumerable:!0,get:function(){return m(w).default}});
var A=b("./text/Text");Object.defineProperty(g,"Text",{enumerable:!0,get:function(){return m(A).default}});var u=b("./text/TextStyle");Object.defineProperty(g,"TextStyle",{enumerable:!0,get:function(){return m(u).default}});var z=b("./text/TextMetrics");Object.defineProperty(g,"TextMetrics",{enumerable:!0,get:function(){return m(z).default}});var y=b("./graphics/Graphics");Object.defineProperty(g,"Graphics",{enumerable:!0,get:function(){return m(y).default}});var B=b("./graphics/GraphicsData");Object.defineProperty(g,
"GraphicsData",{enumerable:!0,get:function(){return m(B).default}});var C=b("./graphics/webgl/GraphicsRenderer");Object.defineProperty(g,"GraphicsRenderer",{enumerable:!0,get:function(){return m(C).default}});var r=b("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(g,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return m(r).default}});var D=b("./textures/Spritesheet");Object.defineProperty(g,"Spritesheet",{enumerable:!0,get:function(){return m(D).default}});var E=b("./textures/Texture");
Object.defineProperty(g,"Texture",{enumerable:!0,get:function(){return m(E).default}});var O=b("./textures/TextureMatrix");Object.defineProperty(g,"TextureMatrix",{enumerable:!0,get:function(){return m(O).default}});var F=b("./textures/BaseTexture");Object.defineProperty(g,"BaseTexture",{enumerable:!0,get:function(){return m(F).default}});var I=b("./textures/RenderTexture");Object.defineProperty(g,"RenderTexture",{enumerable:!0,get:function(){return m(I).default}});var K=b("./textures/BaseRenderTexture");
Object.defineProperty(g,"BaseRenderTexture",{enumerable:!0,get:function(){return m(K).default}});var V=b("./textures/VideoBaseTexture");Object.defineProperty(g,"VideoBaseTexture",{enumerable:!0,get:function(){return m(V).default}});var N=b("./textures/TextureUvs");Object.defineProperty(g,"TextureUvs",{enumerable:!0,get:function(){return m(N).default}});var P=b("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(g,"CanvasRenderTarget",{enumerable:!0,get:function(){return m(P).default}});
var W=b("./Shader");Object.defineProperty(g,"Shader",{enumerable:!0,get:function(){return m(W).default}});var G=b("./renderers/webgl/managers/WebGLManager");Object.defineProperty(g,"WebGLManager",{enumerable:!0,get:function(){return m(G).default}});var M=b("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(g,"ObjectRenderer",{enumerable:!0,get:function(){return m(M).default}});var S=b("./renderers/webgl/utils/RenderTarget");Object.defineProperty(g,"RenderTarget",{enumerable:!0,get:function(){return m(S).default}});
var L=b("./renderers/webgl/utils/Quad");Object.defineProperty(g,"Quad",{enumerable:!0,get:function(){return m(L).default}});var Q=b("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(g,"SpriteMaskFilter",{enumerable:!0,get:function(){return m(Q).default}});var R=b("./renderers/webgl/filters/Filter");Object.defineProperty(g,"Filter",{enumerable:!0,get:function(){return m(R).default}});var aa=b("./Application");Object.defineProperty(g,"Application",{enumerable:!0,get:function(){return m(aa).default}});
var Z=b("./autoDetectRenderer");Object.defineProperty(g,"autoDetectRenderer",{enumerable:!0,get:function(){return Z.autoDetectRenderer}});k=b("./utils");k=h(k);var H=b("./ticker");H=h(H);var Y=b("./settings");Y=m(Y);var T=b("./renderers/canvas/CanvasRenderer");T=m(T);b=b("./renderers/webgl/WebGLRenderer");b=m(b);g.settings=Y.default;g.utils=k;g.ticker=H;g.CanvasRenderer=T.default;g.WebGLRenderer=b.default},{"./Application":51,"./Shader":52,"./autoDetectRenderer":53,"./const":54,"./display/Bounds":55,
"./display/Container":56,"./display/DisplayObject":57,"./display/Transform":58,"./display/TransformBase":59,"./display/TransformStatic":60,"./graphics/Graphics":61,"./graphics/GraphicsData":62,"./graphics/canvas/CanvasGraphicsRenderer":63,"./graphics/webgl/GraphicsRenderer":65,"./math":78,"./renderers/canvas/CanvasRenderer":85,"./renderers/canvas/utils/CanvasRenderTarget":87,"./renderers/webgl/WebGLRenderer":92,"./renderers/webgl/filters/Filter":94,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":97,
"./renderers/webgl/managers/WebGLManager":101,"./renderers/webgl/utils/ObjectRenderer":102,"./renderers/webgl/utils/Quad":103,"./renderers/webgl/utils/RenderTarget":104,"./settings":109,"./sprites/Sprite":110,"./sprites/canvas/CanvasSpriteRenderer":111,"./sprites/canvas/CanvasTinter":112,"./sprites/webgl/SpriteRenderer":114,"./text/Text":116,"./text/TextMetrics":117,"./text/TextStyle":118,"./textures/BaseRenderTexture":119,"./textures/BaseTexture":120,"./textures/RenderTexture":121,"./textures/Spritesheet":122,
"./textures/Texture":123,"./textures/TextureMatrix":124,"./textures/TextureUvs":125,"./textures/VideoBaseTexture":126,"./ticker":129,"./utils":133,"pixi-gl-core":22}],74:[function(b,k,g){function h(a){return 0>a?-1:0<a?1:0}g.__esModule=!0;var m=(b=b("./Matrix"))&&b.__esModule?b:{default:b},d=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],f=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],c=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],a=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],e=[],l=[];(function(){for(var b=0;16>b;b++){var p=
[];l.push(p);for(var q=0;16>q;q++)for(var g=h(d[b]*d[q]+c[b]*f[q]),k=h(f[b]*d[q]+a[b]*f[q]),w=h(d[b]*c[q]+c[b]*a[q]),A=h(f[b]*c[q]+a[b]*a[q]),u=0;16>u;u++)if(d[u]===g&&f[u]===k&&c[u]===w&&a[u]===A){p.push(u);break}}for(b=0;16>b;b++)p=new m.default,p.set(d[b],f[b],c[b],a[b],0,0),e.push(p)})();var q={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(a){return d[a]},uY:function(a){return f[a]},vX:function(a){return c[a]},vY:function(c){return a[c]},inv:function(a){return a&
8?a&15:-a&7},add:function(a,c){return l[a][c]},sub:function(a,c){return l[a][q.inv(c)]},rotate180:function(a){return a^4},isVertical:function(a){return 2===(a&3)},byDirection:function(a,c){return 2*Math.abs(a)<=Math.abs(c)?0<=c?q.S:q.N:2*Math.abs(c)<=Math.abs(a)?0<a?q.E:q.W:0<c?0<a?q.SE:q.SW:0<a?q.NE:q.NW},matrixAppendRotationInv:function(a,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,f=e[q.inv(c)];f.tx=d;f.ty=b;a.append(f)}};
g.default=q},{"./Matrix":75}],75:[function(b,k,g){g.__esModule=!0;var h=function(){function d(c,a){for(var d=0;d<a.length;d++){var b=a[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(c,b.key,b)}}return function(c,a,b){a&&d(c.prototype,a);b&&d(c,b);return c}}(),m=(k=b("./Point"))&&k.__esModule?k:{default:k},d=b("../const");b=function(){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,a=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:0,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,q=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,n=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.a=c;this.b=a;this.c=d;this.d=f;this.tx=q;this.ty=n;this.array=null}b.prototype.fromArray=function(c){this.a=c[0];this.b=c[1];this.c=c[3];this.d=c[4];this.tx=c[2];this.ty=
c[5]};b.prototype.set=function(c,a,d,b,f,n){this.a=c;this.b=a;this.c=d;this.d=b;this.tx=f;this.ty=n;return this};b.prototype.toArray=function(c,a){this.array||(this.array=new Float32Array(9));a=a||this.array;c?(a[0]=this.a,a[1]=this.b,a[2]=0,a[3]=this.c,a[4]=this.d,a[5]=0,a[6]=this.tx,a[7]=this.ty):(a[0]=this.a,a[1]=this.c,a[2]=this.tx,a[3]=this.b,a[4]=this.d,a[5]=this.ty,a[6]=0,a[7]=0);a[8]=1;return a};b.prototype.apply=function(c,a){a=a||new m.default;var d=c.x;c=c.y;a.x=this.a*d+this.c*c+this.tx;
a.y=this.b*d+this.d*c+this.ty;return a};b.prototype.applyInverse=function(c,a){a=a||new m.default;var d=1/(this.a*this.d+this.c*-this.b),b=c.x;c=c.y;a.x=this.d*d*b+-this.c*d*c+(this.ty*this.c-this.tx*this.d)*d;a.y=this.a*d*c+-this.b*d*b+(-this.ty*this.a+this.tx*this.b)*d;return a};b.prototype.translate=function(c,a){this.tx+=c;this.ty+=a;return this};b.prototype.scale=function(c,a){this.a*=c;this.d*=a;this.c*=c;this.b*=a;this.tx*=c;this.ty*=a;return this};b.prototype.rotate=function(c){var a=Math.cos(c);
c=Math.sin(c);var d=this.a,b=this.c,f=this.tx;this.a=d*a-this.b*c;this.b=d*c+this.b*a;this.c=b*a-this.d*c;this.d=b*c+this.d*a;this.tx=f*a-this.ty*c;this.ty=f*c+this.ty*a;return this};b.prototype.append=function(c){var a=this.a,d=this.b,b=this.c,f=this.d;this.a=c.a*a+c.b*b;this.b=c.a*d+c.b*f;this.c=c.c*a+c.d*b;this.d=c.c*d+c.d*f;this.tx=c.tx*a+c.ty*b+this.tx;this.ty=c.tx*d+c.ty*f+this.ty;return this};b.prototype.setTransform=function(c,a,d,b,f,n,p,h,m){this.a=Math.cos(p+m)*f;this.b=Math.sin(p+m)*f;
this.c=-Math.sin(p-h)*n;this.d=Math.cos(p-h)*n;this.tx=c-(d*this.a+b*this.c);this.ty=a-(d*this.b+b*this.d);return this};b.prototype.prepend=function(c){var a=this.tx;if(1!==c.a||0!==c.b||0!==c.c||1!==c.d){var d=this.a,b=this.c;this.a=d*c.a+this.b*c.c;this.b=d*c.b+this.b*c.d;this.c=b*c.a+this.d*c.c;this.d=b*c.b+this.d*c.d}this.tx=a*c.a+this.ty*c.c+c.tx;this.ty=a*c.b+this.ty*c.d+c.ty;return this};b.prototype.decompose=function(c){var a=this.a,b=this.b,f=this.c,q=this.d,n=-Math.atan2(-f,q),p=Math.atan2(b,
a),h=Math.abs(n+p);1E-5>h||1E-5>Math.abs(d.PI_2-h)?(c.rotation=p,0>a&&0<=q&&(c.rotation+=0>=c.rotation?Math.PI:-Math.PI),c.skew.x=c.skew.y=0):(c.rotation=0,c.skew.x=n,c.skew.y=p);c.scale.x=Math.sqrt(a*a+b*b);c.scale.y=Math.sqrt(f*f+q*q);c.position.x=this.tx;c.position.y=this.ty;return c};b.prototype.invert=function(){var c=this.a,a=this.b,d=this.c,b=this.d,f=this.tx,n=c*b-a*d;this.a=b/n;this.b=-a/n;this.c=-d/n;this.d=c/n;this.tx=(d*this.ty-b*f)/n;this.ty=-(c*this.ty-a*f)/n;return this};b.prototype.identity=
function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0;return this};b.prototype.clone=function(){var c=new b;c.a=this.a;c.b=this.b;c.c=this.c;c.d=this.d;c.tx=this.tx;c.ty=this.ty;return c};b.prototype.copy=function(c){c.a=this.a;c.b=this.b;c.c=this.c;c.d=this.d;c.tx=this.tx;c.ty=this.ty;return c};h(b,null,[{key:"IDENTITY",get:function(){return new b}},{key:"TEMP_MATRIX",get:function(){return new b}}]);return b}();g.default=b},{"../const":54,"./Point":77}],76:[function(b,k,g){g.__esModule=
!0;var h=function(){function b(d,b){for(var c=0;c<b.length;c++){var a=b[c];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(d,a.key,a)}}return function(d,f,c){f&&b(d.prototype,f);c&&b(d,c);return d}}();b=function(){function b(d,f){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this._x=c;this._y=
a;this.cb=d;this.scope=f}b.prototype.clone=function(){return new b((0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||this.cb,(1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)||this.scope,this._x,this._y)};b.prototype.set=function(d,b){d=d||0;b=b||(0!==b?d:0);if(this._x!==d||this._y!==b)this._x=d,this._y=b,this.cb.call(this.scope)};b.prototype.copy=function(d){if(this._x!==d.x||this._y!==d.y)this._x=d.x,this._y=d.y,this.cb.call(this.scope)};b.prototype.equals=function(d){return d.x===
this._x&&d.y===this._y};h(b,[{key:"x",get:function(){return this._x},set:function(d){this._x!==d&&(this._x=d,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(d){this._y!==d&&(this._y=d,this.cb.call(this.scope))}}]);return b}();g.default=b},{}],77:[function(b,k,g){g.__esModule=!0;b=function(){function b(){var h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
this.x=h;this.y=d}b.prototype.clone=function(){return new b(this.x,this.y)};b.prototype.copy=function(b){this.set(b.x,b.y)};b.prototype.equals=function(b){return b.x===this.x&&b.y===this.y};b.prototype.set=function(b,d){this.x=b||0;this.y=d||(0!==d?this.x:0)};return b}();g.default=b},{}],78:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}g.__esModule=!0;var m=b("./Point");Object.defineProperty(g,"Point",{enumerable:!0,get:function(){return h(m).default}});var d=b("./ObservablePoint");
Object.defineProperty(g,"ObservablePoint",{enumerable:!0,get:function(){return h(d).default}});var f=b("./Matrix");Object.defineProperty(g,"Matrix",{enumerable:!0,get:function(){return h(f).default}});var c=b("./GroupD8");Object.defineProperty(g,"GroupD8",{enumerable:!0,get:function(){return h(c).default}});var a=b("./shapes/Circle");Object.defineProperty(g,"Circle",{enumerable:!0,get:function(){return h(a).default}});var e=b("./shapes/Ellipse");Object.defineProperty(g,"Ellipse",{enumerable:!0,get:function(){return h(e).default}});
var l=b("./shapes/Polygon");Object.defineProperty(g,"Polygon",{enumerable:!0,get:function(){return h(l).default}});var q=b("./shapes/Rectangle");Object.defineProperty(g,"Rectangle",{enumerable:!0,get:function(){return h(q).default}});var n=b("./shapes/RoundedRectangle");Object.defineProperty(g,"RoundedRectangle",{enumerable:!0,get:function(){return h(n).default}})},{"./GroupD8":74,"./Matrix":75,"./ObservablePoint":76,"./Point":77,"./shapes/Circle":79,"./shapes/Ellipse":80,"./shapes/Polygon":81,"./shapes/Rectangle":82,
"./shapes/RoundedRectangle":83}],79:[function(b,k,g){g.__esModule=!0;var h=(k=b("./Rectangle"))&&k.__esModule?k:{default:k},m=b("../../const");b=function(){function d(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.x=b;this.y=c;this.radius=a;this.type=m.SHAPES.CIRC}d.prototype.clone=
function(){return new d(this.x,this.y,this.radius)};d.prototype.contains=function(d,c){if(0>=this.radius)return!1;d=this.x-d;c=this.y-c;return d*d+c*c<=this.radius*this.radius};d.prototype.getBounds=function(){return new h.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)};return d}();g.default=b},{"../../const":54,"./Rectangle":82}],80:[function(b,k,g){g.__esModule=!0;var h=(k=b("./Rectangle"))&&k.__esModule?k:{default:k},m=b("../../const");b=function(){function d(){var b=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.x=b;this.y=c;this.width=a;this.height=e;this.type=m.SHAPES.ELIP}d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height)};d.prototype.contains=function(d,c){if(0>=
this.width||0>=this.height)return!1;d=(d-this.x)/this.width;c=(c-this.y)/this.height;return 1>=d*d+c*c};d.prototype.getBounds=function(){return new h.default(this.x-this.width,this.y-this.height,this.width,this.height)};return d}();g.default=b},{"../../const":54,"./Rectangle":82}],81:[function(b,k,g){g.__esModule=!0;var h=(k=b("../Point"))&&k.__esModule?k:{default:k},m=b("../../const");b=function(){function d(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];if(!(this instanceof
d))throw new TypeError("Cannot call a class as a function");Array.isArray(c[0])&&(c=c[0]);if(c[0]instanceof h.default){b=[];a=0;for(var e=c.length;a<e;a++)b.push(c[a].x,c[a].y);c=b}this.closed=!0;this.points=c;this.type=m.SHAPES.POLY}d.prototype.clone=function(){return new d(this.points.slice())};d.prototype.close=function(){var d=this.points;d[0]===d[d.length-2]&&d[1]===d[d.length-1]||d.push(d[0],d[1])};d.prototype.contains=function(d,c){for(var a=!1,b=this.points.length/2,f=0,q=b-1;f<b;q=f++){var n=
this.points[2*f],p=this.points[2*f+1],h=this.points[2*q];q=this.points[2*q+1];p>c!==q>c&&d<(c-p)/(q-p)*(h-n)+n&&(a=!a)}return a};return d}();g.default=b},{"../../const":54,"../Point":77}],82:[function(b,k,g){g.__esModule=!0;var h=function(){function d(d,c){for(var a=0;a<c.length;a++){var b=c[a];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(d,b.key,b)}}return function(b,c,a){c&&d(b.prototype,c);a&&d(b,a);return b}}(),m=b("../../const");b=function(){function d(){var b=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.x=Number(b);this.y=Number(c);this.width=Number(a);this.height=Number(e);this.type=m.SHAPES.RECT}d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height)};d.prototype.copy=
function(d){this.x=d.x;this.y=d.y;this.width=d.width;this.height=d.height;return this};d.prototype.contains=function(d,c){return 0>=this.width||0>=this.height?!1:d>=this.x&&d<this.x+this.width&&c>=this.y&&c<this.y+this.height?!0:!1};d.prototype.pad=function(d,c){d=d||0;c=c||(0!==c?d:0);this.x-=d;this.y-=c;this.width+=2*d;this.height+=2*c};d.prototype.fit=function(d){this.x<d.x&&(this.width+=this.x,0>this.width&&(this.width=0),this.x=d.x);this.y<d.y&&(this.height+=this.y,0>this.height&&(this.height=
0),this.y=d.y);this.x+this.width>d.x+d.width&&(this.width=d.width-this.x,0>this.width&&(this.width=0));this.y+this.height>d.y+d.height&&(this.height=d.height-this.y,0>this.height&&(this.height=0))};d.prototype.enlarge=function(d){var c=Math.min(this.x,d.x),a=Math.max(this.x+this.width,d.x+d.width),b=Math.min(this.y,d.y);d=Math.max(this.y+this.height,d.y+d.height);this.x=c;this.width=a-c;this.y=b;this.height=d-b};h(d,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+
this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new d(0,0,0,0)}}]);return d}();g.default=b},{"../../const":54}],83:[function(b,k,g){g.__esModule=!0;var h=b("../../const");b=function(){function b(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&
void 0!==arguments[3]?arguments[3]:0,e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.x=d;this.y=f;this.width=c;this.height=a;this.radius=e;this.type=h.SHAPES.RREC}b.prototype.clone=function(){return new b(this.x,this.y,this.width,this.height,this.radius)};b.prototype.contains=function(d,b){if(0>=this.width||0>=this.height)return!1;if(d>=this.x&&d<=this.x+this.width&&b>=this.y&&b<=this.y+this.height){if(b>=
this.y+this.radius&&b<=this.y+this.height-this.radius||d>=this.x+this.radius&&d<=this.x+this.width-this.radius)return!0;var c=d-(this.x+this.radius),a=b-(this.y+this.radius),e=this.radius*this.radius;if(c*c+a*a<=e)return!0;c=d-(this.x+this.width-this.radius);if(c*c+a*a<=e)return!0;a=b-(this.y+this.height-this.radius);if(c*c+a*a<=e)return!0;c=d-(this.x+this.radius);if(c*c+a*a<=e)return!0}return!1};return b}();g.default=b},{"../../const":54}],84:[function(b,k,g){function h(a){return a&&a.__esModule?
a:{default:a}}function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;var d=function(){function a(a,c){for(var d=0;d<c.length;d++){var b=c[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,
b.key,b)}}return function(c,d,b){d&&a(c.prototype,d);b&&a(c,b);return c}}(),f=b("../utils"),c=b("../math"),a=b("../const");k=b("../settings");var e=h(k);k=b("../display/Container");var l=h(k);k=b("../textures/RenderTexture");var q=h(k);b=b("eventemitter3");b=h(b);var n=new c.Matrix;b=function(b){function p(d,n,q,h){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");var g=b.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
g=!g||"object"!==typeof g&&"function"!==typeof g?this:g;(0,f.sayHello)(d);"number"===typeof n&&(n=Object.assign({width:n,height:q||e.default.RENDER_OPTIONS.height},h));n=Object.assign({},e.default.RENDER_OPTIONS,n);g.options=n;g.type=a.RENDERER_TYPE.UNKNOWN;g.screen=new c.Rectangle(0,0,n.width,n.height);g.view=n.view||document.createElement("canvas");g.resolution=n.resolution||e.default.RESOLUTION;g.transparent=n.transparent;g.autoResize=n.autoResize||!1;g.blendModes=null;g.preserveDrawingBuffer=
n.preserveDrawingBuffer;g.clearBeforeRender=n.clearBeforeRender;g.roundPixels=n.roundPixels;g._backgroundColor=0;g._backgroundColorRgba=[0,0,0,0];g._backgroundColorString="#000000";g.backgroundColor=n.backgroundColor||g._backgroundColor;g._tempDisplayObjectParent=new l.default;g._lastObjectRendered=g._tempDisplayObjectParent;return g}m(p,b);p.prototype.resize=function(a,c){this.screen.width=a;this.screen.height=c;this.view.width=a*this.resolution;this.view.height=c*this.resolution;this.autoResize&&
(this.view.style.width=a+"px",this.view.style.height=c+"px")};p.prototype.generateTexture=function(a,c,d,b){b=b||a.getLocalBounds();c=q.default.create(b.width|0,b.height|0,c,d);n.tx=-b.x;n.ty=-b.y;this.render(a,c,!1,n,!!a.parent);return c};p.prototype.destroy=function(c){c&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.type=a.RENDERER_TYPE.UNKNOWN;this.screen=this.view=null;this.resolution=0;this.autoResize=this.transparent=!1;this.options=this.blendModes=null;this.roundPixels=
this.clearBeforeRender=this.preserveDrawingBuffer=!1;this._backgroundColor=0;this._lastObjectRendered=this._tempDisplayObjectParent=this._backgroundColorString=this._backgroundColorRgba=null};d(p,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(a){this._backgroundColor=a;this._backgroundColorString=(0,f.hex2string)(a);(0,f.hex2rgb)(a,this._backgroundColorRgba)}}]);
return p}(b.default);g.default=b},{"../const":54,"../display/Container":56,"../math":78,"../settings":109,"../textures/RenderTexture":121,"../utils":133,eventemitter3:198}],85:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;k=b("../SystemRenderer");k=h(k);var d=b("./utils/CanvasMaskManager"),f=h(d);d=b("./utils/CanvasRenderTarget");var c=h(d);d=b("./utils/mapCanvasBlendModesToPixi");var a=h(d);d=b("../../utils");var e=b("../../const");b=b("../../settings");var l=h(b);b=function(d){function b(c,l,n){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=d.call(this,"Canvas",c,l,n);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.type=e.RENDERER_TYPE.CANVAS;c.rootContext=c.view.getContext("2d",{alpha:c.transparent});c.context=c.rootContext;c.refresh=!0;c.maskManager=new f.default(c);c.smoothProperty="imageSmoothingEnabled";c.rootContext.imageSmoothingEnabled||(c.rootContext.webkitImageSmoothingEnabled?c.smoothProperty="webkitImageSmoothingEnabled":c.rootContext.mozImageSmoothingEnabled?c.smoothProperty="mozImageSmoothingEnabled":c.rootContext.oImageSmoothingEnabled?
c.smoothProperty="oImageSmoothingEnabled":c.rootContext.msImageSmoothingEnabled&&(c.smoothProperty="msImageSmoothingEnabled"));c.initPlugins();c.blendModes=(0,a.default)();c._activeBlendMode=null;c.renderingToScreen=!1;c.resize(c.options.width,c.options.height);return c}m(b,d);b.prototype.render=function(a,d,b,f,l){if(this.view){this.renderingToScreen=!d;this.emit("prerender");var p=this.resolution;d?(d=d.baseTexture||d,d._canvasRenderTarget||(d._canvasRenderTarget=new c.default(d.width,d.height,
d.resolution),d.source=d._canvasRenderTarget.canvas,d.valid=!0),this.context=d._canvasRenderTarget.context,this.resolution=d._canvasRenderTarget.resolution):this.context=this.rootContext;var n=this.context;d||(this._lastObjectRendered=a);l||(d=a.parent,l=this._tempDisplayObjectParent.transform.worldTransform,f?(f.copy(l),this._tempDisplayObjectParent.transform._worldID=-1):l.identity(),a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=d);n.save();n.setTransform(1,0,0,1,0,0);n.globalAlpha=
1;this._activeBlendMode=e.BLEND_MODES.NORMAL;n.globalCompositeOperation=this.blendModes[e.BLEND_MODES.NORMAL];navigator.isCocoonJS&&this.view.screencanvas&&(n.fillStyle="black",n.clear());(void 0!==b?b:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?n.clearRect(0,0,this.width,this.height):(n.fillStyle=this._backgroundColorString,n.fillRect(0,0,this.width,this.height)));b=this.context;this.context=n;a.renderCanvas(this);this.context=b;n.restore();this.resolution=p;this.emit("postrender")}};
b.prototype.clear=function(a){var c=this.context;a=a||this._backgroundColorString;!this.transparent&&a?(c.fillStyle=a,c.fillRect(0,0,this.width,this.height)):c.clearRect(0,0,this.width,this.height)};b.prototype.setBlendMode=function(a){this._activeBlendMode!==a&&(this._activeBlendMode=a,this.context.globalCompositeOperation=this.blendModes[a])};b.prototype.destroy=function(a){this.destroyPlugins();d.prototype.destroy.call(this,a);this.context=null;this.refresh=!0;this.maskManager.destroy();this.smoothProperty=
this.maskManager=null};b.prototype.resize=function(a,c){d.prototype.resize.call(this,a,c);this.smoothProperty&&(this.rootContext[this.smoothProperty]=l.default.SCALE_MODE===e.SCALE_MODES.LINEAR)};b.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)};return b}(k.default);g.default=b;d.pluginTarget.mixin(b)},{"../../const":54,"../../settings":109,"../../utils":133,"../SystemRenderer":84,"./utils/CanvasMaskManager":86,"./utils/CanvasRenderTarget":87,
"./utils/mapCanvasBlendModesToPixi":89}],86:[function(b,k,g){g.__esModule=!0;var h=b("../../../const");b=function(){function b(d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.renderer=d}b.prototype.pushMask=function(d){var b=this.renderer;b.context.save();var c=d.alpha,a=d.transform.worldTransform,e=b.resolution;b.context.setTransform(a.a*e,a.b*e,a.c*e,a.d*e,a.tx*e,a.ty*e);d._texture||(this.renderGraphicsShape(d),b.context.clip());d.worldAlpha=c};b.prototype.renderGraphicsShape=
function(d){var b=this.renderer.context,c=d.graphicsData.length;if(0!==c){b.beginPath();for(var a=0;a<c;a++){var e=d.graphicsData[a],l=e.shape;if(e.type===h.SHAPES.POLY){e=l.points;b.moveTo(e[0],e[1]);for(var q=1;q<e.length/2;q++)b.lineTo(e[2*q],e[2*q+1]);e[0]===e[e.length-2]&&e[1]===e[e.length-1]&&b.closePath()}else if(e.type===h.SHAPES.RECT)b.rect(l.x,l.y,l.width,l.height),b.closePath();else if(e.type===h.SHAPES.CIRC)b.arc(l.x,l.y,l.radius,0,2*Math.PI),b.closePath();else if(e.type===h.SHAPES.ELIP){var n=
2*l.width;q=2*l.height;e=l.x-n/2;l=l.y-q/2;var p=n/2*.5522848,g=q/2*.5522848,m=e+n,k=l+q;n=e+n/2;q=l+q/2;b.moveTo(e,q);b.bezierCurveTo(e,q-g,n-p,l,n,l);b.bezierCurveTo(n+p,l,m,q-g,m,q);b.bezierCurveTo(m,q+g,n+p,k,n,k);b.bezierCurveTo(n-p,k,e,q+g,e,q);b.closePath()}else e.type===h.SHAPES.RREC&&(e=l.x,q=l.y,p=l.width,g=l.height,l=l.radius,m=Math.min(p,g)/2|0,l=l>m?m:l,b.moveTo(e,q+l),b.lineTo(e,q+g-l),b.quadraticCurveTo(e,q+g,e+l,q+g),b.lineTo(e+p-l,q+g),b.quadraticCurveTo(e+p,q+g,e+p,q+g-l),b.lineTo(e+
p,q+l),b.quadraticCurveTo(e+p,q,e+p-l,q),b.lineTo(e+l,q),b.quadraticCurveTo(e,q,e,q+l),b.closePath())}}};b.prototype.popMask=function(d){d.context.restore();d.invalidateBlendMode()};b.prototype.destroy=function(){};return b}();g.default=b},{"../../../const":54}],87:[function(b,k,g){g.__esModule=!0;var h=function(){function d(d,c){for(var a=0;a<c.length;a++){var b=c[a];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(d,b.key,b)}}return function(b,c,
a){c&&d(b.prototype,c);a&&d(b,a);return b}}(),m=(b=b("../../../settings"))&&b.__esModule?b:{default:b};b=function(){function d(b,c,a){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resolution=a||m.default.RESOLUTION;this.resize(b,c)}d.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};d.prototype.resize=
function(d,c){this.canvas.width=d*this.resolution;this.canvas.height=c*this.resolution};d.prototype.destroy=function(){this.canvas=this.context=null};h(d,[{key:"width",get:function(){return this.canvas.width},set:function(d){this.canvas.width=d}},{key:"height",get:function(){return this.canvas.height},set:function(d){this.canvas.height=d}}]);return d}();g.default=b},{"../../../settings":109}],88:[function(b,k,g){function h(b){var d=document.createElement("canvas");d.width=6;d.height=1;var f=d.getContext("2d");
f.fillStyle=b;f.fillRect(0,0,6,1);return d}g.__esModule=!0;g.default=function(){if("undefined"===typeof document)return!1;var b=h("#ff00ff"),d=h("#ffff00"),f=document.createElement("canvas");f.width=6;f.height=1;f=f.getContext("2d");f.globalCompositeOperation="multiply";f.drawImage(b,0,0);f.drawImage(d,2,0);b=f.getImageData(2,0,1,1);if(!b)return!1;b=b.data;return 255===b[0]&&0===b[1]&&0===b[2]}},{}],89:[function(b,k,g){g.__esModule=!0;g.default=function(){var d=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:[];(0,m.default)()?(d[h.BLEND_MODES.NORMAL]="source-over",d[h.BLEND_MODES.ADD]="lighter",d[h.BLEND_MODES.MULTIPLY]="multiply",d[h.BLEND_MODES.SCREEN]="screen",d[h.BLEND_MODES.OVERLAY]="overlay",d[h.BLEND_MODES.DARKEN]="darken",d[h.BLEND_MODES.LIGHTEN]="lighten",d[h.BLEND_MODES.COLOR_DODGE]="color-dodge",d[h.BLEND_MODES.COLOR_BURN]="color-burn",d[h.BLEND_MODES.HARD_LIGHT]="hard-light",d[h.BLEND_MODES.SOFT_LIGHT]="soft-light",d[h.BLEND_MODES.DIFFERENCE]="difference",d[h.BLEND_MODES.EXCLUSION]=
"exclusion",d[h.BLEND_MODES.HUE]="hue",d[h.BLEND_MODES.SATURATION]="saturate",d[h.BLEND_MODES.COLOR]="color",d[h.BLEND_MODES.LUMINOSITY]="luminosity"):(d[h.BLEND_MODES.NORMAL]="source-over",d[h.BLEND_MODES.ADD]="lighter",d[h.BLEND_MODES.MULTIPLY]="source-over",d[h.BLEND_MODES.SCREEN]="source-over",d[h.BLEND_MODES.OVERLAY]="source-over",d[h.BLEND_MODES.DARKEN]="source-over",d[h.BLEND_MODES.LIGHTEN]="source-over",d[h.BLEND_MODES.COLOR_DODGE]="source-over",d[h.BLEND_MODES.COLOR_BURN]="source-over",d[h.BLEND_MODES.HARD_LIGHT]=
"source-over",d[h.BLEND_MODES.SOFT_LIGHT]="source-over",d[h.BLEND_MODES.DIFFERENCE]="source-over",d[h.BLEND_MODES.EXCLUSION]="source-over",d[h.BLEND_MODES.HUE]="source-over",d[h.BLEND_MODES.SATURATION]="source-over",d[h.BLEND_MODES.COLOR]="source-over",d[h.BLEND_MODES.LUMINOSITY]="source-over");d[h.BLEND_MODES.NORMAL_NPM]=d[h.BLEND_MODES.NORMAL];d[h.BLEND_MODES.ADD_NPM]=d[h.BLEND_MODES.ADD];d[h.BLEND_MODES.SCREEN_NPM]=d[h.BLEND_MODES.SCREEN];return d};var h=b("../../../const"),m=(b=b("./canUseNewCanvasBlendModes"))&&
b.__esModule?b:{default:b}},{"../../../const":54,"./canUseNewCanvasBlendModes":88}],90:[function(b,k,g){g.__esModule=!0;var h=b("../../const"),m=(b=b("../../settings"))&&b.__esModule?b:{default:b};b=function(){function d(b){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.renderer=b;this.checkCount=this.count=0;this.maxIdle=m.default.GC_MAX_IDLE;this.checkCountMax=m.default.GC_MAX_CHECK_COUNT;this.mode=m.default.GC_MODE}d.prototype.update=function(){this.count++;
this.mode!==h.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))};d.prototype.run=function(){for(var d=this.renderer.textureManager,c=d._managedTextures,a=!1,b=0;b<c.length;b++){var l=c[b];!l._glRenderTargets&&this.count-l.touched>this.maxIdle&&(d.destroyTexture(l,!0),c[b]=null,a=!0)}if(a){for(a=d=0;a<c.length;a++)null!==c[a]&&(c[d++]=c[a]);c.length=d}};d.prototype.unload=function(d){var c=this.renderer.textureManager;d._texture&&d._texture._glRenderTargets&&
c.destroyTexture(d._texture,!0);for(c=d.children.length-1;0<=c;c--)this.unload(d.children[c])};return d}();g.default=b},{"../../const":54,"../../settings":109}],91:[function(b,k,g){g.__esModule=!0;var h=b("pixi-gl-core"),m=b("../../const"),d=(k=b("./utils/RenderTarget"))&&k.__esModule?k:{default:k},f=b("../../utils");b=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.renderer=a;this.gl=a.gl;this._managedTextures=[]}c.prototype.bindTexture=
function(){};c.prototype.getTexture=function(){};c.prototype.updateTexture=function(a,c){var b=this.gl,e=!!a._glRenderTargets;if(!a.hasLoaded)return null;var f=this.renderer.boundTextures;if(void 0===c)for(var p=c=0;p<f.length;++p)if(f[p]===a){c=p;break}f[c]=a;b.activeTexture(b.TEXTURE0+c);(b=a._glTextures[this.renderer.CONTEXT_UID])?e?a._glRenderTargets[this.renderer.CONTEXT_UID].resize(a.width,a.height):b.upload(a.source):(e?(c=new d.default(this.gl,a.width,a.height,a.scaleMode,a.resolution),c.resize(a.width,
a.height),a._glRenderTargets[this.renderer.CONTEXT_UID]=c,b=c.texture):(b=new h.GLTexture(this.gl,null,null,null,null),b.bind(c),b.premultiplyAlpha=!0,b.upload(a.source)),a._glTextures[this.renderer.CONTEXT_UID]=b,a.on("update",this.updateTexture,this),a.on("dispose",this.destroyTexture,this),this._managedTextures.push(a),a.isPowerOfTwo?(a.mipmap&&b.enableMipmap(),a.wrapMode===m.WRAP_MODES.CLAMP?b.enableWrapClamp():a.wrapMode===m.WRAP_MODES.REPEAT?b.enableWrapRepeat():b.enableWrapMirrorRepeat()):
b.enableWrapClamp(),a.scaleMode===m.SCALE_MODES.NEAREST?b.enableNearestScaling():b.enableLinearScaling());return b};c.prototype.destroyTexture=function(a,c){a=a.baseTexture||a;if(a.hasLoaded){var d=this.renderer.CONTEXT_UID,b=a._glTextures,e=a._glRenderTargets;b[d]&&(this.renderer.unbindTexture(a),b[d].destroy(),a.off("update",this.updateTexture,this),a.off("dispose",this.destroyTexture,this),delete b[d],c||(a=this._managedTextures.indexOf(a),-1!==a&&(0,f.removeItems)(this._managedTextures,a,1)));
e&&e[d]&&(e[d].destroy(),delete e[d])}};c.prototype.removeAll=function(){for(var a=0;a<this._managedTextures.length;++a){var c=this._managedTextures[a];c._glTextures[this.renderer.CONTEXT_UID]&&delete c._glTextures[this.renderer.CONTEXT_UID]}};c.prototype.destroy=function(){for(var a=0;a<this._managedTextures.length;++a){var c=this._managedTextures[a];this.destroyTexture(c,!0);c.off("update",this.updateTexture,this);c.off("dispose",this.destroyTexture,this)}this._managedTextures=null};return c}();
g.default=b},{"../../const":54,"../../utils":133,"./utils/RenderTarget":104,"pixi-gl-core":22}],92:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;k=
b("../SystemRenderer");var d=h(k);k=b("./managers/MaskManager");var f=h(k);k=b("./managers/StencilManager");var c=h(k);k=b("./managers/FilterManager");var a=h(k);k=b("./utils/RenderTarget");var e=h(k);k=b("./utils/ObjectRenderer");var l=h(k);k=b("./TextureManager");var q=h(k);k=b("../../textures/BaseTexture");var n=h(k);k=b("./TextureGarbageCollector");var p=h(k);k=b("./WebGLState");var x=h(k);k=b("./utils/mapWebGLDrawModesToPixi");var t=h(k);k=b("./utils/validateContext");var v=h(k);k=b("../../utils");
var w=b("pixi-gl-core"),A=h(w),u=b("../../const"),z=0;b=function(b){function h(a,d,e){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");a=b.call(this,"WebGL",a,d,e);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.legacy=a.options.legacy;a.legacy&&(A.default.VertexArrayObject.FORCE_NATIVE=!0);a.type=u.RENDERER_TYPE.WEBGL;a.handleContextLost=a.handleContextLost.bind(a);
a.handleContextRestored=a.handleContextRestored.bind(a);a.view.addEventListener("webglcontextlost",a.handleContextLost,!1);a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1);a._contextOptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:a.options.preserveDrawingBuffer,powerPreference:a.options.powerPreference};a._backgroundColorRgba[3]=a.transparent?0:1;a.maskManager=new f.default(a);
a.stencilManager=new c.default(a);a.emptyRenderer=new l.default(a);a.currentRenderer=a.emptyRenderer;a.textureManager=null;a.filterManager=null;a.initPlugins();a.options.context&&(0,v.default)(a.options.context);a.gl=a.options.context||A.default.createContext(a.view,a._contextOptions);a.CONTEXT_UID=z++;a.state=new x.default(a.gl);a.renderingToScreen=!0;a.boundTextures=null;a._activeShader=null;a._activeVao=null;a._activeRenderTarget=null;a._initContext();a.drawModes=(0,t.default)(a.gl);a._nextTextureLocation=
0;a.setBlendMode(0);return a}m(h,b);h.prototype._initContext=function(){var c=this.gl;c.isContextLost()&&c.getExtension("WEBGL_lose_context")&&c.getExtension("WEBGL_lose_context").restoreContext();var d=c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS);this._activeVao=this._activeShader=null;this.boundTextures=Array(d);this.emptyTextures=Array(d);this.textureManager=new q.default(this);this.filterManager=new a.default(this);this.textureGC=new p.default(this);this.state.resetToDefault();this.rootRenderTarget=
new e.default(c,this.width,this.height,null,this.resolution,!0);this.rootRenderTarget.clearColor=this._backgroundColorRgba;this.bindRenderTarget(this.rootRenderTarget);var b=new A.default.GLTexture.fromData(c,null,1,1),f={_glTextures:{}};f._glTextures[this.CONTEXT_UID]={};for(var l=0;l<d;l++){var h=new n.default;h._glTextures[this.CONTEXT_UID]=b;this.boundTextures[l]=f;this.emptyTextures[l]=h;this.bindTexture(null,l)}this.emit("context",c);this.resize(this.screen.width,this.screen.height)};h.prototype.render=
function(a,c,d,b,e){this.renderingToScreen=!c;this.emit("prerender");this.gl&&!this.gl.isContextLost()&&(this._nextTextureLocation=0,c||(this._lastObjectRendered=a),e||(e=a.parent,a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=e),this.bindRenderTexture(c,b),this.currentRenderer.start(),(void 0!==d?d:this.clearBeforeRender)&&this._activeRenderTarget.clear(),a.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender"))};h.prototype.setObjectRenderer=
function(a){this.currentRenderer!==a&&(this.currentRenderer.stop(),this.currentRenderer=a,this.currentRenderer.start())};h.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)};h.prototype.resize=function(a,c){d.default.prototype.resize.call(this,a,c);this.rootRenderTarget.resize(a,c);this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))};
h.prototype.setBlendMode=function(a){this.state.setBlendMode(a)};h.prototype.clear=function(a){this._activeRenderTarget.clear(a)};h.prototype.setTransform=function(a){this._activeRenderTarget.transform=a};h.prototype.clearRenderTexture=function(a,c){(a=a.baseTexture._glRenderTargets[this.CONTEXT_UID])&&a.clear(c);return this};h.prototype.bindRenderTexture=function(a,c){if(a){var d=a.baseTexture;d._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(d,0);this.unbindTexture(d);d=d._glRenderTargets[this.CONTEXT_UID];
d.setFrame(a.frame)}else d=this.rootRenderTarget;d.transform=c;this.bindRenderTarget(d);return this};h.prototype.bindRenderTarget=function(a){a!==this._activeRenderTarget&&(this._activeRenderTarget=a,a.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=a.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(a.stencilMaskStack));return this};h.prototype.bindShader=function(a,c){this._activeShader!==a&&(this._activeShader=a,a.bind(),!1!==c&&(a.uniforms.projectionMatrix=
this._activeRenderTarget.projectionMatrix.toArray(!0)));return this};h.prototype.bindTexture=function(a,c,d){a=a||this.emptyTextures[c];a=a.baseTexture||a;a.touched=this.textureGC.count;if(d)c=c||0;else{for(d=0;d<this.boundTextures.length;d++)if(this.boundTextures[d]===a)return d;void 0===c&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,c=this.boundTextures.length-this._nextTextureLocation-1)}d=this.gl;var b=a._glTextures[this.CONTEXT_UID];b?(this.boundTextures[c]=
a,d.activeTexture(d.TEXTURE0+c),d.bindTexture(d.TEXTURE_2D,b.texture)):this.textureManager.updateTexture(a,c);return c};h.prototype.unbindTexture=function(a){var c=this.gl;a=a.baseTexture||a;for(var d=0;d<this.boundTextures.length;d++)this.boundTextures[d]===a&&(this.boundTextures[d]=this.emptyTextures[d],c.activeTexture(c.TEXTURE0+d),c.bindTexture(c.TEXTURE_2D,this.emptyTextures[d]._glTextures[this.CONTEXT_UID].texture));return this};h.prototype.createVao=function(){return new A.default.VertexArrayObject(this.gl,
this.state.attribState)};h.prototype.bindVao=function(a){if(this._activeVao===a)return this;a?a.bind():this._activeVao&&this._activeVao.unbind();this._activeVao=a;return this};h.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer);this.bindVao(null);this._activeShader=null;this._activeRenderTarget=this.rootRenderTarget;for(var a=0;a<this.boundTextures.length;a++)this.boundTextures[a]=this.emptyTextures[a];this.rootRenderTarget.activate();this.state.resetToDefault();return this};h.prototype.handleContextLost=
function(a){a.preventDefault()};h.prototype.handleContextRestored=function(){this.textureManager.removeAll();this.filterManager.destroy(!0);this._initContext()};h.prototype.destroy=function(a){this.destroyPlugins();this.view.removeEventListener("webglcontextlost",this.handleContextLost);this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);this.textureManager.destroy();b.prototype.destroy.call(this,a);this.uid=0;this.maskManager.destroy();this.stencilManager.destroy();this.filterManager.destroy();
this._contextOptions=this.handleContextRestored=this.handleContextLost=this.currentRenderer=this.textureManager=this.filterManager=this.maskManager=null;this.gl.useProgram(null);this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext();this.gl=null};return h}(d.default);g.default=b;k.pluginTarget.mixin(b)},{"../../const":54,"../../textures/BaseTexture":120,"../../utils":133,"../SystemRenderer":84,"./TextureGarbageCollector":90,"./TextureManager":91,"./WebGLState":93,
"./managers/FilterManager":98,"./managers/MaskManager":99,"./managers/StencilManager":100,"./utils/ObjectRenderer":102,"./utils/RenderTarget":104,"./utils/mapWebGLDrawModesToPixi":107,"./utils/validateContext":108,"pixi-gl-core":22}],93:[function(b,k,g){g.__esModule=!0;var h=(b=b("./utils/mapWebGLBlendModesToPixi"))&&b.__esModule?b:{default:b};b=function(){function b(d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.activeState=new Uint8Array(16);this.defaultState=
new Uint8Array(16);this.defaultState[0]=1;this.stackIndex=0;this.stack=[];this.gl=d;this.maxAttribs=d.getParameter(d.MAX_VERTEX_ATTRIBS);this.attribState={tempAttribState:Array(this.maxAttribs),attribState:Array(this.maxAttribs)};this.blendModes=(0,h.default)(d);this.nativeVaoExtension=d.getExtension("OES_vertex_array_object")||d.getExtension("MOZ_OES_vertex_array_object")||d.getExtension("WEBKIT_OES_vertex_array_object")}b.prototype.push=function(){var d=this.stack[this.stackIndex];d||(d=this.stack[this.stackIndex]=
new Uint8Array(16));++this.stackIndex;for(var b=0;b<this.activeState.length;b++)d[b]=this.activeState[b]};b.prototype.pop=function(){var d=this.stack[--this.stackIndex];this.setState(d)};b.prototype.setState=function(d){this.setBlend(d[0]);this.setDepthTest(d[1]);this.setFrontFace(d[2]);this.setCullFace(d[3]);this.setBlendMode(d[4])};b.prototype.setBlend=function(d){d=d?1:0;this.activeState[0]!==d&&(this.activeState[0]=d,this.gl[d?"enable":"disable"](this.gl.BLEND))};b.prototype.setBlendMode=function(d){d!==
this.activeState[4]&&(this.activeState[4]=d,d=this.blendModes[d],2===d.length?this.gl.blendFunc(d[0],d[1]):this.gl.blendFuncSeparate(d[0],d[1],d[2],d[3]))};b.prototype.setDepthTest=function(d){d=d?1:0;this.activeState[1]!==d&&(this.activeState[1]=d,this.gl[d?"enable":"disable"](this.gl.DEPTH_TEST))};b.prototype.setCullFace=function(d){d=d?1:0;this.activeState[3]!==d&&(this.activeState[3]=d,this.gl[d?"enable":"disable"](this.gl.CULL_FACE))};b.prototype.setFrontFace=function(d){d=d?1:0;this.activeState[2]!==
d&&(this.activeState[2]=d,this.gl.frontFace(this.gl[d?"CW":"CCW"]))};b.prototype.resetAttributes=function(){for(var d=0;d<this.attribState.tempAttribState.length;d++)this.attribState.tempAttribState[d]=0;for(d=0;d<this.attribState.attribState.length;d++)this.attribState.attribState[d]=0;for(d=1;d<this.maxAttribs;d++)this.gl.disableVertexAttribArray(d)};b.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null);this.resetAttributes();for(var d=0;d<
this.activeState.length;++d)this.activeState[d]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1);this.setState(this.defaultState)};return b}();g.default=b},{"./utils/mapWebGLBlendModesToPixi":106}],94:[function(b,k,g){g.__esModule=!0;var h=function(){function a(a,c){for(var d=0;d<c.length;d++){var b=c[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}return function(c,d,b){d&&a(c.prototype,d);b&&a(c,b);return c}}(),m=(k=b("./extractUniformsFromSrc"))&&
k.__esModule?k:{default:k},d=b("../../../utils"),f=b("../../../const"),c=(b=b("../../../settings"))&&b.__esModule?b:{default:b},a={};b=function(){function b(e,q,n){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.vertexSrc=e||b.defaultVertexSrc;this.fragmentSrc=q||b.defaultFragmentSrc;this._blendMode=f.BLEND_MODES.NORMAL;this.uniformData=n||(0,m.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler");this.uniforms={};for(var l in this.uniformData)this.uniforms[l]=
this.uniformData[l].value,this.uniformData[l].type&&(this.uniformData[l].type=this.uniformData[l].type.toLowerCase());this.glShaders={};a[this.vertexSrc+this.fragmentSrc]||(a[this.vertexSrc+this.fragmentSrc]=(0,d.uid)());this.glShaderKey=a[this.vertexSrc+this.fragmentSrc];this.padding=4;this.resolution=c.default.FILTER_RESOLUTION;this.autoFit=this.enabled=!0}b.prototype.apply=function(a,c,d,b,e){a.applyFilter(this,c,d,b)};h(b,[{key:"blendMode",get:function(){return this._blendMode},set:function(a){this._blendMode=
a}}],[{key:"defaultVertexSrc",get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord ;\n}"}},{key:"defaultFragmentSrc",get:function(){return"varying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uSampler;\nuniform sampler2D filterSampler;\nvoid main(void){\n   vec4 masky = texture2D(filterSampler, vFilterCoord);\n   vec4 sample = texture2D(uSampler, vTextureCoord);\n   vec4 color;\n   if(mod(vFilterCoord.x, 1.0) > 0.5)\n   {\n     color = vec4(1.0, 0.0, 0.0, 1.0);\n   }\n   else\n   {\n     color = vec4(0.0, 1.0, 0.0, 1.0);\n   }\n   gl_FragColor = mix(sample, masky, 0.5);\n   gl_FragColor *= sample.a;\n}"}}]);
return b}();g.default=b},{"../../../const":54,"../../../settings":109,"../../../utils":133,"./extractUniformsFromSrc":95}],95:[function(b,k,g){function h(d){var b=/^(projectionMatrix|uSampler|filterArea|filterClamp)$/,c={};d=d.replace(/\s+/g," ").split(/\s*;\s*/);for(var a=0;a<d.length;a++){var e=d[a].trim();if(-1<e.indexOf("uniform")){var l=e.split(" ");e=l[1];var q=l[2],n=1;-1<q.indexOf("[")&&(l=q.split(/\[|]/),q=l[0],n*=Number(l[1]));q.match(b)||(c[q]={value:m(e,n),name:q,type:e})}}return c}g.__esModule=
!0;g.default=function(d,b,c){d=h(d,c);b=h(b,c);return Object.assign(d,b)};b=b("pixi-gl-core");var m=(b&&b.__esModule?b:{default:b}).default.shader.defaultValue},{"pixi-gl-core":22}],96:[function(b,k,g){g.__esModule=!0;g.calculateScreenSpaceMatrix=function(b,d,f){b=b.identity();b.translate(d.x/f.width,d.y/f.height);b.scale(f.width,f.height);return b};g.calculateNormalizedScreenSpaceMatrix=function(b,d,f){b=b.identity();b.translate(d.x/f.width,d.y/f.height);b.scale(f.width/d.width,f.height/d.height);
return b};g.calculateSpriteMatrix=function(b,d,f,c){var a=c._texture.orig;b=b.set(f.width,0,0,f.height,d.x,d.y);d=c.worldTransform.copy(h.Matrix.TEMP_MATRIX);d.invert();b.prepend(d);b.scale(1/a.width,1/a.height);b.translate(c.anchor.x,c.anchor.y);return b};var h=b("../../../math")},{"../../../math":78}],97:[function(b,k,g){function h(d,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,
{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}g.__esModule=!0;k=(k=b("../Filter"))&&k.__esModule?k:{default:k};var m=b("../../../../math");b("path");var d=(b=b("../../../../textures/TextureMatrix"))&&b.__esModule?b:{default:b};b=function(b){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var d=new m.Matrix;var f=b.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",
"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n");
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=!f||"object"!==typeof f&&"function"!==typeof f?this:f;a.renderable=!1;f.maskSprite=a;f.maskMatrix=d;return f}h(c,b);c.prototype.apply=function(a,c,b){var e=this.maskSprite,f=this.maskSprite.texture;f.valid&&(f.transform||(f.transform=new d.default(f,0)),f.transform.update(),this.uniforms.mask=f,this.uniforms.otherMatrix=a.calculateSpriteMatrix(this.maskMatrix,e).prepend(f.transform.mapCoord),this.uniforms.alpha=
e.worldAlpha,this.uniforms.maskClamp=f.transform.uClampFrame,a.applyFilter(this,c,b))};return c}(k.default);g.default=b},{"../../../../math":78,"../../../../textures/TextureMatrix":124,"../Filter":94,path:1}],98:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,
configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}function d(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function");}g.__esModule=!0;k=b("./WebGLManager");k=h(k);var f=b("../utils/RenderTarget"),c=h(f);f=b("../utils/Quad");var a=h(f),e=b("../../../math");f=b("../../../Shader");var l=h(f),q=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);c.default=a;return c}(b("../filters/filterTransforms"));
b=b("bit-twiddle");var n=h(b),p=function(){function a(){d(this,a);this.target=this.renderTarget=null;this.resolution=1;this.sourceFrame=new e.Rectangle;this.destinationFrame=new e.Rectangle;this.filters=[]}a.prototype.clear=function(){this.renderTarget=this.target=this.filters=null};return a}();b=function(b){function e(c){d(this,e);var f=b.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=!f||"object"!==typeof f&&"function"!==typeof f?this:
f;f.gl=f.renderer.gl;f.quad=new a.default(f.gl,c.state.attribState);f.shaderCache={};f.pool={};f.filterData=null;f.managedFilters=[];f.renderer.on("prerender",f.onPrerender,f);f._screenWidth=c.view.width;f._screenHeight=c.view.height;return f}m(e,b);e.prototype.pushFilter=function(a,c){var d=this.renderer,b=this.filterData;if(!b){var e=new p;e.sourceFrame=e.destinationFrame=this.renderer._activeRenderTarget.size;e.renderTarget=d._activeRenderTarget;this.filterData=this.renderer._activeRenderTarget.filterData=
b={index:0,stack:[e]}}e=b.stack[++b.index];var f=b.stack[0].destinationFrame;e||(e=b.stack[b.index]=new p);var l=a.filterArea&&0===a.filterArea.x&&0===a.filterArea.y&&a.filterArea.width===d.screen.width&&a.filterArea.height===d.screen.height,n=c[0].resolution,q=c[0].padding|0,h=l?d.screen:a.filterArea||a.getBounds(!0),g=e.sourceFrame,m=e.destinationFrame;g.x=(h.x*n|0)/n;g.y=(h.y*n|0)/n;g.width=(h.width*n|0)/n;g.height=(h.height*n|0)/n;l||(b.stack[0].renderTarget.transform||c[0].autoFit&&g.fit(f),
g.pad(q));m.width=g.width;m.height=g.height;b=this.getPotRenderTarget(d.gl,g.width,g.height,n);e.target=a;e.filters=c;e.resolution=n;e.renderTarget=b;b.setFrame(m,g);d.bindRenderTarget(b);b.clear()};e.prototype.popFilter=function(){var a=this.filterData,c=a.stack[a.index-1],d=a.stack[a.index];this.quad.map(d.renderTarget.size,d.sourceFrame).upload();var b=d.filters;if(1===b.length)b[0].apply(this,d.renderTarget,c.renderTarget,!1,d),this.freePotRenderTarget(d.renderTarget);else{var e=d.renderTarget,
f=this.getPotRenderTarget(this.renderer.gl,d.sourceFrame.width,d.sourceFrame.height,d.resolution);f.setFrame(d.destinationFrame,d.sourceFrame);f.clear();var l;for(l=0;l<b.length-1;++l){b[l].apply(this,e,f,!0,d);var n=e;e=f;f=n}b[l].apply(this,e,c.renderTarget,!1,d);this.freePotRenderTarget(e);this.freePotRenderTarget(f)}d.clear();a.index--;0===a.index&&(this.filterData=null)};e.prototype.applyFilter=function(a,c,d,b){var e=this.renderer,f=e.gl,n=a.glShaders[e.CONTEXT_UID];n||(a.glShaderKey?(n=this.shaderCache[a.glShaderKey],
n||(n=new l.default(this.gl,a.vertexSrc,a.fragmentSrc),a.glShaders[e.CONTEXT_UID]=this.shaderCache[a.glShaderKey]=n,this.managedFilters.push(a))):(n=a.glShaders[e.CONTEXT_UID]=new l.default(this.gl,a.vertexSrc,a.fragmentSrc),this.managedFilters.push(a)),e.bindVao(null),this.quad.initVao(n));e.bindVao(this.quad.vao);e.bindRenderTarget(d);b&&(f.disable(f.SCISSOR_TEST),e.clear(),f.enable(f.SCISSOR_TEST));d===e.maskManager.scissorRenderTarget&&e.maskManager.pushScissorMask(null,e.maskManager.scissorData);
e.bindShader(n);d=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=d;this.syncUniforms(n,a);e.state.setBlendMode(a.blendMode);f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,c.texture.texture);this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0);f.bindTexture(f.TEXTURE_2D,d._glTextures[this.renderer.CONTEXT_UID].texture)};e.prototype.syncUniforms=function(a,c){var d=c.uniformData;c=c.uniforms;var b=1,e=void 0;if(a.uniforms.filterArea){e=this.filterData.stack[this.filterData.index];
var f=a.uniforms.filterArea;f[0]=e.renderTarget.size.width;f[1]=e.renderTarget.size.height;f[2]=e.sourceFrame.x;f[3]=e.sourceFrame.y;a.uniforms.filterArea=f}a.uniforms.filterClamp&&(e=e||this.filterData.stack[this.filterData.index],f=a.uniforms.filterClamp,f[0]=0,f[1]=0,f[2]=(e.sourceFrame.width-1)/e.renderTarget.size.width,f[3]=(e.sourceFrame.height-1)/e.renderTarget.size.height,a.uniforms.filterClamp=f);for(var l in d)e=d[l].type,"sampler2d"===e&&0!==c[l]?(c[l].baseTexture?a.uniforms[l]=this.renderer.bindTexture(c[l].baseTexture,
b):(a.uniforms[l]=b,e=this.renderer.gl,this.renderer.boundTextures[b]=this.renderer.emptyTextures[b],e.activeTexture(e.TEXTURE0+b),c[l].texture.bind()),b++):"mat3"===e?a.uniforms[l]=void 0!==c[l].a?c[l].toArray(!0):c[l]:"vec2"===e?void 0!==c[l].x?(e=a.uniforms[l]||new Float32Array(2),e[0]=c[l].x,e[1]=c[l].y,a.uniforms[l]=e):a.uniforms[l]=c[l]:"float"===e?a.uniforms.data[l].value!==d[l]&&(a.uniforms[l]=c[l]):a.uniforms[l]=c[l]};e.prototype.getRenderTarget=function(a,c){a=this.filterData.stack[this.filterData.index];
c=this.getPotRenderTarget(this.renderer.gl,a.sourceFrame.width,a.sourceFrame.height,c||a.resolution);c.setFrame(a.destinationFrame,a.sourceFrame);return c};e.prototype.returnRenderTarget=function(a){this.freePotRenderTarget(a)};e.prototype.calculateScreenSpaceMatrix=function(a){var c=this.filterData.stack[this.filterData.index];return q.calculateScreenSpaceMatrix(a,c.sourceFrame,c.renderTarget.size)};e.prototype.calculateNormalizedScreenSpaceMatrix=function(a){var c=this.filterData.stack[this.filterData.index];
return q.calculateNormalizedScreenSpaceMatrix(a,c.sourceFrame,c.renderTarget.size,c.destinationFrame)};e.prototype.calculateSpriteMatrix=function(a,c){var d=this.filterData.stack[this.filterData.index];return q.calculateSpriteMatrix(a,d.sourceFrame,d.renderTarget.size,c)};e.prototype.destroy=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,c=this.renderer,d=this.managedFilters;c.off("prerender",this.onPrerender,this);for(var b=0;b<d.length;b++)a||d[b].glShaders[c.CONTEXT_UID].destroy(),
delete d[b].glShaders[c.CONTEXT_UID];this.shaderCache={};a?this.pool={}:this.emptyPool()};e.prototype.getPotRenderTarget=function(a,d,b,e){var f="screen";d*=e;b*=e;if(d!==this._screenWidth||b!==this._screenHeight)d=n.default.nextPow2(d),b=n.default.nextPow2(b),f=(d&65535)<<16|b&65535;this.pool[f]||(this.pool[f]=[]);var l=this.pool[f].pop();if(!l){var p=this.renderer.boundTextures[0];a.activeTexture(a.TEXTURE0);l=new c.default(a,d,b,null,1);a.bindTexture(a.TEXTURE_2D,p._glTextures[this.renderer.CONTEXT_UID].texture)}l.resolution=
e;l.defaultFrame.width=l.size.width=d/e;l.defaultFrame.height=l.size.height=b/e;l.filterPoolKey=f;return l};e.prototype.emptyPool=function(){for(var a in this.pool){var c=this.pool[a];if(c)for(var d=0;d<c.length;d++)c[d].destroy(!0)}this.pool={}};e.prototype.freePotRenderTarget=function(a){this.pool[a.filterPoolKey].push(a)};e.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width;
this._screenHeight=this.renderer.view.height;var a=this.pool.screen;if(a)for(var c=0;c<a.length;c++)a[c].destroy(!0);this.pool.screen=[]}};return e}(k.default);g.default=b},{"../../../Shader":52,"../../../math":78,"../filters/filterTransforms":96,"../utils/Quad":103,"../utils/RenderTarget":104,"./WebGLManager":101,"bit-twiddle":9}],99:[function(b,k,g){function h(d,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);d.prototype=
Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}g.__esModule=!0;k=(k=b("./WebGLManager"))&&k.__esModule?k:{default:k};var m=(b=b("../filters/spriteMask/SpriteMaskFilter"))&&b.__esModule?b:{default:b};b=function(d){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=d.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.scissor=!1;c.scissorData=null;c.scissorRenderTarget=null;c.enableScissor=!0;c.alphaMaskPool=[];c.alphaMaskIndex=0;return c}h(b,d);b.prototype.pushMask=function(c,a){if(a.texture)this.pushSpriteMask(c,a);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&a.isFastRect()){var d=a.worldTransform;d=Math.atan2(d.b,d.a);d=Math.round(180/Math.PI*d);d%90?this.pushStencilMask(a):
this.pushScissorMask(c,a)}else this.pushStencilMask(a)};b.prototype.popMask=function(c,a){a.texture?this.popSpriteMask(c,a):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(c,a):this.popStencilMask(c,a)};b.prototype.pushSpriteMask=function(c,a){var d=this.alphaMaskPool[this.alphaMaskIndex];d||(d=this.alphaMaskPool[this.alphaMaskIndex]=[new m.default(a)]);d[0].resolution=this.renderer.resolution;d[0].maskSprite=a;c.filterArea=a.getBounds(!0);this.renderer.filterManager.pushFilter(c,
d);this.alphaMaskIndex++};b.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter();this.alphaMaskIndex--};b.prototype.pushStencilMask=function(c){this.renderer.currentRenderer.stop();this.renderer.stencilManager.pushStencil(c)};b.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop();this.renderer.stencilManager.popStencil()};b.prototype.pushScissorMask=function(c,a){a.renderable=!0;c=this.renderer._activeRenderTarget;var d=a.getBounds();d.fit(c.size);a.renderable=
!1;this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var b=this.renderer.resolution;this.renderer.gl.scissor(d.x*b,(c.root?c.size.height-d.y-d.height:d.y)*b,d.width*b,d.height*b);this.scissorRenderTarget=c;this.scissorData=a;this.scissor=!0};b.prototype.popScissorMask=function(){this.scissorData=this.scissorRenderTarget=null;this.scissor=!1;var c=this.renderer.gl;c.disable(c.SCISSOR_TEST)};return b}(k.default);g.default=b},{"../filters/spriteMask/SpriteMaskFilter":97,"./WebGLManager":101}],100:[function(b,
k,g){function h(d,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}g.__esModule=!0;var m=(b=b("./WebGLManager"))&&b.__esModule?b:{default:b};b=function(d){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
c=d.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.stencilMaskStack=null;return c}h(b,d);b.prototype.setMaskStack=function(c){this.stencilMaskStack=c;var a=this.renderer.gl;0===c.length?a.disable(a.STENCIL_TEST):a.enable(a.STENCIL_TEST)};b.prototype.pushStencil=function(c){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);this.renderer._activeRenderTarget.attachStencilBuffer();
var a=this.renderer.gl,d=this.stencilMaskStack.length;0===d&&a.enable(a.STENCIL_TEST);this.stencilMaskStack.push(c);a.colorMask(!1,!1,!1,!1);a.stencilFunc(a.EQUAL,d,this._getBitwiseMask());a.stencilOp(a.KEEP,a.KEEP,a.INCR);this.renderer.plugins.graphics.render(c);this._useCurrent()};b.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var c=this.renderer.gl,a=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(c.disable(c.STENCIL_TEST),c.clear(c.STENCIL_BUFFER_BIT),
c.clearStencil(0)):(c.colorMask(!1,!1,!1,!1),c.stencilOp(c.KEEP,c.KEEP,c.DECR),this.renderer.plugins.graphics.render(a),this._useCurrent())};b.prototype._useCurrent=function(){var c=this.renderer.gl;c.colorMask(!0,!0,!0,!0);c.stencilFunc(c.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask());c.stencilOp(c.KEEP,c.KEEP,c.KEEP)};b.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1};b.prototype.destroy=function(){m.default.prototype.destroy.call(this);this.stencilMaskStack.stencilStack=
null};return b}(m.default);g.default=b},{"./WebGLManager":101}],101:[function(b,k,g){g.__esModule=!0;b=function(){function b(h){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.renderer=h;this.renderer.on("context",this.onContextChange,this)}b.prototype.onContextChange=function(){};b.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this);this.renderer=null};return b}();g.default=b},{}],102:[function(b,k,g){function h(b,d){if("function"!==
typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);b.prototype=Object.create(d&&d.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(b,d):b.__proto__=d)}g.__esModule=!0;b=b("../managers/WebGLManager");b=function(b){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var f=b.apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!f||"object"!==typeof f&&"function"!==typeof f?this:f}h(d,b);d.prototype.start=function(){};d.prototype.stop=function(){this.flush()};d.prototype.flush=function(){};d.prototype.render=function(d){};return d}((b&&b.__esModule?b:{default:b}).default);g.default=b},{"../managers/WebGLManager":101}],103:[function(b,k,g){g.__esModule=!0;var h=(k=b("pixi-gl-core"))&&k.__esModule?k:{default:k},m=(b=b("../../../utils/createIndicesForQuads"))&&b.__esModule?b:{default:b};b=function(){function d(b,c){if(!(this instanceof
d))throw new TypeError("Cannot call a class as a function");this.gl=b;this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.interleaved=new Float32Array(16);for(var a=0;4>a;a++)this.interleaved[4*a]=this.vertices[2*a],this.interleaved[4*a+1]=this.vertices[2*a+1],this.interleaved[4*a+2]=this.uvs[2*a],this.interleaved[4*a+3]=this.uvs[2*a+1];this.indices=(0,m.default)(1);this.vertexBuffer=h.default.GLBuffer.createVertexBuffer(b,this.interleaved,b.STATIC_DRAW);
this.indexBuffer=h.default.GLBuffer.createIndexBuffer(b,this.indices,b.STATIC_DRAW);this.vao=new h.default.VertexArrayObject(b,c)}d.prototype.initVao=function(d){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,d.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,d.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)};d.prototype.map=function(d,c){var a=0,b=0;this.uvs[0]=a;this.uvs[1]=b;this.uvs[2]=a+c.width/d.width;this.uvs[3]=b;this.uvs[4]=a+c.width/
d.width;this.uvs[5]=b+c.height/d.height;this.uvs[6]=a;this.uvs[7]=b+c.height/d.height;a=c.x;b=c.y;this.vertices[0]=a;this.vertices[1]=b;this.vertices[2]=a+c.width;this.vertices[3]=b;this.vertices[4]=a+c.width;this.vertices[5]=b+c.height;this.vertices[6]=a;this.vertices[7]=b+c.height;return this};d.prototype.upload=function(){for(var d=0;4>d;d++)this.interleaved[4*d]=this.vertices[2*d],this.interleaved[4*d+1]=this.vertices[2*d+1],this.interleaved[4*d+2]=this.uvs[2*d],this.interleaved[4*d+3]=this.uvs[2*
d+1];this.vertexBuffer.upload(this.interleaved);return this};d.prototype.destroy=function(){var d=this.gl;d.deleteBuffer(this.vertexBuffer);d.deleteBuffer(this.indexBuffer)};return d}();g.default=b},{"../../../utils/createIndicesForQuads":131,"pixi-gl-core":22}],104:[function(b,k,g){g.__esModule=!0;var h=b("../../../math"),m=b("../../../const"),d=(k=b("../../../settings"))&&k.__esModule?k:{default:k},f=b("pixi-gl-core");b=function(){function c(a,b,l,q,n,p){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
this.gl=a;this.texture=this.frameBuffer=null;this.clearColor=[0,0,0,0];this.size=new h.Rectangle(0,0,1,1);this.resolution=n||d.default.RESOLUTION;this.projectionMatrix=new h.Matrix;this.frame=this.transform=null;this.defaultFrame=new h.Rectangle;this.stencilBuffer=this.sourceFrame=this.destinationFrame=null;this.stencilMaskStack=[];this.filterData=null;this.filterPoolKey="";this.scaleMode=void 0!==q?q:d.default.SCALE_MODE;(this.root=p)?(this.frameBuffer=new f.GLFramebuffer(a,100,100),this.frameBuffer.framebuffer=
null):(this.frameBuffer=f.GLFramebuffer.createRGBA(a,100,100),this.scaleMode===m.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture);this.setFrame();this.resize(b,l)}c.prototype.clear=function(a){a=a||this.clearColor;this.frameBuffer.clear(a[0],a[1],a[2],a[3])};c.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()};c.prototype.setFrame=function(a,c){this.destinationFrame=
a||this.destinationFrame||this.defaultFrame;this.sourceFrame=c||this.sourceFrame||this.destinationFrame};c.prototype.activate=function(){var a=this.gl;this.frameBuffer.bind();this.calculateProjection(this.destinationFrame,this.sourceFrame);this.transform&&this.projectionMatrix.append(this.transform);this.destinationFrame!==this.sourceFrame?(a.enable(a.SCISSOR_TEST),a.scissor(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*
this.resolution|0)):a.disable(a.SCISSOR_TEST);a.viewport(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)};c.prototype.calculateProjection=function(a,c){var d=this.projectionMatrix;c=c||a;d.identity();this.root?(d.a=1/a.width*2,d.d=-1/a.height*2,d.tx=-1-c.x*d.a,d.ty=1-c.y*d.d):(d.a=1/a.width*2,d.d=1/a.height*2,d.tx=-1-c.x*d.a,d.ty=-1-c.y*d.d)};c.prototype.resize=function(a,c){a|=0;c|=0;if(this.size.width!==
a||this.size.height!==c)this.size.width=a,this.size.height=c,this.defaultFrame.width=a,this.defaultFrame.height=c,this.frameBuffer.resize(a*this.resolution,c*this.resolution),this.calculateProjection(this.frame||this.size)};c.prototype.destroy=function(){this.frameBuffer.destroy();this.texture=this.frameBuffer=null};return c}();g.default=b},{"../../../const":54,"../../../math":78,"../../../settings":109,"pixi-gl-core":22}],105:[function(b,k,g){function h(d){for(var c="",a=0;a<d;++a)0<a&&(c+="\nelse "),
a<d-1&&(c+="if(test == "+a+".0){}");return c}g.__esModule=!0;g.default=function(b,c){var a=!c;if(0===b)throw Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");a&&(c=document.createElement("canvas"),c.width=1,c.height=1,c=m.default.createContext(c));for(var e=c.createShader(c.FRAGMENT_SHADER);;){var f=d.replace(/%forloop%/gi,h(b));c.shaderSource(e,f);c.compileShader(e);if(c.getShaderParameter(e,c.COMPILE_STATUS))break;else b=b/2|0}a&&c.getExtension("WEBGL_lose_context")&&c.getExtension("WEBGL_lose_context").loseContext();
return b};var m=(b=b("pixi-gl-core"))&&b.__esModule?b:{default:b},d="precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}"},{"pixi-gl-core":22}],106:[function(b,k,g){g.__esModule=!0;g.default=function(b){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];d[h.BLEND_MODES.NORMAL]=[b.ONE,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.ADD]=[b.ONE,b.DST_ALPHA];d[h.BLEND_MODES.MULTIPLY]=[b.DST_COLOR,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.SCREEN]=[b.ONE,
b.ONE_MINUS_SRC_COLOR];d[h.BLEND_MODES.OVERLAY]=[b.ONE,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.DARKEN]=[b.ONE,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.LIGHTEN]=[b.ONE,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.COLOR_DODGE]=[b.ONE,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.COLOR_BURN]=[b.ONE,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.HARD_LIGHT]=[b.ONE,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.SOFT_LIGHT]=[b.ONE,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.DIFFERENCE]=[b.ONE,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.EXCLUSION]=
[b.ONE,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.HUE]=[b.ONE,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.SATURATION]=[b.ONE,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.COLOR]=[b.ONE,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.LUMINOSITY]=[b.ONE,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.NORMAL_NPM]=[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA];d[h.BLEND_MODES.ADD_NPM]=[b.SRC_ALPHA,b.DST_ALPHA,b.ONE,b.DST_ALPHA];d[h.BLEND_MODES.SCREEN_NPM]=[b.SRC_ALPHA,b.ONE_MINUS_SRC_COLOR,b.ONE,b.ONE_MINUS_SRC_COLOR];
return d};var h=b("../../../const")},{"../../../const":54}],107:[function(b,k,g){g.__esModule=!0;g.default=function(b){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};d[h.DRAW_MODES.POINTS]=b.POINTS;d[h.DRAW_MODES.LINES]=b.LINES;d[h.DRAW_MODES.LINE_LOOP]=b.LINE_LOOP;d[h.DRAW_MODES.LINE_STRIP]=b.LINE_STRIP;d[h.DRAW_MODES.TRIANGLES]=b.TRIANGLES;d[h.DRAW_MODES.TRIANGLE_STRIP]=b.TRIANGLE_STRIP;d[h.DRAW_MODES.TRIANGLE_FAN]=b.TRIANGLE_FAN;return d};var h=b("../../../const")},{"../../../const":54}],
108:[function(b,k,g){g.__esModule=!0;g.default=function(b){b.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],109:[function(b,k,g){g.__esModule=!0;k=(k=b("./utils/maxRecommendedTextures"))&&k.__esModule?k:{default:k};b=(b=b("./utils/canUploadSameBuffer"))&&b.__esModule?b:{default:b};g.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,k.default)(32),SPRITE_BATCH_SIZE:4096,
RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,b.default)(),MESH_CANVAS_PADDING:0}},{"./utils/canUploadSameBuffer":130,"./utils/maxRecommendedTextures":135}],
110:[function(b,k,g){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;var m=function(){function a(a,c){for(var d=0;d<c.length;d++){var b=c[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);
Object.defineProperty(a,b.key,b)}}return function(c,d,b){d&&a(c.prototype,d);b&&a(c,b);return c}}(),d=b("../math"),f=b("../utils"),c=b("../const"),a=(k=b("../textures/Texture"))&&k.__esModule?k:{default:k};b=(b=b("../display/Container"))&&b.__esModule?b:{default:b};var e=new d.Point;b=function(b){function l(e){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");var f=b.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
f=!f||"object"!==typeof f&&"function"!==typeof f?this:f;f._anchor=new d.ObservablePoint(f._onAnchorUpdate,f,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0);f._texture=null;f._width=0;f._height=0;f._tint=null;f._tintRGB=null;f.tint=16777215;f.blendMode=c.BLEND_MODES.NORMAL;f.shader=null;f.cachedTint=16777215;f.texture=e||a.default.EMPTY;f.vertexData=new Float32Array(8);f.vertexTrimmedData=null;f._transformID=-1;f._textureID=-1;f._transformTrimmedID=-1;f._textureTrimmedID=-1;f.pluginName="sprite";return f}
h(l,b);l.prototype._onTextureUpdate=function(){this._textureTrimmedID=this._textureID=-1;this.cachedTint=16777215;this._width&&(this.scale.x=(0,f.sign)(this.scale.x)*this._width/this._texture.orig.width);this._height&&(this.scale.y=(0,f.sign)(this.scale.y)*this._height/this._texture.orig.height)};l.prototype._onAnchorUpdate=function(){this._transformTrimmedID=this._transformID=-1};l.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=
this.transform._worldID;this._textureID=this._texture._updateID;var a=this._texture,c=this.transform.worldTransform,d=c.a,b=c.b,e=c.c,f=c.d,l=c.tx;c=c.ty;var q=this.vertexData,h=a.trim,g=a.orig,m=this._anchor;if(h){var k=h.x-m._x*g.width;a=k+h.width;m=h.y-m._y*g.height;h=m+h.height}else k=-m._x*g.width,a=k+g.width,m=-m._y*g.height,h=m+g.height;q[0]=d*k+e*m+l;q[1]=f*m+b*k+c;q[2]=d*a+e*m+l;q[3]=f*m+b*a+c;q[4]=d*a+e*h+l;q[5]=f*h+b*a+c;q[6]=d*k+e*h+l;q[7]=f*h+b*k+c}};l.prototype.calculateTrimmedVertices=
function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID;this._textureTrimmedID=this._texture._updateID;var a=this.vertexTrimmedData,c=this._texture.orig,d=this._anchor,b=this.transform.worldTransform,e=b.a,f=b.b,l=b.c,q=b.d,h=b.tx;b=b.ty;var g=-d._x*c.width,m=g+c.width;d=-d._y*c.height;c=d+c.height;a[0]=e*g+l*
d+h;a[1]=q*d+f*g+b;a[2]=e*m+l*d+h;a[3]=q*d+f*m+b;a[4]=e*m+l*c+h;a[5]=q*c+f*m+b;a[6]=e*g+l*c+h;a[7]=q*c+f*g+b};l.prototype._renderWebGL=function(a){this.calculateVertices();a.setObjectRenderer(a.plugins[this.pluginName]);a.plugins[this.pluginName].render(this)};l.prototype._renderCanvas=function(a){a.plugins[this.pluginName].render(this)};l.prototype._calculateBounds=function(){var a=this._texture.trim,c=this._texture.orig;!a||a.width===c.width&&a.height===c.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):
(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))};l.prototype.getLocalBounds=function(a){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),a||(this._localBoundsRect||(this._localBoundsRect=new d.Rectangle),a=this._localBoundsRect),this._bounds.getRectangle(a)):
b.prototype.getLocalBounds.call(this,a)};l.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,e);var c=this._texture.orig.width;a=this._texture.orig.height;var d=-c*this.anchor.x;return e.x>=d&&e.x<d+c&&(c=-a*this.anchor.y,e.y>=c&&e.y<c+a)?!0:!1};l.prototype.destroy=function(a){b.prototype.destroy.call(this,a);this._texture.off("update",this._onTextureUpdate,this);this._anchor=null;("boolean"===typeof a?a:a&&a.texture)&&this._texture.destroy(!!("boolean"===typeof a?a:a&&a.baseTexture));
this.shader=this._texture=null};l.from=function(c){return new l(a.default.from(c))};l.fromFrame=function(a){var c=f.TextureCache[a];if(!c)throw Error('The frameId "'+a+'" does not exist in the texture cache');return new l(c)};l.fromImage=function(c,d,b){return new l(a.default.fromImage(c,d,b))};m(l,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(a){var c=(0,f.sign)(this.scale.x)||1;this.scale.x=c*a/this._texture.orig.width;this._width=a}},{key:"height",
get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(a){var c=(0,f.sign)(this.scale.y)||1;this.scale.y=c*a/this._texture.orig.height;this._height=a}},{key:"anchor",get:function(){return this._anchor},set:function(a){this._anchor.copy(a)}},{key:"tint",get:function(){return this._tint},set:function(a){this._tint=a;this._tintRGB=(a>>16)+(a&65280)+((a&255)<<16)}},{key:"texture",get:function(){return this._texture},set:function(c){if(this._texture!==c&&(this._texture=c||
a.default.EMPTY,this.cachedTint=16777215,this._textureTrimmedID=this._textureID=-1,c))if(c.baseTexture.hasLoaded)this._onTextureUpdate();else c.once("update",this._onTextureUpdate,this)}}]);return l}(b.default);g.default=b},{"../const":54,"../display/Container":56,"../math":78,"../textures/Texture":123,"../utils":133}],111:[function(b,k,g){g.__esModule=!0;k=(k=b("../../renderers/canvas/CanvasRenderer"))&&k.__esModule?k:{default:k};var h=b("../../const"),m=b("../../math"),d=(b=b("./CanvasTinter"))&&
b.__esModule?b:{default:b},f=new m.Matrix;b=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.renderer=a}c.prototype.render=function(a){var c=a._texture,b=this.renderer,q=c._frame.width,n=c._frame.height,p=a.transform.worldTransform;if(!(0>=c.orig.width||0>=c.orig.height)&&c.baseTexture.source&&(b.setBlendMode(a.blendMode),c.valid)){b.context.globalAlpha=a.worldAlpha;var g=c.baseTexture.scaleMode===h.SCALE_MODES.LINEAR;b.smoothProperty&&
b.context[b.smoothProperty]!==g&&(b.context[b.smoothProperty]=g);if(c.trim){g=c.trim.width/2+c.trim.x-a.anchor.x*c.orig.width;var k=c.trim.height/2+c.trim.y-a.anchor.y*c.orig.height}else g=(.5-a.anchor.x)*c.orig.width,k=(.5-a.anchor.y)*c.orig.height;c.rotate&&(p.copy(f),p=f,m.GroupD8.matrixAppendRotationInv(p,c.rotate,g,k),k=g=0);g-=q/2;k-=n/2;b.roundPixels?(b.context.setTransform(p.a,p.b,p.c,p.d,p.tx*b.resolution|0,p.ty*b.resolution|0),g|=0,k|=0):b.context.setTransform(p.a,p.b,p.c,p.d,p.tx*b.resolution,
p.ty*b.resolution);p=c.baseTexture.resolution;if(16777215!==a.tint){if(a.cachedTint!==a.tint||a.tintedTexture.tintId!==a._texture._updateID)a.cachedTint=a.tint,a.tintedTexture=d.default.getTintedTexture(a,a.tint);b.context.drawImage(a.tintedTexture,0,0,q*p,n*p,g*b.resolution,k*b.resolution,q*b.resolution,n*b.resolution)}else b.context.drawImage(c.baseTexture.source,c._frame.x*p,c._frame.y*p,q*p,n*p,g*b.resolution,k*b.resolution,q*b.resolution,n*b.resolution)}};c.prototype.destroy=function(){this.renderer=
null};return c}();g.default=b;k.default.registerPlugin("sprite",b)},{"../../const":54,"../../math":78,"../../renderers/canvas/CanvasRenderer":85,"./CanvasTinter":112}],112:[function(b,k,g){g.__esModule=!0;var h=b("../../utils");b=(b=b("../../renderers/canvas/utils/canUseNewCanvasBlendModes"))&&b.__esModule?b:{default:b};var m={getTintedTexture:function(d,b){d=d._texture;b=m.roundColor(b);var c="#"+("00000"+(b|0).toString(16)).substr(-6);d.tintCache=d.tintCache||{};var a=d.tintCache[c];if(a){if(a.tintId===
d._updateID)return d.tintCache[c];a=d.tintCache[c]}else a=m.canvas||document.createElement("canvas");m.tintMethod(d,b,a);a.tintId=d._updateID;m.convertTintToImage?(b=new Image,b.src=a.toDataURL(),d.tintCache[c]=b):(d.tintCache[c]=a,m.canvas=null);return a},tintWithMultiply:function(d,b,c){var a=c.getContext("2d"),e=d._frame.clone(),f=d.baseTexture.resolution;e.x*=f;e.y*=f;e.width*=f;e.height*=f;c.width=Math.ceil(e.width);c.height=Math.ceil(e.height);a.save();a.fillStyle="#"+("00000"+(b|0).toString(16)).substr(-6);
a.fillRect(0,0,e.width,e.height);a.globalCompositeOperation="multiply";a.drawImage(d.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height);a.globalCompositeOperation="destination-atop";a.drawImage(d.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height);a.restore()},tintWithOverlay:function(d,b,c){var a=c.getContext("2d"),e=d._frame.clone(),f=d.baseTexture.resolution;e.x*=f;e.y*=f;e.width*=f;e.height*=f;c.width=Math.ceil(e.width);c.height=Math.ceil(e.height);a.save();a.globalCompositeOperation=
"copy";a.fillStyle="#"+("00000"+(b|0).toString(16)).substr(-6);a.fillRect(0,0,e.width,e.height);a.globalCompositeOperation="destination-atop";a.drawImage(d.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height);a.restore()},tintWithPerPixel:function(d,b,c){var a=c.getContext("2d"),e=d._frame.clone(),f=d.baseTexture.resolution;e.x*=f;e.y*=f;e.width*=f;e.height*=f;c.width=Math.ceil(e.width);c.height=Math.ceil(e.height);a.save();a.globalCompositeOperation="copy";a.drawImage(d.baseTexture.source,
e.x,e.y,e.width,e.height,0,0,e.width,e.height);a.restore();c=(0,h.hex2rgb)(b);d=c[0];b=c[1];c=c[2];e=a.getImageData(0,0,e.width,e.height);f=e.data;for(var q=0;q<f.length;q+=4)f[q+0]*=d,f[q+1]*=b,f[q+2]*=c;a.putImageData(e,0,0)},roundColor:function(d){var b=m.cacheStepsPerColorChannel;d=(0,h.hex2rgb)(d);d[0]=Math.min(255,d[0]/b*b);d[1]=Math.min(255,d[1]/b*b);d[2]=Math.min(255,d[2]/b*b);return(0,h.rgb2hex)(d)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,b.default)(),tintMethod:0};
m.tintMethod=m.canUseMultiply?m.tintWithMultiply:m.tintWithPerPixel;g.default=m},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":88,"../../utils":133}],113:[function(b,k,g){g.__esModule=!0;b=function(){function b(h){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.vertices=new ArrayBuffer(h);this.float32View=new Float32Array(this.vertices);this.uint32View=new Uint32Array(this.vertices)}b.prototype.destroy=function(){this.colors=this.uvs=this.positions=
this.vertices=null};return b}();g.default=b},{}],114:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;k=b("../../renderers/webgl/utils/ObjectRenderer");
k=h(k);var d=b("../../renderers/webgl/WebGLRenderer");d=h(d);var f=b("../../utils/createIndicesForQuads"),c=h(f);f=b("./generateMultiTextureShader");var a=h(f);f=b("../../renderers/webgl/utils/checkMaxIfStatmentsInShader");var e=h(f);f=b("./BatchBuffer");var l=h(f);f=b("../../settings");var q=h(f),n=b("../../utils");f=b("pixi-gl-core");var p=h(f);b=b("bit-twiddle");var x=h(b),t=0,v=0;b=function(d){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");a=d.call(this,
a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.vertSize=5;a.vertByteSize=4*a.vertSize;a.size=q.default.SPRITE_BATCH_SIZE;a.buffers=[];for(var e=1;e<=x.default.nextPow2(a.size);e*=2)a.buffers.push(new l.default(4*e*a.vertByteSize));a.indices=(0,c.default)(a.size);a.shader=null;a.currentIndex=0;a.groups=[];for(e=0;e<a.size;e++)a.groups[e]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};
a.sprites=[];a.vertexBuffers=[];a.vaos=[];a.vaoMax=2;a.vertexCount=0;a.renderer.on("prerender",a.onPrerender,a);return a}m(b,d);b.prototype.onContextChange=function(){var c=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS),q.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,e.default)(this.MAX_TEXTURES,c));this.shader=(0,a.default)(c,this.MAX_TEXTURES);this.indexBuffer=p.default.GLBuffer.createIndexBuffer(c,this.indices,
c.STATIC_DRAW);this.renderer.bindVao(null);for(var d=this.shader.attributes,b=0;b<this.vaoMax;b++){var f=this.vertexBuffers[b]=p.default.GLBuffer.createVertexBuffer(c,null,c.STREAM_DRAW),l=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(f,d.aVertexPosition,c.FLOAT,!1,this.vertByteSize,0).addAttribute(f,d.aTextureCoord,c.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(f,d.aColor,c.UNSIGNED_BYTE,!0,this.vertByteSize,12);d.aTextureId&&l.addAttribute(f,d.aTextureId,c.FLOAT,!1,this.vertByteSize,
16);this.vaos[b]=l}this.vao=this.vaos[0];this.currentBlendMode=99999;this.boundTextures=Array(this.MAX_TEXTURES)};b.prototype.onPrerender=function(){this.vertexCount=0};b.prototype.render=function(a){this.currentIndex>=this.size&&this.flush();a._texture._uvs&&(this.sprites[this.currentIndex++]=a)};b.prototype.flush=function(){if(0!==this.currentIndex){var a=this.renderer.gl,c=this.MAX_TEXTURES,d=x.default.nextPow2(this.currentIndex);d=x.default.log2(d);var b=this.buffers[d],e=this.sprites;d=this.groups;
var f=b.float32View,l=b.uint32View,h=this.boundTextures,g=this.renderer.boundTextures,m=this.renderer.textureGC.count,k=0,w=void 0,A=1,N=0,P=d[0],W=n.premultiplyBlendMode[e[0]._texture.baseTexture.premultipliedAlpha?1:0][e[0].blendMode];P.textureCount=0;P.start=0;P.blend=W;t++;var G;for(G=0;G<c;++G){var M=g[G];M._enabled===t?h[G]=this.renderer.emptyTextures[G]:(h[G]=M,M._virtalBoundId=G,M._enabled=t)}t++;for(G=0;G<this.currentIndex;++G){var S=e[G];e[G]=null;M=S._texture.baseTexture;var L=n.premultiplyBlendMode[Number(M.premultipliedAlpha)][S.blendMode];
W!==L&&(W=L,w=null,N=c,t++);if(w!==M&&(w=M,M._enabled!==t)){N===c&&(t++,P.size=G-P.start,N=0,P=d[A++],P.blend=W,P.textureCount=0,P.start=G);M.touched=m;if(-1===M._virtalBoundId)for(L=0;L<c;++L){var Q=(L+v)%c;var R=h[Q];if(R._enabled!==t){v++;R._virtalBoundId=-1;M._virtalBoundId=Q;h[Q]=M;break}}M._enabled=t;P.textureCount++;P.ids[N]=M._virtalBoundId;P.textures[N++]=M}L=S.vertexData;Q=S._texture._uvs.uvsUint32;this.renderer.roundPixels?(R=this.renderer.resolution,f[k]=(L[0]*R|0)/R,f[k+1]=(L[1]*R|0)/
R,f[k+5]=(L[2]*R|0)/R,f[k+6]=(L[3]*R|0)/R,f[k+10]=(L[4]*R|0)/R,f[k+11]=(L[5]*R|0)/R,f[k+15]=(L[6]*R|0)/R,f[k+16]=(L[7]*R|0)/R):(f[k]=L[0],f[k+1]=L[1],f[k+5]=L[2],f[k+6]=L[3],f[k+10]=L[4],f[k+11]=L[5],f[k+15]=L[6],f[k+16]=L[7]);l[k+2]=Q[0];l[k+7]=Q[1];l[k+12]=Q[2];l[k+17]=Q[3];L=Math.min(S.worldAlpha,1);S=1>L&&M.premultipliedAlpha?(0,n.premultiplyTint)(S._tintRGB,L):S._tintRGB+(255*L<<24);l[k+3]=l[k+8]=l[k+13]=l[k+18]=S;f[k+4]=f[k+9]=f[k+14]=f[k+19]=M._virtalBoundId;k+=20}P.size=G-P.start;q.default.CAN_UPLOAD_SAME_BUFFER?
this.vertexBuffers[this.vertexCount].upload(b.vertices,0,!0):(this.vaoMax<=this.vertexCount&&(this.vaoMax++,w=this.shader.attributes,G=this.vertexBuffers[this.vertexCount]=p.default.GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),e=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(G,w.aVertexPosition,a.FLOAT,!1,this.vertByteSize,0).addAttribute(G,w.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(G,w.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12),w.aTextureId&&
e.addAttribute(G,w.aTextureId,a.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=e),this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(b.vertices,0,!1),this.vertexCount++);for(G=0;G<c;++G)g[G]._virtalBoundId=-1;for(G=0;G<A;++G){c=d[G];b=c.textureCount;for(e=0;e<b;e++)w=c.textures[e],g[c.ids[e]]!==w&&this.renderer.bindTexture(w,c.ids[e],!0),w._virtalBoundId=-1;this.renderer.state.setBlendMode(c.blend);a.drawElements(a.TRIANGLES,6*c.size,a.UNSIGNED_SHORT,
12*c.start)}this.currentIndex=0}};b.prototype.start=function(){this.renderer.bindShader(this.shader);q.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())};b.prototype.stop=function(){this.flush()};b.prototype.destroy=function(){for(var a=0;a<this.vaoMax;a++)this.vertexBuffers[a]&&this.vertexBuffers[a].destroy(),this.vaos[a]&&this.vaos[a].destroy();this.indexBuffer&&this.indexBuffer.destroy();this.renderer.off("prerender",
this.onPrerender,this);d.prototype.destroy.call(this);this.shader&&(this.shader.destroy(),this.shader=null);this.sprites=this.indices=this.indexBuffer=this.vaos=this.vertexBuffers=null;for(a=0;a<this.buffers.length;++a)this.buffers[a].destroy()};return b}(k.default);g.default=b;d.default.registerPlugin("sprite",b)},{"../../renderers/webgl/WebGLRenderer":92,"../../renderers/webgl/utils/ObjectRenderer":102,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":105,"../../settings":109,"../../utils":133,
"../../utils/createIndicesForQuads":131,"./BatchBuffer":113,"./generateMultiTextureShader":115,"bit-twiddle":9,"pixi-gl-core":22}],115:[function(b,k,g){function h(d){var c="\n\n";for(var a=0;a<d;a++)0<a&&(c+="\nelse "),a<d-1&&(c+="if(textureId == "+a+".0)"),c+="\n{",c+="\n\tcolor = texture2D(uSamplers["+a+"], vTextureCoord);",c+="\n}";return c+"\n\n"}g.__esModule=!0;g.default=function(b,c){var a=d;a=a.replace(/%count%/gi,c);a=a.replace(/%forloop%/gi,h(c));b=new m.default(b,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",
a);a=[];for(var e=0;e<c;e++)a[e]=e;b.bind();b.uniforms.uSamplers=a;return b};var m=(k=b("../../Shader"))&&k.__esModule?k:{default:k};b("path");var d="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\nvoid main(void){\nvec4 color;\nfloat textureId = floor(vTextureId+0.5);\n%forloop%\ngl_FragColor = color * vColor;\n}"},{"../../Shader":52,path:1}],116:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}function m(a,c){if("function"!==
typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;var d=function(){function a(a,c){for(var d=0;d<c.length;d++){var b=c[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}return function(c,
d,b){d&&a(c.prototype,d);b&&a(c,b);return c}}();k=b("../sprites/Sprite");k=h(k);var f=b("../textures/Texture"),c=h(f),a=b("../math"),e=b("../utils"),l=b("../const");f=b("../settings");var q=h(f);f=b("./TextStyle");var n=h(f);f=b("./TextMetrics");var p=h(f);b=b("../utils/trimCanvas");var x=h(b),t={texture:!0,children:!1,baseTexture:!0};b=function(b){function f(d,e,l){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");l=l||document.createElement("canvas");l.width=3;l.height=
3;var n=c.default.fromCanvas(l,q.default.SCALE_MODE,"text");n.orig=new a.Rectangle;n.trim=new a.Rectangle;n=b.call(this,n);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");n=!n||"object"!==typeof n&&"function"!==typeof n?this:n;c.default.addToCache(n._texture,n._texture.baseTexture.textureCacheIds[0]);n.canvas=l;n.context=n.canvas.getContext("2d");n.resolution=q.default.RESOLUTION;n._text=null;n._style=null;n._styleListener=null;n._font="";n.text=d;n.style=
e;n.localStyleID=-1;return n}m(f,b);f.prototype.updateText=function(a){var c=this._style;this.localStyleID!==c.styleID&&(this.dirty=!0,this.localStyleID=c.styleID);if(this.dirty||!a){this._font=this._style.toFontString();var d=this.context,b=p.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),e=b.height;a=b.lines;var f=b.lineHeight,l=b.lineWidths,n=b.maxLineWidth,q=b.fontProperties;this.canvas.width=Math.ceil((Math.max(1,b.width)+2*c.padding)*this.resolution);this.canvas.height=
Math.ceil((Math.max(1,e)+2*c.padding)*this.resolution);d.scale(this.resolution,this.resolution);d.clearRect(0,0,this.canvas.width,this.canvas.height);d.font=this._font;d.strokeStyle=c.stroke;d.lineWidth=c.strokeThickness;d.textBaseline=c.textBaseline;d.lineJoin=c.lineJoin;d.miterLimit=c.miterLimit;if(c.dropShadow){d.fillStyle=c.dropShadowColor;d.globalAlpha=c.dropShadowAlpha;d.shadowBlur=c.dropShadowBlur;0<c.dropShadowBlur&&(d.shadowColor=c.dropShadowColor);for(var h=Math.cos(c.dropShadowAngle)*c.dropShadowDistance,
g=Math.sin(c.dropShadowAngle)*c.dropShadowDistance,m=0;m<a.length;m++)b=c.strokeThickness/2,e=c.strokeThickness/2+m*f+q.ascent,"right"===c.align?b+=n-l[m]:"center"===c.align&&(b+=(n-l[m])/2),c.fill&&(this.drawLetterSpacing(a[m],b+h+c.padding,e+g+c.padding),c.stroke&&c.strokeThickness&&(d.strokeStyle=c.dropShadowColor,this.drawLetterSpacing(a[m],b+h+c.padding,e+g+c.padding,!0),d.strokeStyle=c.stroke))}d.shadowBlur=0;d.globalAlpha=1;d.fillStyle=this._generateFillStyle(c,a);for(d=0;d<a.length;d++)b=
c.strokeThickness/2,e=c.strokeThickness/2+d*f+q.ascent,"right"===c.align?b+=n-l[d]:"center"===c.align&&(b+=(n-l[d])/2),c.stroke&&c.strokeThickness&&this.drawLetterSpacing(a[d],b+c.padding,e+c.padding,!0),c.fill&&this.drawLetterSpacing(a[d],b+c.padding,e+c.padding);this.updateTexture()}};f.prototype.drawLetterSpacing=function(a,c,d){var b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,e=this._style.letterSpacing;if(0===e)b?this.context.strokeText(a,c,d):this.context.fillText(a,c,d);else for(var f=
String.prototype.split.call(a,""),l=c,n=0,q;n<a.length;)q=f[n++],b?this.context.strokeText(q,l,d):this.context.fillText(q,l,d),l+=this.context.measureText(q).width+e};f.prototype.updateTexture=function(){var a=this.canvas;if(this._style.trim){var c=(0,x.default)(a);c.data&&(a.width=c.width,a.height=c.height,this.context.putImageData(c.data,0,0))}c=this._texture;var d=this._style;d=d.trim?0:d.padding;var b=c.baseTexture;b.hasLoaded=!0;b.resolution=this.resolution;b.realWidth=a.width;b.realHeight=a.height;
b.width=a.width/this.resolution;b.height=a.height/this.resolution;c.trim.width=c._frame.width=a.width/this.resolution;c.trim.height=c._frame.height=a.height/this.resolution;c.trim.x=-d;c.trim.y=-d;c.orig.width=c._frame.width-2*d;c.orig.height=c._frame.height-2*d;this._onTextureUpdate();b.emit("update",b);this.dirty=!1};f.prototype.renderWebGL=function(a){this.resolution!==a.resolution&&(this.resolution=a.resolution,this.dirty=!0);this.updateText(!0);b.prototype.renderWebGL.call(this,a)};f.prototype._renderCanvas=
function(a){this.resolution!==a.resolution&&(this.resolution=a.resolution,this.dirty=!0);this.updateText(!0);b.prototype._renderCanvas.call(this,a)};f.prototype.getLocalBounds=function(a){this.updateText(!0);return b.prototype.getLocalBounds.call(this,a)};f.prototype._calculateBounds=function(){this.updateText(!0);this.calculateVertices();this._bounds.addQuad(this.vertexData)};f.prototype._onStyleChange=function(){this.dirty=!0};f.prototype._generateFillStyle=function(a,c){if(!Array.isArray(a.fill))return a.fill;
if(navigator.isCocoonJS)return a.fill[0];var d=this.canvas.width/this.resolution;var b=this.canvas.height/this.resolution;var e=a.fill.slice(),f=a.fillGradientStops.slice();if(!f.length){var n=e.length+1;for(var q=1;q<n;++q)f.push(q/n)}e.unshift(a.fill[0]);f.unshift(0);e.push(a.fill[a.fill.length-1]);f.push(1);if(a.fillGradientType===l.TEXT_GRADIENT.LINEAR_VERTICAL)for(a=this.context.createLinearGradient(d/2,0,d/2,b),d=(e.length+1)*c.length,q=b=0;q<c.length;q++){b+=1;for(var h=0;h<e.length;h++)n=
"number"===typeof f[h]?f[h]/c.length+q/c.length:b/d,a.addColorStop(n,e[h]),b++}else for(a=this.context.createLinearGradient(0,b/2,d,b/2),d=e.length+1,b=1,c=0;c<e.length;c++)n="number"===typeof f[c]?f[c]:b/d,a.addColorStop(n,e[c]),b++;return a};f.prototype.destroy=function(a){"boolean"===typeof a&&(a={children:a});a=Object.assign({},t,a);b.prototype.destroy.call(this,a);this._style=this.canvas=this.context=null};d(f,[{key:"width",get:function(){this.updateText(!0);return Math.abs(this.scale.x)*this._texture.orig.width},
set:function(a){this.updateText(!0);var c=(0,e.sign)(this.scale.x)||1;this.scale.x=c*a/this._texture.orig.width;this._width=a}},{key:"height",get:function(){this.updateText(!0);return Math.abs(this.scale.y)*this._texture.orig.height},set:function(a){this.updateText(!0);var c=(0,e.sign)(this.scale.y)||1;this.scale.y=c*a/this._texture.orig.height;this._height=a}},{key:"style",get:function(){return this._style},set:function(a){a=a||{};this._style=a instanceof n.default?a:new n.default(a);this.localStyleID=
-1;this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(a){a=String(""===a||null===a||void 0===a?" ":a);this._text!==a&&(this._text=a,this.dirty=!0)}}]);return f}(k.default);g.default=b},{"../const":54,"../math":78,"../settings":109,"../sprites/Sprite":110,"../textures/Texture":123,"../utils":133,"../utils/trimCanvas":138,"./TextMetrics":117,"./TextStyle":118}],117:[function(b,k,g){g.__esModule=!0;b=function(){function b(h,d,f,c,a,e,l,q,n){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
this.text=h;this.style=d;this.width=f;this.height=c;this.lines=a;this.lineWidths=e;this.lineHeight=l;this.maxLineWidth=q;this.fontProperties=n}b.measureText=function(h,d,f){var c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:b._canvas;f=void 0===f||null===f?d.wordWrap:f;var a=d.toFontString(),e=b.measureFont(a),l=c.getContext("2d");l.font=a;c=(f?b.wordWrap(h,d,c):h).split(/(?:\r\n|\r|\n)/);a=Array(c.length);for(var q=0,n=0;n<c.length;n++){var p=l.measureText(c[n]).width+(c[n].length-1)*d.letterSpacing;
a[n]=p;q=Math.max(q,p)}l=q+d.strokeThickness;d.dropShadow&&(l+=d.dropShadowDistance);n=d.lineHeight||e.fontSize+d.strokeThickness;p=Math.max(n,e.fontSize+d.strokeThickness)+(c.length-1)*(n+d.leading);d.dropShadow&&(p+=d.dropShadowDistance);return new b(h,d,l,p,c,a,n+d.leading,q,e)};b.wordWrap=function(h,d){var f=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:b._canvas).getContext("2d"),c=0,a="",e="",l={},q=d.letterSpacing,n=d.whiteSpace,p=b.collapseSpaces(n);n=b.collapseNewlines(n);for(var g=
!p,m=d.wordWrapWidth+q,k=b.tokenize(h),w=0;w<k.length;w++){var A=k[w];if(b.isNewline(A)){if(!n){e+=b.addLine(a);g=!p;a="";c=0;continue}A=" "}if(p){var u=b.isBreakingSpace(A),z=b.isBreakingSpace(a[a.length-1]);if(u&&z)continue}u=b.getFromCache(A,q,l,f);if(u>m)if(""!==a&&(e+=b.addLine(a),a="",c=0),b.canBreakWords(A,d.breakWords))for(u=A.split(""),z=0;z<u.length;z++){for(var y=u[z],B=1;u[z+B];){var C=u[z+B];if(b.canBreakChars(y[y.length-1],C,A,z,d.breakWords))break;else y+=C;B++}z+=y.length-1;B=b.getFromCache(y,
q,l,f);B+c>m&&(e+=b.addLine(a),g=!1,a="",c=0);a+=y;c+=B}else 0<a.length&&(e+=b.addLine(a)),e+=b.addLine(A,w!==k.length-1),g=!1,a="",c=0;else if(u+c>m&&(g=!1,e+=b.addLine(a),a="",c=0),0<a.length||!b.isBreakingSpace(A)||g)a+=A,c+=u}return e+=b.addLine(a,!1)};b.addLine=function(h){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;h=b.trimRight(h);return d?h+"\n":h};b.getFromCache=function(b,d,f,c){var a=f[b];void 0===a&&(d*=b.length,a=c.measureText(b).width+d,f[b]=a);return a};b.collapseSpaces=
function(b){return"normal"===b||"pre-line"===b};b.collapseNewlines=function(b){return"normal"===b};b.trimRight=function(h){if("string"!==typeof h)return"";for(var d=h.length-1;0<=d&&b.isBreakingSpace(h[d]);d--)h=h.slice(0,-1);return h};b.isNewline=function(h){return"string"!==typeof h?!1:0<=b._newlines.indexOf(h.charCodeAt(0))};b.isBreakingSpace=function(h){return"string"!==typeof h?!1:0<=b._breakingSpaces.indexOf(h.charCodeAt(0))};b.tokenize=function(h){var d=[],f="";if("string"!==typeof h)return d;
for(var c=0;c<h.length;c++){var a=h[c];b.isBreakingSpace(a)||b.isNewline(a)?(""!==f&&(d.push(f),f=""),d.push(a)):f+=a}""!==f&&d.push(f);return d};b.canBreakWords=function(b,d){return d};b.canBreakChars=function(b,d,f,c,a){return!0};b.measureFont=function(h){if(b._fonts[h])return b._fonts[h];var d={},f=b._canvas,c=b._context;c.font=h;var a=b.METRICS_STRING+b.BASELINE_SYMBOL,e=Math.ceil(c.measureText(a).width),l=Math.ceil(c.measureText(b.BASELINE_SYMBOL).width),q=2*l;l=l*b.BASELINE_MULTIPLIER|0;f.width=
e;f.height=q;c.fillStyle="#f00";c.fillRect(0,0,e,q);c.font=h;c.textBaseline="alphabetic";c.fillStyle="#000";c.fillText(a,0,l);f=c.getImageData(0,0,e,q).data;c=f.length;e*=4;var n=0,p=!1;for(a=0;a<l;++a){for(var g=0;g<e;g+=4)if(255!==f[n+g]){p=!0;break}if(p)break;else n+=e}d.ascent=l-a;n=c-e;p=!1;for(a=q;a>l;--a){for(q=0;q<e;q+=4)if(255!==f[n+q]){p=!0;break}if(p)break;else n-=e}d.descent=a-l;d.fontSize=d.ascent+d.descent;return b._fonts[h]=d};b.clearMetrics=function(){var h=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:"";h?delete b._fonts[h]:b._fonts={}};return b}();g.default=b;g=document.createElement("canvas");g.width=g.height=10;b._canvas=g;b._context=g.getContext("2d");b._fonts={};b.METRICS_STRING="|\u00c9q";b.BASELINE_SYMBOL="M";b.BASELINE_MULTIPLIER=1.4;b._newlines=[10,13];b._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},{}],118:[function(b,k,g){function h(a){if("number"===typeof a)return(0,c.hex2string)(a);"string"===typeof a&&0===a.indexOf("0x")&&
(a=a.replace("0x","#"));return a}function m(a){if(Array.isArray(a)){for(var c=0;c<a.length;++c)a[c]=h(a[c]);return a}return h(a)}function d(a,c,d){for(var b in d)Array.isArray(c[b])?a[b]=c[b].slice():a[b]=c[b]}g.__esModule=!0;var f=function(){function a(a,c){for(var d=0;d<c.length;d++){var b=c[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}return function(c,d,b){d&&a(c.prototype,d);b&&a(c,b);return c}}();k=b("../const");var c=b("../utils"),
a={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:k.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,
leading:0},e="serif sans-serif monospace cursive fantasy system-ui".split(" ");b=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.styleID=0;this.reset();d(this,a,a)}c.prototype.clone=function(){var b={};d(b,this,a);return new c(b)};c.prototype.reset=function(){d(this,a,a)};c.prototype.toFontString=function(){var a="number"===typeof this.fontSize?this.fontSize+"px":this.fontSize,c=this.fontFamily;Array.isArray(this.fontFamily)||(c=this.fontFamily.split(","));
for(var d=c.length-1;0<=d;d--){var b=c[d].trim();!/(["'])[^'"]+\1/.test(b)&&0>e.indexOf(b)&&(b='"'+b+'"');c[d]=b}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+a+" "+c.join(",")};f(c,[{key:"align",get:function(){return this._align},set:function(a){this._align!==a&&(this._align=a,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(a){this._breakWords!==a&&(this._breakWords=a,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},
set:function(a){this._dropShadow!==a&&(this._dropShadow=a,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(a){this._dropShadowAlpha!==a&&(this._dropShadowAlpha=a,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(a){this._dropShadowAngle!==a&&(this._dropShadowAngle=a,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(a){this._dropShadowBlur!==a&&(this._dropShadowBlur=
a,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(a){a=m(a);this._dropShadowColor!==a&&(this._dropShadowColor=a,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(a){this._dropShadowDistance!==a&&(this._dropShadowDistance=a,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(a){a=m(a);this._fill!==a&&(this._fill=a,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},
set:function(a){this._fillGradientType!==a&&(this._fillGradientType=a,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(a){a:{var c=this._fillGradientStops;if(Array.isArray(c)&&Array.isArray(a)&&c.length===a.length){for(var d=0;d<c.length;++d)if(c[d]!==a[d]){c=!1;break a}c=!0}else c=!1}c||(this._fillGradientStops=a,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(a){this.fontFamily!==a&&(this._fontFamily=
a,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(a){this._fontSize!==a&&(this._fontSize=a,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(a){this._fontStyle!==a&&(this._fontStyle=a,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(a){this._fontVariant!==a&&(this._fontVariant=a,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(a){this._fontWeight!==
a&&(this._fontWeight=a,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(a){this._letterSpacing!==a&&(this._letterSpacing=a,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(a){this._lineHeight!==a&&(this._lineHeight=a,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(a){this._leading!==a&&(this._leading=a,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(a){this._lineJoin!==
a&&(this._lineJoin=a,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(a){this._miterLimit!==a&&(this._miterLimit=a,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(a){this._padding!==a&&(this._padding=a,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(a){a=m(a);this._stroke!==a&&(this._stroke=a,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(a){this._strokeThickness!==
a&&(this._strokeThickness=a,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(a){this._textBaseline!==a&&(this._textBaseline=a,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(a){this._trim!==a&&(this._trim=a,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(a){this._whiteSpace!==a&&(this._whiteSpace=a,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(a){this._wordWrap!==
a&&(this._wordWrap=a,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(a){this._wordWrapWidth!==a&&(this._wordWrapWidth=a,this.styleID++)}}]);return c}();g.default=b},{"../const":54,"../utils":133}],119:[function(b,k,g){function h(d,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}g.__esModule=!0;k=(k=b("./BaseTexture"))&&k.__esModule?k:{default:k};var m=(b=b("../settings"))&&b.__esModule?b:{default:b};b=function(d){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,e=arguments[2],f=arguments[3];if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var h=d.call(this,null,e);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
h=!h||"object"!==typeof h&&"function"!==typeof h?this:h;h.resolution=f||m.default.RESOLUTION;h.width=Math.ceil(c);h.height=Math.ceil(a);h.realWidth=h.width*h.resolution;h.realHeight=h.height*h.resolution;h.scaleMode=void 0!==e?e:m.default.SCALE_MODE;h.hasLoaded=!0;h._glRenderTargets={};h._canvasRenderTarget=null;h.valid=!1;return h}h(b,d);b.prototype.resize=function(c,a){c=Math.ceil(c);a=Math.ceil(a);if(c!==this.width||a!==this.height)this.valid=0<c&&0<a,this.width=c,this.height=a,this.realWidth=
this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this)};b.prototype.destroy=function(){d.prototype.destroy.call(this,!0);this.renderer=null};return b}(k.default);g.default=b},{"../settings":109,"./BaseTexture":120}],120:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&
c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;var d=b("../utils");k=b("../settings");var f=h(k);k=b("eventemitter3");k=h(k);var c=b("../utils/determineCrossOrigin"),a=h(c);b=b("bit-twiddle");var e=h(b);b=function(c){function b(a,e,l){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var n=c.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
n=!n||"object"!==typeof n&&"function"!==typeof n?this:n;n.uid=(0,d.uid)();n.touched=0;n.resolution=l||f.default.RESOLUTION;n.width=100;n.height=100;n.realWidth=100;n.realHeight=100;n.scaleMode=void 0!==e?e:f.default.SCALE_MODE;n.hasLoaded=!1;n.isLoading=!1;n.source=null;n.origSource=null;n.imageType=null;n.sourceScale=1;n.premultipliedAlpha=!0;n.imageUrl=null;n.isPowerOfTwo=!1;n.mipmap=f.default.MIPMAP_TEXTURES;n.wrapMode=f.default.WRAP_MODE;n._glTextures={};n._enabled=0;n._virtalBoundId=-1;n._destroyed=
!1;n.textureCacheIds=[];a&&n.loadSource(a);return n}m(b,c);b.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions());this.emit("update",this)};b.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution;this.height=this.realHeight/this.resolution;this.isPowerOfTwo=e.default.isPow2(this.realWidth)&&
e.default.isPow2(this.realHeight)};b.prototype.loadSource=function(a){var c=this.isLoading;this.isLoading=this.hasLoaded=!1;c&&this.source&&(this.source.onload=null,this.source.onerror=null);var d=!this.source;this.source=a;if((a.src&&a.complete||a.getContext)&&a.width&&a.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),d&&this.emit("loaded",this);else if(!a.getContext){this.isLoading=!0;var b=this;a.onload=function(){b._updateImageType();a.onload=null;
a.onerror=null;b.isLoading&&(b.isLoading=!1,b._sourceLoaded(),"svg"===b.imageType?b._loadSvgSource():b.emit("loaded",b))};a.onerror=function(){a.onload=null;a.onerror=null;b.isLoading&&(b.isLoading=!1,b.emit("error",b))};a.complete&&a.src&&(a.onload=null,a.onerror=null,"svg"===b.imageType?b._loadSvgSource():(this.isLoading=!1,a.width&&a.height?(this._sourceLoaded(),c&&this.emit("loaded",this)):c&&this.emit("error",this)))}};b.prototype._updateImageType=function(){if(this.imageUrl){var a=(0,d.decomposeDataUri)(this.imageUrl);
if(a&&"image"===a.mediaType){if(a=a.subType.split("+")[0],a=(0,d.getUrlFileExtension)("."+a),!a)throw Error("Invalid image type in data URI.");}else(a=(0,d.getUrlFileExtension)(this.imageUrl))||(a="png");this.imageType=a}};b.prototype._loadSvgSource=function(){if("svg"===this.imageType){var a=(0,d.decomposeDataUri)(this.imageUrl);a?this._loadSvgSourceUsingDataUri(a):this._loadSvgSourceUsingXhr()}};b.prototype._loadSvgSourceUsingDataUri=function(a){if("base64"===a.encoding){if(!atob)throw Error("Your browser doesn't support base64 conversions.");
a=atob(a.data)}else a=a.data;this._loadSvgSourceUsingString(a)};b.prototype._loadSvgSourceUsingXhr=function(){var a=this,c=new XMLHttpRequest;c.onload=function(){if(c.readyState!==c.DONE||200!==c.status)throw Error("Failed to load SVG using XHR.");a._loadSvgSourceUsingString(c.response)};c.onerror=function(){return a.emit("error",a)};c.open("GET",this.imageUrl,!0);c.send()};b.prototype._loadSvgSourceUsingString=function(a){var c=(0,d.getSvgSize)(a);a=c.width;c=c.height;if(!a||!c)throw Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");
this.realWidth=Math.round(a*this.sourceScale);this.realHeight=Math.round(c*this.sourceScale);this._updateDimensions();var e=document.createElement("canvas");e.width=this.realWidth;e.height=this.realHeight;e._pixiId="canvas_"+(0,d.uid)();e.getContext("2d").drawImage(this.source,0,0,a,c,0,0,this.realWidth,this.realHeight);this.origSource=this.source;this.source=e;b.addToCache(this,e._pixiId);this.isLoading=!1;this._sourceLoaded();this.emit("loaded",this)};b.prototype._sourceLoaded=function(){this.hasLoaded=
!0;this.update()};b.prototype.destroy=function(){this.imageUrl&&(delete d.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src=""));this.source=null;this.dispose();b.removeFromCache(this);this.textureCacheIds=null;this._destroyed=!0};b.prototype.dispose=function(){this.emit("dispose",this)};b.prototype.updateSourceImage=function(a){this.source.src=a;this.loadSource(this.source)};b.fromImage=function(c,e,f,l){var h=d.BaseTextureCache[c];if(!h){var n=new Image;void 0===
e&&0!==c.indexOf("data:")?n.crossOrigin=(0,a.default)(c):e&&(n.crossOrigin="string"===typeof e?e:"anonymous");h=new b(n,f);h.imageUrl=c;l&&(h.sourceScale=l);h.resolution=(0,d.getResolutionOfUrl)(c);n.src=c;b.addToCache(h,c)}return h};b.fromCanvas=function(a,c){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";a._pixiId||(a._pixiId=e+"_"+(0,d.uid)());e=d.BaseTextureCache[a._pixiId];e||(e=new b(a,c),b.addToCache(e,a._pixiId));return e};b.from=function(a,c,e){if("string"===typeof a)return b.fromImage(a,
void 0,c,e);if(a instanceof HTMLImageElement){var f=a.src,l=d.BaseTextureCache[f];l||(l=new b(a,c),l.imageUrl=f,e&&(l.sourceScale=e),l.resolution=(0,d.getResolutionOfUrl)(f),b.addToCache(l,f));return l}return a instanceof HTMLCanvasElement?b.fromCanvas(a,c):a};b.addToCache=function(a,c){c&&(-1===a.textureCacheIds.indexOf(c)&&a.textureCacheIds.push(c),d.BaseTextureCache[c]&&console.warn("BaseTexture added to the cache with an id ["+c+"] that already had an entry"),d.BaseTextureCache[c]=a)};b.removeFromCache=
function(a){if("string"===typeof a){var c=d.BaseTextureCache[a];if(c){var b=c.textureCacheIds.indexOf(a);-1<b&&c.textureCacheIds.splice(b,1);delete d.BaseTextureCache[a];return c}}else if(a&&a.textureCacheIds){for(c=0;c<a.textureCacheIds.length;++c)delete d.BaseTextureCache[a.textureCacheIds[c]];a.textureCacheIds.length=0;return a}return null};return b}(k.default);g.default=b},{"../settings":109,"../utils":133,"../utils/determineCrossOrigin":132,"bit-twiddle":9,eventemitter3:198}],121:[function(b,
k,g){function h(d,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}g.__esModule=!0;var m=(k=b("./BaseRenderTexture"))&&k.__esModule?k:{default:k};b=b("./Texture");b=function(d){function b(c,a,e,f,h){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
var l=null;if(!(c instanceof m.default)){var p=a;console.warn("Please use RenderTexture.create("+p+", "+e+") instead of the ctor directly.");l=c;a=null;c=new m.default(p,e,f,h)}c=d.call(this,c,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.legacyRenderer=l;c.valid=!0;c._updateUvs();return c}h(b,d);b.prototype.resize=function(c,a,d){c=Math.ceil(c);a=Math.ceil(a);this.valid=0<c&&0<a;this._frame.width=
this.orig.width=c;this._frame.height=this.orig.height=a;d||this.baseTexture.resize(c,a);this._updateUvs()};b.create=function(c,a,d,f){return new b(new m.default(c,a,d,f))};return b}((b&&b.__esModule?b:{default:b}).default);g.default=b},{"./BaseRenderTexture":119,"./Texture":123}],122:[function(b,k,g){g.__esModule=!0;var h=function(){function d(c,a){for(var d=0;d<a.length;d++){var b=a[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(c,b.key,b)}}
return function(c,a,b){a&&d(c.prototype,a);b&&d(c,b);return c}}(),m=b("../"),d=b("../utils");b=function(){function b(c,a){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.baseTexture=c;this.textures={};this.animations={};this.data=a;this.resolution=this._updateResolution(d||this.baseTexture.imageUrl);this._frames=this.data.frames;this._frameKeys=Object.keys(this._frames);this._batchIndex=0;this._callback=
null}h(b,null,[{key:"BATCH_SIZE",get:function(){return 1E3}}]);b.prototype._updateResolution=function(c){var a=this.data.meta.scale;c=(0,d.getResolutionOfUrl)(c,null);null===c&&(c=void 0!==a?parseFloat(a):1);1!==c&&(this.baseTexture.resolution=c,this.baseTexture.update());return c};b.prototype.parse=function(c){this._batchIndex=0;this._callback=c;this._frameKeys.length<=b.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()};b.prototype._processFrames=
function(c){for(var a=c,d=b.BATCH_SIZE,f=this.baseTexture.sourceScale;a-c<d&&a<this._frameKeys.length;){var h=this._frameKeys[a],n=this._frames[h],p=n.frame;if(p){var g=null;var k=!1!==n.trimmed&&n.sourceSize?n.sourceSize:n.frame;var v=new m.Rectangle(0,0,Math.floor(k.w*f)/this.resolution,Math.floor(k.h*f)/this.resolution);k=n.rotated?new m.Rectangle(Math.floor(p.x*f)/this.resolution,Math.floor(p.y*f)/this.resolution,Math.floor(p.h*f)/this.resolution,Math.floor(p.w*f)/this.resolution):new m.Rectangle(Math.floor(p.x*
f)/this.resolution,Math.floor(p.y*f)/this.resolution,Math.floor(p.w*f)/this.resolution,Math.floor(p.h*f)/this.resolution);!1!==n.trimmed&&n.spriteSourceSize&&(g=new m.Rectangle(Math.floor(n.spriteSourceSize.x*f)/this.resolution,Math.floor(n.spriteSourceSize.y*f)/this.resolution,Math.floor(p.w*f)/this.resolution,Math.floor(p.h*f)/this.resolution));this.textures[h]=new m.Texture(this.baseTexture,k,v,g,n.rotated?2:0,n.anchor);m.Texture.addToCache(this.textures[h],h)}a++}};b.prototype._processAnimations=
function(){var c=this.data.animations||{},a;for(a in c){this.animations[a]=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();var d=c[a],b=Array.isArray(d),f=0;for(d=b?d:d[Symbol.iterator]();;){if(b){if(f>=d.length)break;var h=d[f++]}else{f=d.next();if(f.done)break;h=f.value}this.animations[a].push(this.textures[h])}}};b.prototype._parseComplete=function(){var c=this._callback;this._callback=null;this._batchIndex=0;c.call(this,this.textures)};b.prototype._nextBatch=function(){var c=this;this._processFrames(this._batchIndex*
b.BATCH_SIZE);this._batchIndex++;setTimeout(function(){c._batchIndex*b.BATCH_SIZE<c._frameKeys.length?c._nextBatch():(c._processAnimations(),c._parseComplete())},0)};b.prototype.destroy=function(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,a;for(a in this.textures)this.textures[a].destroy();this.textures=this.data=this._frameKeys=this._frames=null;c&&this.baseTexture.destroy();this.baseTexture=null};return b}();g.default=b},{"../":73,"../utils":133}],123:[function(b,k,g){function h(a){return a&&
a.__esModule?a:{default:a}}function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}function d(a){a.destroy=function(){};a.on=function(){};a.once=function(){};a.emit=function(){}}g.__esModule=!0;var f=function(){function a(a,c){for(var d=0;d<
c.length;d++){var b=c[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}return function(c,d,b){d&&a(c.prototype,d);b&&a(c,b);return c}}();k=b("./BaseTexture");var c=h(k);k=b("./VideoBaseTexture");var a=h(k);k=b("./TextureUvs");var e=h(k);k=b("eventemitter3");k=h(k);var l=b("../math"),q=b("../utils");b=b("../settings");var n=h(b),p=function(d){function b(a,c,e,f,h,n){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
var p=d.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");p=!p||"object"!==typeof p&&"function"!==typeof p?this:p;p.noFrame=!1;c||(p.noFrame=!0,c=new l.Rectangle(0,0,1,1));a instanceof b&&(a=a.baseTexture);p.baseTexture=a;p._frame=c;p.trim=f;p.valid=!1;p.requiresUpdate=!1;p._uvs=null;p.orig=e||c;p._rotate=Number(h||0);if(!0===h)p._rotate=2;else if(0!==p._rotate%2)throw Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");
if(a.hasLoaded)p.noFrame&&(c=new l.Rectangle(0,0,a.width,a.height),a.on("update",p.onBaseTextureUpdated,p)),p.frame=c;else a.once("loaded",p.onBaseTextureLoaded,p);p.defaultAnchor=n?new l.Point(n.x,n.y):new l.Point(0,0);p._updateID=0;p.transform=null;p.textureCacheIds=[];return p}m(b,d);b.prototype.update=function(){this.baseTexture.update()};b.prototype.onBaseTextureLoaded=function(a){this._updateID++;this.frame=this.noFrame?new l.Rectangle(0,0,a.width,a.height):this._frame;this.baseTexture.on("update",
this.onBaseTextureUpdated,this);this.emit("update",this)};b.prototype.onBaseTextureUpdated=function(a){this._updateID++;this._frame.width=a.width;this._frame.height=a.height;this.emit("update",this)};b.prototype.destroy=function(a){this.baseTexture&&(a&&(q.TextureCache[this.baseTexture.imageUrl]&&b.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=
null);this.orig=this.trim=this._uvs=this._frame=null;this.valid=!1;b.removeFromCache(this);this.textureCacheIds=null};b.prototype.clone=function(){return new b(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)};b.prototype._updateUvs=function(){this._uvs||(this._uvs=new e.default);this._uvs.set(this._frame,this.baseTexture,this.rotate);this._updateID++};b.fromImage=function(a,d,e,f){var l=q.TextureCache[a];l||(l=new b(c.default.fromImage(a,d,e,f)),b.addToCache(l,a));return l};b.fromFrame=
function(a){var c=q.TextureCache[a];if(!c)throw Error('The frameId "'+a+'" does not exist in the texture cache');return c};b.fromCanvas=function(a,d){return new b(c.default.fromCanvas(a,d,2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas"))};b.fromVideo=function(c,d){return"string"===typeof c?b.fromVideoUrl(c,d):new b(a.default.fromVideo(c,d))};b.fromVideoUrl=function(c,d){return new b(a.default.fromUrl(c,d))};b.from=function(a){if("string"===typeof a){var d=q.TextureCache[a];return d?
d:null!==a.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?b.fromVideoUrl(a):b.fromImage(a)}return a instanceof HTMLImageElement?new b(c.default.from(a)):a instanceof HTMLCanvasElement?b.fromCanvas(a,n.default.SCALE_MODE,"HTMLCanvasElement"):a instanceof HTMLVideoElement?b.fromVideo(a):a instanceof c.default?new b(a):a};b.fromLoader=function(a,d,e){a=new c.default(a,void 0,(0,q.getResolutionOfUrl)(d));var f=new b(a);a.imageUrl=d;e||(e=d);c.default.addToCache(f.baseTexture,e);b.addToCache(f,e);e!==d&&(c.default.addToCache(f.baseTexture,
d),b.addToCache(f,d));return f};b.addToCache=function(a,c){c&&(-1===a.textureCacheIds.indexOf(c)&&a.textureCacheIds.push(c),q.TextureCache[c]&&console.warn("Texture added to the cache with an id ["+c+"] that already had an entry"),q.TextureCache[c]=a)};b.removeFromCache=function(a){if("string"===typeof a){var c=q.TextureCache[a];if(c){var d=c.textureCacheIds.indexOf(a);-1<d&&c.textureCacheIds.splice(d,1);delete q.TextureCache[a];return c}}else if(a&&a.textureCacheIds){for(c=0;c<a.textureCacheIds.length;++c)q.TextureCache[a.textureCacheIds[c]]===
a&&delete q.TextureCache[a.textureCacheIds[c]];a.textureCacheIds.length=0;return a}return null};f(b,[{key:"frame",get:function(){return this._frame},set:function(a){this._frame=a;this.noFrame=!1;var c=a.x,d=a.y,b=a.width,e=a.height,f=c+b>this.baseTexture.width,l=d+e>this.baseTexture.height;if(f||l)throw Error("Texture Error: frame does not fit inside the base Texture dimensions: "+("X: "+c+" + "+b+" = "+(c+b)+" > "+this.baseTexture.width+" "+(f&&l?"and":"or")+" "+("Y: "+d+" + "+e+" = "+(d+e)+" > "+
this.baseTexture.height)));this.valid=b&&e&&this.baseTexture.hasLoaded;this.trim||this.rotate||(this.orig=a);this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(a){this._rotate=a;this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]);return b}(k.default);g.default=p;p.EMPTY=new p(new c.default);d(p.EMPTY);d(p.EMPTY.baseTexture);p.WHITE=function(){var a=document.createElement("canvas");
a.width=10;a.height=10;var d=a.getContext("2d");d.fillStyle="white";d.fillRect(0,0,10,10);return new p(new c.default(a))}();d(p.WHITE);d(p.WHITE.baseTexture)},{"../math":78,"../settings":109,"../utils":133,"./BaseTexture":120,"./TextureUvs":125,"./VideoBaseTexture":126,eventemitter3:198}],124:[function(b,k,g){g.__esModule=!0;var h=function(){function d(c,a){for(var d=0;d<a.length;d++){var b=a[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(c,b.key,
b)}}return function(c,a,b){a&&d(c.prototype,a);b&&d(c,b);return c}}(),m=(b=b("../math/Matrix"))&&b.__esModule?b:{default:b},d=new m.default;b=function(){function b(c,a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this._texture=c;this.mapCoord=new m.default;this.uClampFrame=new Float32Array(4);this.uClampOffset=new Float32Array(2);this._lastTextureID=-1;this.clampOffset=0;this.clampMargin="undefined"===typeof a?.5:a}b.prototype.multiplyUvs=function(c,a){void 0===
a&&(a=c);for(var d=this.mapCoord,b=0;b<c.length;b+=2){var f=c[b],h=c[b+1];a[b]=f*d.a+h*d.c+d.tx;a[b+1]=f*d.b+h*d.d+d.ty}return a};b.prototype.update=function(c){var a=this._texture;if(!a||!a.valid||!c&&this._lastTextureID===a._updateID)return!1;this._lastTextureID=a._updateID;c=a._uvs;this.mapCoord.set(c.x1-c.x0,c.y1-c.y0,c.x3-c.x0,c.y3-c.y0,c.x0,c.y0);c=a.orig;var b=a.trim;b&&(d.set(c.width/b.width,0,0,c.height/b.height,-b.x/b.width,-b.y/b.height),this.mapCoord.append(d));c=a.baseTexture;b=this.uClampFrame;
var f=this.clampMargin/c.resolution,h=this.clampOffset;b[0]=(a._frame.x+f+h)/c.width;b[1]=(a._frame.y+f+h)/c.height;b[2]=(a._frame.x+a._frame.width-f+h)/c.width;b[3]=(a._frame.y+a._frame.height-f+h)/c.height;this.uClampOffset[0]=h/c.realWidth;this.uClampOffset[1]=h/c.realHeight;return!0};h(b,[{key:"texture",get:function(){return this._texture},set:function(c){this._texture=c;this._lastTextureID=-1}}]);return b}();g.default=b},{"../math/Matrix":75}],125:[function(b,k,g){g.__esModule=!0;var h=(b=b("../math/GroupD8"))&&
b.__esModule?b:{default:b};b=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.y0=this.x0=0;this.x1=1;this.y1=0;this.y2=this.x2=1;this.x3=0;this.y3=1;this.uvsUint32=new Uint32Array(4)}b.prototype.set=function(d,b,c){var a=b.width,e=b.height;if(c){b=d.width/2/a;var f=d.height/2/e;a=d.x/a+b;d=d.y/e+f;c=h.default.add(c,h.default.NW);this.x0=a+b*h.default.uX(c);this.y0=d+f*h.default.uY(c);c=h.default.add(c,2);this.x1=a+b*h.default.uX(c);this.y1=
d+f*h.default.uY(c);c=h.default.add(c,2);this.x2=a+b*h.default.uX(c);this.y2=d+f*h.default.uY(c);c=h.default.add(c,2);this.x3=a+b*h.default.uX(c);this.y3=d+f*h.default.uY(c)}else this.x0=d.x/a,this.y0=d.y/e,this.x1=(d.x+d.width)/a,this.y1=d.y/e,this.x2=(d.x+d.width)/a,this.y2=(d.y+d.height)/e,this.x3=d.x/a,this.y3=(d.y+d.height)/e;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535;this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535;this.uvsUint32[2]=(65535*this.y2&65535)<<
16|65535*this.x2&65535;this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535};return b}();g.default=b},{"../math/GroupD8":74}],126:[function(b,k,g){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}function m(a,c){c||(a=a.split("?").shift().toLowerCase(),
c="video/"+a.substr(a.lastIndexOf(".")+1));var d=document.createElement("source");d.src=a;d.type=c;return d}g.__esModule=!0;var d=function(){function a(a,c){for(var d=0;d<c.length;d++){var b=c[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}return function(c,d,b){d&&a(c.prototype,d);b&&a(c,b);return c}}(),f=(k=b("./BaseTexture"))&&k.__esModule?k:{default:k},c=b("../utils"),a=b("../ticker"),e=b("../const"),l=(b=b("../utils/determineCrossOrigin"))&&
b.__esModule?b:{default:b};b=function(b){function n(a,c){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");if(!a)throw Error("No video source element specified.");(a.readyState===a.HAVE_ENOUGH_DATA||a.readyState===a.HAVE_FUTURE_DATA)&&a.width&&a.height&&(a.complete=!0);c=b.call(this,a,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.width=a.videoWidth;c.height=
a.videoHeight;c._autoUpdate=!0;c._isAutoUpdating=!1;c.autoPlay=!0;c.update=c.update.bind(c);c._onCanPlay=c._onCanPlay.bind(c);a.addEventListener("play",c._onPlayStart.bind(c));a.addEventListener("pause",c._onPlayStop.bind(c));c.hasLoaded=!1;c.__loaded=!1;c._isSourceReady()?c._onCanPlay():(a.addEventListener("canplay",c._onCanPlay),a.addEventListener("canplaythrough",c._onCanPlay));return c}h(n,b);n.prototype._isSourcePlaying=function(){var a=this.source;return 0<a.currentTime&&!1===a.paused&&!1===
a.ended&&2<a.readyState};n.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState};n.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay();!this._isAutoUpdating&&this.autoUpdate&&(a.shared.add(this.update,this,e.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)};n.prototype._onPlayStop=function(){this._isAutoUpdating&&(a.shared.remove(this.update,this),this._isAutoUpdating=!1)};n.prototype._onCanPlay=function(){this.hasLoaded=!0;this.source&&(this.source.removeEventListener("canplay",
this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())};n.prototype.destroy=function(){this._isAutoUpdating&&a.shared.remove(this.update,this);this.source&&this.source._pixiId&&(f.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),
this.source.src="",this.source.load());b.prototype.destroy.call(this)};n.fromVideo=function(a,d){a._pixiId||(a._pixiId="video_"+(0,c.uid)());var b=c.BaseTextureCache[a._pixiId];b||(b=new n(a,d),f.default.addToCache(b,a._pixiId));return b};n.fromUrl=function(a,c,d){var b=document.createElement("video");b.setAttribute("webkit-playsinline","");b.setAttribute("playsinline","");var e=Array.isArray(a)?a[0].src||a[0]:a.src||a;void 0===d&&0!==e.indexOf("data:")?b.crossOrigin=(0,l.default)(e):d&&(b.crossOrigin=
"string"===typeof d?d:"anonymous");if(Array.isArray(a))for(d=0;d<a.length;++d)b.appendChild(m(a[d].src||a[d],a[d].mime));else b.appendChild(m(e,a.mime));b.load();return n.fromVideo(b,c)};d(n,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(c){c!==this._autoUpdate&&(this._autoUpdate=c,!this._autoUpdate&&this._isAutoUpdating?(a.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(a.shared.add(this.update,this,e.UPDATE_PRIORITY.HIGH),
this._isAutoUpdating=!0))}}]);return n}(f.default);g.default=b;b.fromUrls=b.fromUrl},{"../const":54,"../ticker":129,"../utils":133,"../utils/determineCrossOrigin":132,"./BaseTexture":120}],127:[function(b,k,g){g.__esModule=!0;var h=function(){function c(a,c){for(var d=0;d<c.length;d++){var b=c[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}return function(a,d,b){d&&c(a.prototype,d);b&&c(a,b);return a}}(),m=(k=b("../settings"))&&k.__esModule?
k:{default:k},d=b("../const"),f=(b=b("./TickerListener"))&&b.__esModule?b:{default:b};b=function(){function c(){var a=this;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this._head=new f.default(null,null,Infinity);this._requestId=null;this._maxElapsedMS=100;this.autoStart=!1;this.deltaTime=1;this.elapsedMS=1/m.default.TARGET_FPMS;this.lastTime=-1;this.speed=1;this.started=!1;this._tick=function(c){a._requestId=null;a.started&&(a.update(c),a.started&&null===a._requestId&&
a._head.next&&(a._requestId=requestAnimationFrame(a._tick)))}}c.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))};c.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)};c.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()};c.prototype.add=function(a,c){return this._addListener(new f.default(a,
c,2<arguments.length&&void 0!==arguments[2]?arguments[2]:d.UPDATE_PRIORITY.NORMAL))};c.prototype.addOnce=function(a,c){return this._addListener(new f.default(a,c,2<arguments.length&&void 0!==arguments[2]?arguments[2]:d.UPDATE_PRIORITY.NORMAL,!0))};c.prototype._addListener=function(a){var c=this._head.next,d=this._head;if(c){for(;c;){if(a.priority>c.priority){a.connect(d);break}d=c;c=c.next}a.previous||a.connect(d)}else a.connect(d);this._startIfPossible();return this};c.prototype.remove=function(a,
c){for(var d=this._head.next;d;)d=d.match(a,c)?d.destroy():d.next;this._head.next||this._cancelIfNeeded();return this};c.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())};c.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())};c.prototype.destroy=function(){this.stop();for(var a=this._head.next;a;)a=a.destroy(!0);this._head.destroy();this._head=null};c.prototype.update=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
performance.now();if(a>this.lastTime){var c=this.elapsedMS=a-this.lastTime;c>this._maxElapsedMS&&(c=this._maxElapsedMS);this.deltaTime=c*m.default.TARGET_FPMS*this.speed;c=this._head;for(var d=c.next;d;)d=d.emit(this.deltaTime);c.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=a};h(c,[{key:"FPS",get:function(){return 1E3/this.elapsedMS}},{key:"minFPS",get:function(){return 1E3/this._maxElapsedMS},set:function(a){this._maxElapsedMS=1/Math.min(Math.max(0,a)/1E3,m.default.TARGET_FPMS)}}]);
return c}();g.default=b},{"../const":54,"../settings":109,"./TickerListener":128}],128:[function(b,k,g){g.__esModule=!0;b=function(){function b(h){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.fn=h;this.context=d;this.priority=f;this.once=c;this.previous=this.next=null;this._destroyed=
!1}b.prototype.match=function(b,d){return this.fn===b&&this.context===(d||null)};b.prototype.emit=function(b){this.fn&&(this.context?this.fn.call(this.context,b):this.fn(b));b=this.next;this.once&&this.destroy(!0);this._destroyed&&(this.next=null);return b};b.prototype.connect=function(b){this.previous=b;b.next&&(b.next.previous=this);this.next=b.next;b.next=this};b.prototype.destroy=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;this._destroyed=!0;this.context=this.fn=
null;this.previous&&(this.previous.next=this.next);this.next&&(this.next.previous=this.previous);var d=this.next;this.next=b?null:d;this.previous=null;return d};return b}();g.default=b},{}],129:[function(b,k,g){g.__esModule=!0;g.Ticker=g.shared=void 0;b=(b=b("./Ticker"))&&b.__esModule?b:{default:b};k=new b.default;k.autoStart=!0;k.destroy=function(){};g.shared=k;g.Ticker=b.default},{"./Ticker":127}],130:[function(b,k,g){g.__esModule=!0;g.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},
{}],131:[function(b,k,g){g.__esModule=!0;g.default=function(b){b*=6;for(var h=new Uint16Array(b),d=0,f=0;d<b;d+=6,f+=4)h[d+0]=f+0,h[d+1]=f+1,h[d+2]=f+2,h[d+3]=f+0,h[d+4]=f+2,h[d+5]=f+3;return h}},{}],132:[function(b,k,g){g.__esModule=!0;g.default=function(d){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===d.indexOf("data:"))return"";b=b||window.location;m||(m=document.createElement("a"));m.href=d;d=h.default.parse(m.href);var c=!d.port&&""===b.port||d.port===b.port;
return d.hostname===b.hostname&&c&&d.protocol===b.protocol?"":"anonymous"};var h=(b=b("url"))&&b.__esModule?b:{default:b},m=void 0},{url:7}],133:[function(b,k,g){function h(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);c.default=a;return c}function m(a){return a&&a.__esModule?a:{default:a}}g.__esModule=!0;g.premultiplyBlendMode=g.BaseTextureCache=g.TextureCache=g.earcut=g.mixins=g.pluginTarget=g.EventEmitter=g.removeItems=
g.isMobile=void 0;g.uid=function(){return++n};g.hex2rgb=function(a,c){c=c||[];c[0]=(a>>16&255)/255;c[1]=(a>>8&255)/255;c[2]=(a&255)/255;return c};g.hex2string=function(a){a=a.toString(16);a="000000".substr(0,6-a.length)+a;return"#"+a};g.rgb2hex=function(a){return(255*a[0]<<16)+(255*a[1]<<8)+(255*a[2]|0)};g.getResolutionOfUrl=function(a,c){return(a=f.default.RETINA_PREFIX.exec(a))?parseFloat(a[1]):void 0!==c?c:1};g.decomposeDataUri=function(a){if(a=d.DATA_URI.exec(a))return{mediaType:a[1]?a[1].toLowerCase():
void 0,subType:a[2]?a[2].toLowerCase():void 0,charset:a[3]?a[3].toLowerCase():void 0,encoding:a[4]?a[4].toLowerCase():void 0,data:a[5]}};g.getUrlFileExtension=function(a){if(a=d.URL_FILE_EXTENSION.exec(a))return a[1].toLowerCase()};g.getSvgSize=function(a){a=d.SVG_SIZE.exec(a);var c={};a&&(c[a[1]]=Math.round(parseFloat(a[3])),c[a[5]]=Math.round(parseFloat(a[7])));return c};g.skipHello=function(){p=!0};g.sayHello=function(a){p||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?window.console.log.apply(console,
["\n %c %c %c PixiJS "+d.VERSION+" - \u2730 "+a+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):
window.console&&window.console.log("PixiJS "+d.VERSION+" - "+a+" - http://www.pixijs.com/"),p=!0)};g.isWebGLSupported=function(){var a={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var c=document.createElement("canvas"),d=c.getContext("webgl",a)||c.getContext("experimental-webgl",a),b=!(!d||!d.getContextAttributes().stencil);if(d){var e=d.getExtension("WEBGL_lose_context");e&&e.loseContext()}return b}catch(B){return!1}};g.sign=function(a){return 0===a?
0:0>a?-1:1};g.destroyTextureCache=function(){var a=void 0;for(a in x)x[a].destroy();for(a in t)t[a].destroy()};g.clearTextureCache=function(){var a=void 0;for(a in x)delete x[a];for(a in t)delete t[a]};g.correctBlendMode=function(a,c){return v[c?1:0][a]};g.premultiplyTint=function(a,c){return 1===c?(255*c<<24)+a:0===c?0:(255*c<<24)+(((a>>16&255)*c+.5|0)<<16)+(((a>>8&255)*c+.5|0)<<8)+((a&255)*c+.5|0)};g.premultiplyRgba=function(a,c,d,b){d=d||new Float32Array(4);b||void 0===b?(d[0]=a[0]*c,d[1]=a[1]*
c,d[2]=a[2]*c):(d[0]=a[0],d[1]=a[1],d[2]=a[2]);d[3]=c;return d};g.premultiplyTintToRgba=function(a,c,d,b){d=d||new Float32Array(4);d[0]=(a>>16&255)/255;d[1]=(a>>8&255)/255;d[2]=(a&255)/255;if(b||void 0===b)d[0]*=c,d[1]*=c,d[2]*=c;d[3]=c;return d};var d=b("../const");k=b("../settings");var f=m(k);k=b("eventemitter3");k=m(k);var c=b("./pluginTarget");c=m(c);var a=b("./mixin");a=h(a);var e=b("ismobilejs");e=h(e);var l=b("remove-array-items");l=m(l);var q=b("./mapPremultipliedBlendModes");q=m(q);b=b("earcut");
b=m(b);var n=0,p=!1;g.isMobile=e;g.removeItems=l.default;g.EventEmitter=k.default;g.pluginTarget=c.default;g.mixins=a;g.earcut=b.default;var x=g.TextureCache=Object.create(null),t=g.BaseTextureCache=Object.create(null),v=g.premultiplyBlendMode=(0,q.default)()},{"../const":54,"../settings":109,"./mapPremultipliedBlendModes":134,"./mixin":136,"./pluginTarget":137,earcut:10,eventemitter3:198,ismobilejs:11,"remove-array-items":199}],134:[function(b,k,g){g.__esModule=!0;g.default=function(){for(var b=
[],d=[],f=0;32>f;f++)b[f]=f,d[f]=f;b[h.BLEND_MODES.NORMAL_NPM]=h.BLEND_MODES.NORMAL;b[h.BLEND_MODES.ADD_NPM]=h.BLEND_MODES.ADD;b[h.BLEND_MODES.SCREEN_NPM]=h.BLEND_MODES.SCREEN;d[h.BLEND_MODES.NORMAL]=h.BLEND_MODES.NORMAL_NPM;d[h.BLEND_MODES.ADD]=h.BLEND_MODES.ADD_NPM;d[h.BLEND_MODES.SCREEN]=h.BLEND_MODES.SCREEN_NPM;f=[];f.push(d);f.push(b);return f};var h=b("../const")},{"../const":54}],135:[function(b,k,g){g.__esModule=!0;g.default=function(b){return h.default.tablet||h.default.phone?4:b};var h=
(b=b("ismobilejs"))&&b.__esModule?b:{default:b}},{ismobilejs:11}],136:[function(b,k,g){function h(d,b){if(d&&b)for(var c=Object.keys(b),a=0;a<c.length;++a){var e=c[a];Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(b,e))}}g.__esModule=!0;g.mixin=h;g.delayMixin=function(d,b){m.push(d,b)};g.performMixins=function(){for(var d=0;d<m.length;d+=2)h(m[d],m[d+1]);m.length=0};var m=[]},{}],137:[function(b,k,g){function h(b){b.__plugins={};b.registerPlugin=function(d,f){b.__plugins[d]=f};b.prototype.initPlugins=
function(){this.plugins=this.plugins||{};for(var d in b.__plugins)this.plugins[d]=new b.__plugins[d](this)};b.prototype.destroyPlugins=function(){for(var d in this.plugins)this.plugins[d].destroy(),this.plugins[d]=null;this.plugins=null}}g.__esModule=!0;g.default={mixin:function(b){h(b)}}},{}],138:[function(b,k,g){g.__esModule=!0;g.default=function(b){var h=b.width,d=b.height;b=b.getContext("2d");var f=b.getImageData(0,0,h,d).data,c=f.length,a=null,e=null,l=null,g=null,n=null,p;for(p=0;p<c;p+=4)if(0!==
f[p+3]){var k=p/4%h;var t=~~(p/4/h);null===a&&(a=t);null===e?e=k:k<e&&(e=k);null===l?l=k+1:l<k&&(l=k+1);null===g?g=t:g<t&&(g=t)}null!==a&&(h=l-e,d=g-a+1,n=b.getImageData(e,a,h,d));return{height:d,width:h,data:n}}},{}],139:[function(b,k,g){function h(d){if(!m[d]){var b=Error().stack;"undefined"===typeof b?console.warn("Deprecation Warning: ",d):(b=b.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",
d),console.warn(b),console.groupEnd()):(console.warn("Deprecation Warning: ",d),console.warn(b)));m[d]=!0}}g.__esModule=!0;g.default=function(b){var d=b.mesh,c=b.particles,a=b.extras,e=b.filters,l=b.prepare,g=b.loaders,n=b.interaction;Object.defineProperties(b,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.");}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.");
}},Stage:{get:function(){h("You do not need to use a PIXI Stage any more, you can simply render any container.");return b.Container}},DisplayObjectContainer:{get:function(){h("DisplayObjectContainer has been shortened to Container, please use Container from now on.");return b.Container}},Strip:{get:function(){h("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on.");return d.Mesh}},Rope:{get:function(){h("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on.");
return d.Rope}},ParticleContainer:{get:function(){h("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on.");return c.ParticleContainer}},MovieClip:{get:function(){h("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite.");return a.AnimatedSprite}},TilingSprite:{get:function(){h("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on.");
return a.TilingSprite}},BitmapText:{get:function(){h("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on.");return a.BitmapText}},blendModes:{get:function(){h("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on.");return b.BLEND_MODES}},scaleModes:{get:function(){h("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on.");return b.SCALE_MODES}},BaseTextureCache:{get:function(){h("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on.");
return b.utils.BaseTextureCache}},TextureCache:{get:function(){h("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on.");return b.utils.TextureCache}},math:{get:function(){h("The math namespace is deprecated, please access members already accessible on PIXI.");return b}},AbstractFilter:{get:function(){h("AstractFilter has been renamed to Filter, please use PIXI.Filter");return b.Filter}},TransformManual:{get:function(){h("TransformManual has been renamed to TransformBase, please update your pixi-spine");
return b.TransformBase}},TARGET_FPMS:{get:function(){h("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS");return b.settings.TARGET_FPMS},set:function(a){h("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS");b.settings.TARGET_FPMS=a}},FILTER_RESOLUTION:{get:function(){h("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION");return b.settings.FILTER_RESOLUTION},set:function(a){h("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION");
b.settings.FILTER_RESOLUTION=a}},RESOLUTION:{get:function(){h("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION");return b.settings.RESOLUTION},set:function(a){h("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION");b.settings.RESOLUTION=a}},MIPMAP_TEXTURES:{get:function(){h("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES");return b.settings.MIPMAP_TEXTURES},set:function(a){h("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES");
b.settings.MIPMAP_TEXTURES=a}},SPRITE_BATCH_SIZE:{get:function(){h("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE");return b.settings.SPRITE_BATCH_SIZE},set:function(a){h("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE");b.settings.SPRITE_BATCH_SIZE=a}},SPRITE_MAX_TEXTURES:{get:function(){h("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES");return b.settings.SPRITE_MAX_TEXTURES},
set:function(a){h("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES");b.settings.SPRITE_MAX_TEXTURES=a}},RETINA_PREFIX:{get:function(){h("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX");return b.settings.RETINA_PREFIX},set:function(a){h("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX");b.settings.RETINA_PREFIX=a}},DEFAULT_RENDER_OPTIONS:{get:function(){h("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS");
return b.settings.RENDER_OPTIONS}}});for(var p=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],m=function(a){var c=p[a];Object.defineProperty(b[c.parent],"DEFAULT",{get:function(){h("PIXI."+c.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+c.target));return b.settings[c.target]},set:function(a){h("PIXI."+
c.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+c.target));b.settings[c.target]=a}})},k=0;k<p.length;k++)m(k);Object.defineProperties(b.settings,{PRECISION:{get:function(){h("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT");return b.settings.PRECISION_FRAGMENT},set:function(a){h("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT");b.settings.PRECISION_FRAGMENT=a}}});a.AnimatedSprite&&Object.defineProperties(a,
{MovieClip:{get:function(){h("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on.");return a.AnimatedSprite}}});a&&Object.defineProperties(a,{TextureTransform:{get:function(){h("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on.");return b.TextureMatrix}}});b.DisplayObject.prototype.generateTexture=function(a,c,b){h("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)");
return a.generateTexture(this,c,b)};b.Graphics.prototype.generateTexture=function(a,c){h("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture");return this.generateCanvasTexture(a,c)};b.GroupD8.isSwapWidthHeight=function(a){h("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical");return b.GroupD8.isVertical(a)};b.RenderTexture.prototype.render=function(a,c,b,d){this.legacyRenderer.render(a,this,b,c,!d);h("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")};
b.RenderTexture.prototype.getImage=function(a){h("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)");return this.legacyRenderer.extract.image(a)};b.RenderTexture.prototype.getBase64=function(a){h("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)");return this.legacyRenderer.extract.base64(a)};b.RenderTexture.prototype.getCanvas=function(a){h("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)");
return this.legacyRenderer.extract.canvas(a)};b.RenderTexture.prototype.getPixels=function(a){h("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)");return this.legacyRenderer.pixels(a)};b.Sprite.prototype.setTexture=function(a){this.texture=a;h("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")};a.BitmapText&&(a.BitmapText.prototype.setText=function(a){this.text=a;h("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")});
b.Text.prototype.setText=function(a){this.text=a;h("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")};b.Text.calculateFontProperties=function(a){h("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont");return b.TextMetrics.measureFont(a)};Object.defineProperties(b.Text,{fontPropertiesCache:{get:function(){h("Text.fontPropertiesCache is deprecated");return b.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){h("Text.fontPropertiesCanvas is deprecated");
return b.TextMetrics._canvas}},fontPropertiesContext:{get:function(){h("Text.fontPropertiesContext is deprecated");return b.TextMetrics._context}}});b.Text.prototype.setStyle=function(a){this.style=a;h("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")};b.Text.prototype.determineFontProperties=function(a){h("determineFontProperties is now deprecated, please use TextMetrics.measureFont method");return b.TextMetrics.measureFont(a)};b.Text.getFontStyle=function(a){h("getFontStyle is now deprecated, please use TextStyle.toFontString() instead");
a=a||{};a instanceof b.TextStyle||(a=new b.TextStyle(a));return a.toFontString()};Object.defineProperties(b.TextStyle.prototype,{font:{get:function(){h("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+("number"===typeof this._fontSize?this._fontSize+"px":this._fontSize)+" "+this._fontFamily},set:function(a){h("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on");
1<a.indexOf("italic")?this._fontStyle="italic":-1<a.indexOf("oblique")?this._fontStyle="oblique":this._fontStyle="normal";-1<a.indexOf("small-caps")?this._fontVariant="small-caps":this._fontVariant="normal";a=a.split(" ");var c=-1;this._fontSize=26;for(var b=0;b<a.length;++b)if(a[b].match(/(px|pt|em|%)/)){c=b;this._fontSize=a[b];break}this._fontWeight="normal";for(b=0;b<c;++b)if(a[b].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=a[b];break}if(-1<c&&c<a.length-
1){this._fontFamily="";for(c+=1;c<a.length;++c)this._fontFamily+=a[c]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}});b.Texture.prototype.setFrame=function(a){this.frame=a;h("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")};b.Texture.addTextureToCache=function(a,c){b.Texture.addToCache(a,c);h("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")};b.Texture.removeTextureFromCache=
function(a){h("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache");b.BaseTexture.removeFromCache(a);return b.Texture.removeFromCache(a)};Object.defineProperties(e,{AbstractFilter:{get:function(){h("AstractFilter has been renamed to Filter, please use PIXI.Filter");return b.AbstractFilter}},SpriteMaskFilter:{get:function(){h("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on.");
return b.SpriteMaskFilter}},VoidFilter:{get:function(){h("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter");return e.AlphaFilter}}});b.utils.uuid=function(){h("utils.uuid() is deprecated, please use utils.uid() from now on.");return b.utils.uid()};b.utils.canUseNewCanvasBlendModes=function(){h("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on");return b.CanvasTinter.canUseMultiply};var v=!0;Object.defineProperty(b.utils,
"_saidHello",{set:function(a){a&&(h("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello());v=a},get:function(){return v}});l.BasePrepare&&(l.BasePrepare.prototype.register=function(a,c){h("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook");a&&this.registerFindHook(a);c&&this.registerUploadHook(c);return this});l.canvas&&Object.defineProperty(l.canvas,"UPLOADS_PER_FRAME",
{set:function(){h("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){h("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter");return NaN}});l.webgl&&Object.defineProperty(l.webgl,"UPLOADS_PER_FRAME",{set:function(){h("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},
get:function(){h("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter");return NaN}});if(g.Loader){var w=g.Resource;l=g.Loader;Object.defineProperties(w.prototype,{isJson:{get:function(){h("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`.");return this.type===w.TYPE.JSON}},isXml:{get:function(){h("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`.");return this.type===w.TYPE.XML}},isImage:{get:function(){h("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`.");
return this.type===w.TYPE.IMAGE}},isAudio:{get:function(){h("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`.");return this.type===w.TYPE.AUDIO}},isVideo:{get:function(){h("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`.");return this.type===w.TYPE.VIDEO}}});Object.defineProperties(l.prototype,{before:{get:function(){h("The before() method is deprecated, please use pre().");return this.pre}},after:{get:function(){h("The after() method is deprecated, please use use().");
return this.use}}})}n.interactiveTarget&&Object.defineProperty(n.interactiveTarget,"defaultCursor",{set:function(a){h("Property defaultCursor has been replaced with 'cursor'. ");this.cursor=a},get:function(){h("Property defaultCursor has been replaced with 'cursor'. ");return this.cursor}});n.InteractionManager&&(Object.defineProperty(n.InteractionManager,"defaultCursorStyle",{set:function(a){h("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. ");this.cursorStyles.default=
a},get:function(){h("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. ");return this.cursorStyles.default}}),Object.defineProperty(n.InteractionManager,"currentCursorStyle",{set:function(a){h("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently.");this.currentCursorMode=a},get:function(){h("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently.");return this.currentCursorMode}}))};
var m={}},{}],140:[function(b,k,g){g.__esModule=!0;var h=function(b){if(b&&b.__esModule)return b;var d={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c]);d.default=b;return d}(b("../../core")),m=new h.Rectangle;b=function(){function b(d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.renderer=d;d.extract=this}b.prototype.image=function(b){var c=new Image;c.src=this.base64(b);return c};b.prototype.base64=function(b){return this.canvas(b).toDataURL()};
b.prototype.canvas=function(b){var c=this.renderer,a=void 0,d=void 0;b&&(d=b instanceof h.RenderTexture?b:c.generateTexture(b));d?(b=d.baseTexture._canvasRenderTarget.context,a=d.baseTexture._canvasRenderTarget.resolution,c=d.frame):(b=c.rootContext,c=m,c.width=this.renderer.width,c.height=this.renderer.height);var f=c.width*a,g=c.height*a;d=new h.CanvasRenderTarget(f,g,1);a=b.getImageData(c.x*a,c.y*a,f,g);d.context.putImageData(a,0,0);return d.canvas};b.prototype.pixels=function(b){var c=this.renderer,
a=void 0;var d=void 0;b&&(d=b instanceof h.RenderTexture?b:c.generateTexture(b));d?(b=d.baseTexture._canvasRenderTarget.context,a=d.baseTexture._canvasRenderTarget.resolution,d=d.frame):(b=c.rootContext,d=m,d.width=c.width,d.height=c.height);return b.getImageData(0,0,d.width*a,d.height*a).data};b.prototype.destroy=function(){this.renderer=this.renderer.extract=null};return b}();g.default=b;h.CanvasRenderer.registerPlugin("extract",b)},{"../../core":73}],141:[function(b,k,g){g.__esModule=!0;var h=
b("./webgl/WebGLExtract");Object.defineProperty(g,"webgl",{enumerable:!0,get:function(){return(h&&h.__esModule?h:{default:h}).default}});var m=b("./canvas/CanvasExtract");Object.defineProperty(g,"canvas",{enumerable:!0,get:function(){return(m&&m.__esModule?m:{default:m}).default}})},{"./canvas/CanvasExtract":140,"./webgl/WebGLExtract":142}],142:[function(b,k,g){g.__esModule=!0;var h=function(b){if(b&&b.__esModule)return b;var d={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&
(d[c]=b[c]);d.default=b;return d}(b("../../core")),m=new h.Rectangle;b=function(){function b(d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.renderer=d;d.extract=this}b.prototype.image=function(b){var c=new Image;c.src=this.base64(b);return c};b.prototype.base64=function(b){return this.canvas(b).toDataURL()};b.prototype.canvas=function(b){var c=this.renderer,a=void 0,d=!1;b&&(b instanceof h.RenderTexture?a=b:(a=this.renderer.generateTexture(b),d=!0));if(a){var f=
a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID];var g=f.resolution;var n=a.frame;b=!1}else f=this.renderer.rootRenderTarget,g=f.resolution,b=!0,n=m,n.width=f.size.width,n.height=f.size.height;var p=n.width*g,k=n.height*g,t=new h.CanvasRenderTarget(p,k,1);f&&(c.bindRenderTarget(f),f=new Uint8Array(4*p*k),c=c.gl,c.readPixels(n.x*g,n.y*g,p,k,c.RGBA,c.UNSIGNED_BYTE,f),c=t.context.getImageData(0,0,p,k),c.data.set(f),t.context.putImageData(c,0,0),b&&(t.context.scale(1,-1),t.context.drawImage(t.canvas,
0,-k)));d&&a.destroy(!0);return t.canvas};b.prototype.pixels=function(b){var c=this.renderer,a=void 0,d=!1;b&&(b instanceof h.RenderTexture?a=b:(a=this.renderer.generateTexture(b),d=!0));if(a){var f=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID];b=f.resolution;var g=a.frame}else f=this.renderer.rootRenderTarget,b=f.resolution,g=m,g.width=f.size.width,g.height=f.size.height;var n=g.width*b,p=g.height*b,k=new Uint8Array(4*n*p);f&&(c.bindRenderTarget(f),c=c.gl,c.readPixels(g.x*b,g.y*b,n,p,
c.RGBA,c.UNSIGNED_BYTE,k));d&&a.destroy(!0);return k};b.prototype.destroy=function(){this.renderer=this.renderer.extract=null};return b}();g.default=b;h.WebGLRenderer.registerPlugin("extract",b)},{"../../core":73}],143:[function(b,k,g){function h(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?
Object.setPrototypeOf(b,c):b.__proto__=c)}g.__esModule=!0;var m=function(){function b(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,d){a&&b(c.prototype,a);d&&b(c,d);return c}}(),d=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}(b("../core"));b=function(b){function c(a,
e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var f=b.call(this,a[0]instanceof d.Texture?a[0]:a[0].texture);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=!f||"object"!==typeof f&&"function"!==typeof f?this:f;f._textures=null;f._durations=null;f.textures=a;f._autoUpdate=!1!==e;f.animationSpeed=1;f.loop=!0;f.onComplete=null;f.onFrameChange=null;f.onLoop=null;f._currentTime=0;f.playing=!1;return f}h(c,b);c.prototype.stop=
function(){this.playing&&(this.playing=!1,this._autoUpdate&&d.ticker.shared.remove(this.update,this))};c.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&d.ticker.shared.add(this.update,this,d.UPDATE_PRIORITY.HIGH))};c.prototype.gotoAndStop=function(a){this.stop();var c=this.currentFrame;this._currentTime=a;c!==this.currentFrame&&this.updateTexture()};c.prototype.gotoAndPlay=function(a){var c=this.currentFrame;this._currentTime=a;c!==this.currentFrame&&this.updateTexture();
this.play()};c.prototype.update=function(a){var c=this.animationSpeed*a,b=this.currentFrame;if(null!==this._durations){var d=this._currentTime%1*this._durations[this.currentFrame];for(d+=c/60*1E3;0>d;)this._currentTime--,d+=this._durations[this.currentFrame];a=Math.sign(this.animationSpeed*a);for(this._currentTime=Math.floor(this._currentTime);d>=this._durations[this.currentFrame];)d-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=d/this._durations[this.currentFrame]}else this._currentTime+=
c;if(0>this._currentTime&&!this.loop){if(this.gotoAndStop(0),this.onComplete)this.onComplete()}else if(this._currentTime>=this._textures.length&&!this.loop){if(this.gotoAndStop(this._textures.length-1),this.onComplete)this.onComplete()}else if(b!==this.currentFrame){if(this.loop&&this.onLoop)if(0<this.animationSpeed&&this.currentFrame<b)this.onLoop();else if(0>this.animationSpeed&&this.currentFrame>b)this.onLoop();this.updateTexture()}};c.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame];
this._textureID=-1;this.cachedTint=16777215;if(this.onFrameChange)this.onFrameChange(this.currentFrame)};c.prototype.destroy=function(a){this.stop();b.prototype.destroy.call(this,a)};c.fromFrames=function(a){for(var b=[],f=0;f<a.length;++f)b.push(d.Texture.fromFrame(a[f]));return new c(b)};c.fromImages=function(a){for(var b=[],f=0;f<a.length;++f)b.push(d.Texture.fromImage(a[f]));return new c(b)};m(c,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},
set:function(a){if(a[0]instanceof d.Texture)this._textures=a,this._durations=null;else{this._textures=[];this._durations=[];for(var c=0;c<a.length;c++)this._textures.push(a[c].texture),this._durations.push(a[c].time)}this.gotoAndStop(0);this.updateTexture()}},{key:"currentFrame",get:function(){var a=Math.floor(this._currentTime)%this._textures.length;0>a&&(a+=this._textures.length);return a}}]);return c}(d.Sprite);g.default=b},{"../core":73}],144:[function(b,k,g){function h(a,c){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!c||"object"!==typeof c&&"function"!==typeof c?a:c}function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;var d=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=
!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,d){b&&a(c.prototype,b);d&&a(c,d);return c}}(),f=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c.default=a;return c}(b("../core")),c=(k=b("../core/math/ObservablePoint"))&&k.__esModule?k:{default:k},a=b("../core/utils"),e=(b=b("../core/settings"))&&b.__esModule?b:{default:b};b=function(b){function l(a){var d=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:{};if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");var e=h(this,b.call(this));e._textWidth=0;e._textHeight=0;e._glyphs=[];e._font={tint:void 0!==d.tint?d.tint:16777215,align:d.align||"left",name:null,size:0};e.font=d.font;e._text=a;e._maxWidth=0;e._maxLineHeight=0;e._letterSpacing=0;e._anchor=new c.default(function(){e.dirty=!0},e,0,0);e.dirty=!1;e.updateText();return e}m(l,b);l.prototype.updateText=function(){for(var a=l.fonts[this._font.name],
c=this._font.size/a.size,b=new f.Point,d=[],e=[],h=this.text.replace(/(?:\r\n|\r)/g,"\n"),g=h.length,q=this._maxWidth*a.size/this._font.size,m=null,k=0,B=0,C=0,r=-1,D=0,E=0,O=0,F=0;F<g;F++){var I=h.charCodeAt(F),K=h.charAt(F);/(?:\s)/.test(K)&&(r=F,D=k);if("\r"===K||"\n"===K)e.push(k),B=Math.max(B,k),++C,++E,b.x=0,b.y+=a.lineHeight,m=null;else if(K=a.chars[I])m&&K.kerning[m]&&(b.x+=K.kerning[m]),d.push({texture:K.texture,line:C,charCode:I,position:new f.Point(b.x+K.xOffset+this._letterSpacing/2,b.y+
K.yOffset)}),b.x+=K.xAdvance+this._letterSpacing,k=b.x,O=Math.max(O,K.yOffset+K.texture.height),m=I,-1!==r&&0<q&&b.x>q&&(++E,f.utils.removeItems(d,1+r-E,1+F-r),F=r,r=-1,e.push(D),B=Math.max(B,D),C++,b.x=0,b.y+=a.lineHeight,m=null)}h=h.charAt(h.length-1);"\r"!==h&&"\n"!==h&&(/(?:\s)/.test(h)&&(k=D),e.push(k),B=Math.max(B,k));k=[];for(D=0;D<=C;D++)h=0,"right"===this._font.align?h=B-e[D]:"center"===this._font.align&&(h=(B-e[D])/2),k.push(h);e=d.length;C=this.tint;for(D=0;D<e;D++)(h=this._glyphs[D])?
h.texture=d[D].texture:(h=new f.Sprite(d[D].texture),this._glyphs.push(h)),h.position.x=(d[D].position.x+k[d[D].line])*c,h.position.y=d[D].position.y*c,h.scale.x=h.scale.y=c,h.tint=C,h.parent||this.addChild(h);for(d=e;d<this._glyphs.length;++d)this.removeChild(this._glyphs[d]);this._textWidth=B*c;this._textHeight=(b.y+a.lineHeight)*c;if(0!==this.anchor.x||0!==this.anchor.y)for(a=0;a<e;a++)this._glyphs[a].x-=this._textWidth*this.anchor.x,this._glyphs[a].y-=this._textHeight*this.anchor.y;this._maxLineHeight=
O*c};l.prototype.updateTransform=function(){this.validate();this.containerUpdateTransform()};l.prototype.getLocalBounds=function(){this.validate();return b.prototype.getLocalBounds.call(this)};l.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)};l.registerFont=function(c,b){var d={},h=c.getElementsByTagName("info")[0],g=c.getElementsByTagName("common")[0],n=c.getElementsByTagName("page"),p=(0,a.getResolutionOfUrl)(n[0].getAttribute("file"),e.default.RESOLUTION),q={};d.font=
h.getAttribute("face");d.size=parseInt(h.getAttribute("size"),10);d.lineHeight=parseInt(g.getAttribute("lineHeight"),10)/p;d.chars={};b instanceof f.Texture&&(b=[b]);for(h=0;h<n.length;h++){g=n[h].getAttribute("id");var m=n[h].getAttribute("file");q[g]=b instanceof Array?b[h]:b[m]}b=c.getElementsByTagName("char");for(n=0;n<b.length;n++){h=b[n];g=parseInt(h.getAttribute("id"),10);m=h.getAttribute("page")||0;var k=new f.Rectangle(parseInt(h.getAttribute("x"),10)/p+q[m].frame.x/p,parseInt(h.getAttribute("y"),
10)/p+q[m].frame.y/p,parseInt(h.getAttribute("width"),10)/p,parseInt(h.getAttribute("height"),10)/p);d.chars[g]={xOffset:parseInt(h.getAttribute("xoffset"),10)/p,yOffset:parseInt(h.getAttribute("yoffset"),10)/p,xAdvance:parseInt(h.getAttribute("xadvance"),10)/p,kerning:{},texture:new f.Texture(q[m].baseTexture,k),page:m}}c=c.getElementsByTagName("kerning");for(q=0;q<c.length;q++)h=c[q],b=parseInt(h.getAttribute("first"),10)/p,n=parseInt(h.getAttribute("second"),10)/p,h=parseInt(h.getAttribute("amount"),
10)/p,d.chars[n]&&(d.chars[n].kerning[b]=h);return l.fonts[d.font]=d};d(l,[{key:"tint",get:function(){return this._font.tint},set:function(a){this._font.tint="number"===typeof a&&0<=a?a:16777215;this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(a){this._font.align=a||"left";this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(a){"number"===typeof a?this._anchor.set(a):this._anchor.copy(a)}},{key:"font",get:function(){return this._font},set:function(a){a&&
("string"===typeof a?(a=a.split(" "),this._font.name=1===a.length?a[0]:a.slice(1).join(" "),this._font.size=2<=a.length?parseInt(a[0],10):l.fonts[this._font.name].size):(this._font.name=a.name,this._font.size="number"===typeof a.size?a.size:parseInt(a.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(a){a=a.toString()||" ";this._text!==a&&(this._text=a,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(a){this._maxWidth!==a&&(this._maxWidth=
a,this.dirty=!0)}},{key:"maxLineHeight",get:function(){this.validate();return this._maxLineHeight}},{key:"textWidth",get:function(){this.validate();return this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(a){this._letterSpacing!==a&&(this._letterSpacing=a,this.dirty=!0)}},{key:"textHeight",get:function(){this.validate();return this._textHeight}}]);return l}(f.Container);g.default=b;b.fonts={}},{"../core":73,"../core/math/ObservablePoint":76,"../core/settings":109,
"../core/utils":133}],145:[function(b,k,g){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;var m=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in
d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,d){b&&a(c.prototype,b);d&&a(c,d);return c}}(),d=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c.default=a;return c}(b("../core")),f=(b=b("../core/sprites/canvas/CanvasTinter"))&&b.__esModule?b:{default:b},c=new d.Point;b=function(a){function b(c){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,f=2<arguments.length&&void 0!==arguments[2]?
arguments[2]:100;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var h=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");h=!h||"object"!==typeof h&&"function"!==typeof h?this:h;h.tileTransform=new d.TransformStatic;h._width=e;h._height=f;h._canvasPattern=null;h.uvTransform=c.transform||new d.TextureMatrix(c);h.pluginName="tilingSprite";h.uvRespectAnchor=!1;return h}h(b,a);b.prototype._onTextureUpdate=function(){this.uvTransform&&
(this.uvTransform.texture=this._texture);this.cachedTint=16777215};b.prototype._renderWebGL=function(a){var c=this._texture;c&&c.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),a.setObjectRenderer(a.plugins[this.pluginName]),a.plugins[this.pluginName].render(this))};b.prototype._renderCanvas=function(a){var c=this._texture;if(c.baseTexture.hasLoaded){var b=a.context,e=this.worldTransform,h=a.resolution,l=c.baseTexture,g=l.resolution,m=this.tilePosition.x/this.tileScale.x%
c._frame.width*g,k=this.tilePosition.y/this.tileScale.y%c._frame.height*g;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var u=new d.CanvasRenderTarget(c._frame.width,c._frame.height,g);16777215!==this.tint?(this.tintedTexture=f.default.getTintedTexture(this,this.tint),u.context.drawImage(this.tintedTexture,0,0)):u.context.drawImage(l.source,-c._frame.x*g,-c._frame.y*g);this.cachedTint=this.tint;this._canvasPattern=u.context.createPattern(u.canvas,
"repeat")}b.globalAlpha=this.worldAlpha;b.setTransform(e.a*h,e.b*h,e.c*h,e.d*h,e.tx*h,e.ty*h);a.setBlendMode(this.blendMode);b.fillStyle=this._canvasPattern;b.scale(this.tileScale.x/g,this.tileScale.y/g);a=this.anchor.x*-this._width;c=this.anchor.y*-this._height;this.uvRespectAnchor?(b.translate(m,k),b.fillRect(-m+a,-k+c,this._width/this.tileScale.x*g,this._height/this.tileScale.y*g)):(b.translate(m+a,k+c),b.fillRect(-m,-k,this._width/this.tileScale.x*g,this._height/this.tileScale.y*g))}};b.prototype._calculateBounds=
function(){this._bounds.addFrame(this.transform,this._width*-this._anchor._x,this._height*-this._anchor._y,this._width*(1-this._anchor._x),this._height*(1-this._anchor._y))};b.prototype.getLocalBounds=function(c){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),c||(this._localBoundsRect||(this._localBoundsRect=new d.Rectangle),
c=this._localBoundsRect),this._bounds.getRectangle(c)):a.prototype.getLocalBounds.call(this,c)};b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,c);var b=this._width;a=this._height;var d=-b*this.anchor._x;return c.x>=d&&c.x<d+b&&(b=-a*this.anchor._y,c.y>=b&&c.y<b+a)?!0:!1};b.prototype.destroy=function(c){a.prototype.destroy.call(this,c);this.uvTransform=this.tileTransform=null};b.from=function(a,c,e){return new b(d.Texture.from(a),c,e)};b.fromFrame=function(a,c,e){var f=d.utils.TextureCache[a];
if(!f)throw Error('The frameId "'+a+'" does not exist in the texture cache '+this);return new b(f,c,e)};b.fromImage=function(a,c,e,f,h){return new b(d.Texture.fromImage(a,f,h),c,e)};m(b,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(a){this.uvTransform.clampMargin=a;this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(a){this.tileTransform.scale.copy(a)}},{key:"tilePosition",get:function(){return this.tileTransform.position},
set:function(a){this.tileTransform.position.copy(a)}},{key:"width",get:function(){return this._width},set:function(a){this._width=a}},{key:"height",get:function(){return this._height},set:function(a){this._height=a}}]);return b}(d.Sprite);g.default=b},{"../core":73,"../core/sprites/canvas/CanvasTinter":112}],146:[function(b,k,g){var h=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c.default=a;return c}(b("../core")),
m=(k=b("../core/textures/Texture"))&&k.__esModule?k:{default:k},d=(k=b("../core/textures/BaseTexture"))&&k.__esModule?k:{default:k},f=b("../core/utils");b=h.DisplayObject;var c=new h.Matrix;b.prototype._cacheAsBitmap=!1;b.prototype._cacheData=!1;var a=function l(){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.sprite=this.originalFilterArea=this.originalMask=this.originalDestroy=this.originalHitTest=this.originalUpdateTransform=this.originalGetLocalBounds=this.originalCalculateBounds=
this.originalRenderCanvas=this.originalRenderWebGL=this.textureCacheId=null};Object.defineProperties(b.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(c){this._cacheAsBitmap!==c&&((this._cacheAsBitmap=c)?(this._cacheData||(this._cacheData=new a),c=this._cacheData,c.originalRenderWebGL=this.renderWebGL,c.originalRenderCanvas=this.renderCanvas,c.originalUpdateTransform=this.updateTransform,c.originalCalculateBounds=this._calculateBounds,c.originalGetLocalBounds=this.getLocalBounds,
c.originalDestroy=this.destroy,c.originalContainsPoint=this.containsPoint,c.originalMask=this._mask,c.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(c=this._cacheData,c.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=c.originalRenderWebGL,this.renderCanvas=c.originalRenderCanvas,this._calculateBounds=c.originalCalculateBounds,this.getLocalBounds=c.originalGetLocalBounds,this.destroy=
c.originalDestroy,this.updateTransform=c.originalUpdateTransform,this.containsPoint=c.originalContainsPoint,this._mask=c.originalMask,this.filterArea=c.originalFilterArea))}}});b.prototype._renderCachedWebGL=function(a){!this.visible||0>=this.worldAlpha||!this.renderable||(this._initCachedDisplayObject(a),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(a))};b.prototype._initCachedDisplayObject=function(a){if(!this._cacheData||
!this._cacheData.sprite){var b=this.alpha;this.alpha=1;a.currentRenderer.flush();var g=this.getLocalBounds().clone();this._filters&&g.pad(this._filters[0].padding);var l=a._activeRenderTarget,k=a.filterManager.filterStack,t=h.RenderTexture.create(g.width|0,g.height|0),v="cacheAsBitmap_"+(0,f.uid)();this._cacheData.textureCacheId=v;d.default.addToCache(t.baseTexture,v);m.default.addToCache(t,v);c.tx=-g.x;c.ty=-g.y;this.transform.worldTransform.identity();this.renderWebGL=this._cacheData.originalRenderWebGL;
a.render(this,t,!0,c,!0);a.bindRenderTarget(l);a.filterManager.filterStack=k;this.renderWebGL=this._renderCachedWebGL;this.updateTransform=this.displayObjectUpdateTransform;this.filterArea=this._mask=null;l=new h.Sprite(t);l.transform.worldTransform=this.transform.worldTransform;l.anchor.x=-(g.x/g.width);l.anchor.y=-(g.y/g.height);l.alpha=b;l._bounds=this._bounds;this._calculateBounds=this._calculateCachedBounds;this.getLocalBounds=this._getCachedLocalBounds;this._cacheData.sprite=l;this.transform._parentID=
-1;this.parent?this.updateTransform():(this.parent=a._tempDisplayObjectParent,this.updateTransform(),this.parent=null);this.containsPoint=l.containsPoint.bind(l)}};b.prototype._renderCachedCanvas=function(a){!this.visible||0>=this.worldAlpha||!this.renderable||(this._initCachedDisplayObjectCanvas(a),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(a))};b.prototype._initCachedDisplayObjectCanvas=function(a){if(!this._cacheData||!this._cacheData.sprite){var b=this.getLocalBounds(),
g=this.alpha;this.alpha=1;var l=a.context,k=h.RenderTexture.create(b.width|0,b.height|0),t="cacheAsBitmap_"+(0,f.uid)();this._cacheData.textureCacheId=t;d.default.addToCache(k.baseTexture,t);m.default.addToCache(k,t);this.transform.localTransform.copy(c);c.invert();c.tx-=b.x;c.ty-=b.y;this.renderCanvas=this._cacheData.originalRenderCanvas;a.render(this,k,!0,c,!1);a.context=l;this.renderCanvas=this._renderCachedCanvas;this._calculateBounds=this._calculateCachedBounds;this.filterArea=this._mask=null;
l=new h.Sprite(k);l.transform.worldTransform=this.transform.worldTransform;l.anchor.x=-(b.x/b.width);l.anchor.y=-(b.y/b.height);l._bounds=this._bounds;l.alpha=g;this.parent?this.updateTransform():(this.parent=a._tempDisplayObjectParent,this.updateTransform(),this.parent=null);this.updateTransform=this.displayObjectUpdateTransform;this._cacheData.sprite=l;this.containsPoint=l.containsPoint.bind(l)}};b.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()};b.prototype._getCachedLocalBounds=
function(){return this._cacheData.sprite.getLocalBounds()};b.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0);this._cacheData.sprite=null;d.default.removeFromCache(this._cacheData.textureCacheId);m.default.removeFromCache(this._cacheData.textureCacheId);this._cacheData.textureCacheId=null};b.prototype._cacheAsBitmapDestroy=function(a){this.cacheAsBitmap=!1;this.destroy(a)}},{"../core":73,"../core/textures/BaseTexture":120,"../core/textures/Texture":123,
"../core/utils":133}],147:[function(b,k,g){b=function(b){if(b&&b.__esModule)return b;var h={};if(null!=b)for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(h[d]=b[d]);h.default=b;return h}(b("../core"));b.DisplayObject.prototype.name=null;b.Container.prototype.getChildByName=function(b){for(var h=0;h<this.children.length;h++)if(this.children[h].name===b)return this.children[h];return null}},{"../core":73}],148:[function(b,k,g){var h=function(b){if(b&&b.__esModule)return b;var d={};if(null!=
b)for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(d[f]=b[f]);d.default=b;return d}(b("../core"));h.DisplayObject.prototype.getGlobalPosition=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new h.Point,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;this.parent?this.parent.toGlobal(this.position,b,d):(b.x=this.position.x,b.y=this.position.y);return b}},{"../core":73}],149:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}g.__esModule=
!0;g.BitmapText=g.TilingSpriteRenderer=g.TilingSprite=g.AnimatedSprite=void 0;var m=b("./AnimatedSprite");Object.defineProperty(g,"AnimatedSprite",{enumerable:!0,get:function(){return h(m).default}});var d=b("./TilingSprite");Object.defineProperty(g,"TilingSprite",{enumerable:!0,get:function(){return h(d).default}});var f=b("./webgl/TilingSpriteRenderer");Object.defineProperty(g,"TilingSpriteRenderer",{enumerable:!0,get:function(){return h(f).default}});var c=b("./BitmapText");Object.defineProperty(g,
"BitmapText",{enumerable:!0,get:function(){return h(c).default}});b("./cacheAsBitmap");b("./getChildByName");b("./getGlobalPosition")},{"./AnimatedSprite":143,"./BitmapText":144,"./TilingSprite":145,"./cacheAsBitmap":146,"./getChildByName":147,"./getGlobalPosition":148,"./webgl/TilingSpriteRenderer":150}],150:[function(b,k,g){function h(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,
{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}g.__esModule=!0;var m=function(c){if(c&&c.__esModule)return c;var a={};if(null!=c)for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b]);a.default=c;return a}(b("../../core")),d=b("../../core/const");b("path");var f=new m.Matrix;b=function(c){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");b=c.call(this,
b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.shader=null;b.simpleShader=null;b.quad=null;return b}h(a,c);a.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=new m.Shader(a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",
"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n");this.simpleShader=new m.Shader(a,
"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n");
this.renderer.bindVao(null);this.quad=new m.Quad(a,this.renderer.state.attribState);this.quad.initVao(this.shader)};a.prototype.render=function(a){var c=this.renderer,b=this.quad;c.bindVao(b.vao);var e=b.vertices;e[0]=e[6]=a._width*-a.anchor.x;e[1]=e[3]=a._height*-a.anchor.y;e[2]=e[4]=a._width*(1-a.anchor.x);e[5]=e[7]=a._height*(1-a.anchor.y);a.uvRespectAnchor&&(e=b.uvs,e[0]=e[6]=-a.anchor.x,e[1]=e[3]=-a.anchor.y,e[2]=e[4]=1-a.anchor.x,e[5]=e[7]=1-a.anchor.y);b.upload();e=a._texture;var h=e.baseTexture,
g=a.tileTransform.localTransform,k=a.uvTransform,v=h.isPowerOfTwo&&e.frame.width===h.width&&e.frame.height===h.height;v&&(h._glTextures[c.CONTEXT_UID]?v=h.wrapMode!==d.WRAP_MODES.CLAMP:h.wrapMode===d.WRAP_MODES.CLAMP&&(h.wrapMode=d.WRAP_MODES.REPEAT));var w=v?this.simpleShader:this.shader;c.bindShader(w);var A=e.width,u=e.height,z=a._width,y=a._height;f.set(g.a*A/z,g.b*A/y,g.c*u/z,g.d*u/y,g.tx/z,g.ty/y);f.invert();v?f.prepend(k.mapCoord):(w.uniforms.uMapCoord=k.mapCoord.toArray(!0),w.uniforms.uClampFrame=
k.uClampFrame,w.uniforms.uClampOffset=k.uClampOffset);w.uniforms.uTransform=f.toArray(!0);w.uniforms.uColor=m.utils.premultiplyTintToRgba(a.tint,a.worldAlpha,w.uniforms.uColor,h.premultipliedAlpha);w.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0);w.uniforms.uSampler=c.bindTexture(e);c.setBlendMode(m.utils.correctBlendMode(a.blendMode,h.premultipliedAlpha));b.vao.draw(this.renderer.gl.TRIANGLES,6,0)};return a}(m.ObjectRenderer);g.default=b;m.WebGLRenderer.registerPlugin("tilingSprite",
b)},{"../../core":73,"../../core/const":54,path:1}],151:[function(b,k,g){function h(b,f){if("function"!==typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);b.prototype=Object.create(f&&f.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});f&&(Object.setPrototypeOf?Object.setPrototypeOf(b,f):b.__proto__=f)}g.__esModule=!0;var m=function(){function b(b,c){for(var a=0;a<c.length;a++){var d=c[a];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(d,c,a){c&&b(d.prototype,c);a&&b(d,a);return d}}();k=function(b){if(b&&b.__esModule)return b;var d={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c]);d.default=b;return d}(b("../../core"));b("path");b=function(b){function d(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
var a=b.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.alpha=c;a.glShaderKey="alpha";return a}h(d,b);m(d,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(c){this.uniforms.uAlpha=c}}]);return d}(k.Filter);g.default=b},{"../../core":73,path:1}],152:[function(b,k,g){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;var m=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,d){b&&a(c.prototype,b);d&&a(c,d);return c}}(),d=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c.default=
a;return c}(b("../../core")),f=(k=b("./BlurXFilter"))&&k.__esModule?k:{default:k},c=(b=b("./BlurYFilter"))&&b.__esModule?b:{default:b};b=function(a){function b(e,h,g,p){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var l=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");l=!l||"object"!==typeof l&&"function"!==typeof l?this:l;l.blurXFilter=new f.default(e,h,g,p);l.blurYFilter=new c.default(e,h,g,p);l.padding=
0;l.resolution=g||d.settings.RESOLUTION;l.quality=h||4;l.blur=e||8;return l}h(b,a);b.prototype.apply=function(a,c,b){var d=a.getRenderTarget(!0);this.blurXFilter.apply(a,c,d,!0);this.blurYFilter.apply(a,d,b,!1);a.returnRenderTarget(d)};m(b,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a;this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},
set:function(a){this.blurXFilter.quality=this.blurYFilter.quality=a}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a;this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a;this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},
set:function(a){this.blurYFilter._blendMode=a}}]);return b}(d.Filter);g.default=b},{"../../core":73,"./BlurXFilter":153,"./BlurYFilter":154}],153:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
c):a.__proto__=c)}g.__esModule=!0;var d=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,d){b&&a(c.prototype,b);d&&a(c,d);return c}}(),f=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c.default=a;return c}(b("../../core"));k=b("./generateBlurVertSource");var c=h(k);k=b("./generateBlurFragSource");
var a=h(k);b=b("./getMaxBlurKernelSize");var e=h(b);b=function(b){function h(d,e,g,l){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");l=l||5;var p=(0,c.default)(l,!0);l=(0,a.default)(l);p=b.call(this,p,l);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");p=!p||"object"!==typeof p&&"function"!==typeof p?this:p;p.resolution=g||f.settings.RESOLUTION;p._quality=0;p.quality=e||4;p.strength=d||8;p.firstRun=!0;return p}m(h,b);
h.prototype.apply=function(b,d,f,h){if(this.firstRun){var g=b.renderer.gl;g=(0,e.default)(g);this.vertexSrc=(0,c.default)(g,!0);this.fragmentSrc=(0,a.default)(g);this.firstRun=!1}this.uniforms.strength=1/f.size.width*(f.size.width/d.size.width);this.uniforms.strength*=this.strength;this.uniforms.strength/=this.passes;if(1===this.passes)b.applyFilter(this,d,f,h);else{for(var l=g=b.getRenderTarget(!0),p=0;p<this.passes-1;p++){b.applyFilter(this,d,l,!0);var n=l;l=d;d=n}b.applyFilter(this,d,f,h);b.returnRenderTarget(g)}};
d(h,[{key:"blur",get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a);this.strength=a}},{key:"quality",get:function(){return this._quality},set:function(a){this.passes=this._quality=a}}]);return h}(f.Filter);g.default=b},{"../../core":73,"./generateBlurFragSource":155,"./generateBlurVertSource":156,"./getMaxBlurKernelSize":157}],154:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+
typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;var d=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,d){b&&a(c.prototype,b);d&&a(c,d);return c}}(),f=function(a){if(a&&a.__esModule)return a;var c={};
if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c.default=a;return c}(b("../../core"));k=b("./generateBlurVertSource");var c=h(k);k=b("./generateBlurFragSource");var a=h(k);b=b("./getMaxBlurKernelSize");var e=h(b);b=function(b){function h(d,e,g,l){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");l=l||5;var p=(0,c.default)(l,!1);l=(0,a.default)(l);p=b.call(this,p,l);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
p=!p||"object"!==typeof p&&"function"!==typeof p?this:p;p.resolution=g||f.settings.RESOLUTION;p._quality=0;p.quality=e||4;p.strength=d||8;p.firstRun=!0;return p}m(h,b);h.prototype.apply=function(b,d,f,h){if(this.firstRun){var g=b.renderer.gl;g=(0,e.default)(g);this.vertexSrc=(0,c.default)(g,!1);this.fragmentSrc=(0,a.default)(g);this.firstRun=!1}this.uniforms.strength=1/f.size.height*(f.size.height/d.size.height);this.uniforms.strength*=this.strength;this.uniforms.strength/=this.passes;if(1===this.passes)b.applyFilter(this,
d,f,h);else{for(var l=g=b.getRenderTarget(!0),p=0;p<this.passes-1;p++){b.applyFilter(this,d,l,!0);var n=l;l=d;d=n}b.applyFilter(this,d,f,h);b.returnRenderTarget(g)}};d(h,[{key:"blur",get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a);this.strength=a}},{key:"quality",get:function(){return this._quality},set:function(a){this.passes=this._quality=a}}]);return h}(f.Filter);g.default=b},{"../../core":73,"./generateBlurFragSource":155,"./generateBlurVertSource":156,"./getMaxBlurKernelSize":157}],
155:[function(b,k,g){g.__esModule=!0;g.default=function(b){for(var d=h[b],c=d.length,a=m,e="",g,k=0;k<b;k++){var n="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",k);g=k;k>=c&&(g=b-k-1);n=n.replace("%value%",d[g]);e+=n;e+="\n"}a=a.replace("%blur%",e);return a=a.replace("%size%",b)};var h={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,
.009255,.027867,.065666,.121117,.174868,.197641],15:[4.89E-4,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},m="varying vec2 vBlurTexCoords[%size%];\nuniform sampler2D uSampler;\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n    %blur%\n}"},{}],156:[function(b,k,g){g.__esModule=!0;g.default=function(b,d){var f=Math.ceil(b/2),c=h,a="";d=d?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";
for(var e=0;e<b;e++){var g=d.replace("%index%",e);g=g.replace("%sampleIndex%",e-(f-1)+".0");a+=g;a+="\n"}c=c.replace("%blur%",a);return c=c.replace("%size%",b)};var h="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform float strength;\nuniform mat3 projectionMatrix;\nvarying vec2 vBlurTexCoords[%size%];\nvoid main(void)\n{\ngl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n%blur%\n}"},{}],157:[function(b,k,g){g.__esModule=!0;g.default=function(b){b=
b.getParameter(b.MAX_VARYING_VECTORS);for(var h=15;h>b;)h-=2;return h}},{}],158:[function(b,k,g){function h(b,f){if("function"!==typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);b.prototype=Object.create(f&&f.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});f&&(Object.setPrototypeOf?Object.setPrototypeOf(b,f):b.__proto__=f)}g.__esModule=!0;var m=function(){function b(b,c){for(var a=0;a<c.length;a++){var d=c[a];
d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(d,c,a){c&&b(d.prototype,c);a&&b(d,a);return d}}();k=function(b){if(b&&b.__esModule)return b;var d={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c]);d.default=b;return d}(b("../../core"));b("path");b=function(b){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var c=b.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",
"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n");
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];c.alpha=1;return c}h(d,b);d.prototype._loadMatrix=function(c){var a=c;1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(a,this.uniforms.m,c),a=this._colorMatrix(a));this.uniforms.m=a};d.prototype._multiply=function(c,a,b){c[0]=a[0]*b[0]+a[1]*b[5]+a[2]*b[10]+a[3]*b[15];c[1]=
a[0]*b[1]+a[1]*b[6]+a[2]*b[11]+a[3]*b[16];c[2]=a[0]*b[2]+a[1]*b[7]+a[2]*b[12]+a[3]*b[17];c[3]=a[0]*b[3]+a[1]*b[8]+a[2]*b[13]+a[3]*b[18];c[4]=a[0]*b[4]+a[1]*b[9]+a[2]*b[14]+a[3]*b[19]+a[4];c[5]=a[5]*b[0]+a[6]*b[5]+a[7]*b[10]+a[8]*b[15];c[6]=a[5]*b[1]+a[6]*b[6]+a[7]*b[11]+a[8]*b[16];c[7]=a[5]*b[2]+a[6]*b[7]+a[7]*b[12]+a[8]*b[17];c[8]=a[5]*b[3]+a[6]*b[8]+a[7]*b[13]+a[8]*b[18];c[9]=a[5]*b[4]+a[6]*b[9]+a[7]*b[14]+a[8]*b[19]+a[9];c[10]=a[10]*b[0]+a[11]*b[5]+a[12]*b[10]+a[13]*b[15];c[11]=a[10]*b[1]+a[11]*
b[6]+a[12]*b[11]+a[13]*b[16];c[12]=a[10]*b[2]+a[11]*b[7]+a[12]*b[12]+a[13]*b[17];c[13]=a[10]*b[3]+a[11]*b[8]+a[12]*b[13]+a[13]*b[18];c[14]=a[10]*b[4]+a[11]*b[9]+a[12]*b[14]+a[13]*b[19]+a[14];c[15]=a[15]*b[0]+a[16]*b[5]+a[17]*b[10]+a[18]*b[15];c[16]=a[15]*b[1]+a[16]*b[6]+a[17]*b[11]+a[18]*b[16];c[17]=a[15]*b[2]+a[16]*b[7]+a[17]*b[12]+a[18]*b[17];c[18]=a[15]*b[3]+a[16]*b[8]+a[17]*b[13]+a[18]*b[18];c[19]=a[15]*b[4]+a[16]*b[9]+a[17]*b[14]+a[18]*b[19]+a[19];return c};d.prototype._colorMatrix=function(c){c=
new Float32Array(c);c[4]/=255;c[9]/=255;c[14]/=255;c[19]/=255;return c};d.prototype.brightness=function(c,a){this._loadMatrix([c,0,0,0,0,0,c,0,0,0,0,0,c,0,0,0,0,0,1,0],a)};d.prototype.greyscale=function(c,a){this._loadMatrix([c,c,c,0,0,c,c,c,0,0,c,c,c,0,0,0,0,0,1,0],a)};d.prototype.blackAndWhite=function(c){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],c)};d.prototype.hue=function(c,a){c=(c||0)/180*Math.PI;var b=Math.cos(c);c=Math.sin(c);var d=Math.sqrt,f=1/3;d=d(f);this._loadMatrix([b+
(1-b)*f,f*(1-b)-d*c,f*(1-b)+d*c,0,0,f*(1-b)+d*c,b+f*(1-b),f*(1-b)-d*c,0,0,f*(1-b)-d*c,f*(1-b)+d*c,b+f*(1-b),0,0,0,0,0,1,0],a)};d.prototype.contrast=function(c,a){c=(c||0)+1;var b=-.5*(c-1);this._loadMatrix([c,0,0,0,b,0,c,0,0,b,0,0,c,0,b,0,0,0,1,0],a)};d.prototype.saturate=function(){var c=2*(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)/3+1,a=-.5*(c-1);this._loadMatrix([c,a,a,0,0,a,c,a,0,0,a,a,c,0,0,0,0,0,1,0],arguments[1])};d.prototype.desaturate=function(){this.saturate(-1)};d.prototype.negative=
function(c){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],c)};d.prototype.sepia=function(c){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],c)};d.prototype.technicolor=function(c){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,
0,0,0,1,0],c)};d.prototype.polaroid=function(c){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],c)};d.prototype.toBGR=function(c){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],c)};d.prototype.kodachrome=function(c){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,
0,35.62982807460946,0,0,0,1,0],c)};d.prototype.browni=function(c){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],c)};d.prototype.vintage=function(c){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,
0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],c)};d.prototype.colorTone=function(c,a,b,d,f){b=b||16770432;d=d||3375104;var e=(b>>16&255)/255,h=(b>>8&255)/255;b=(b&255)/255;var g=(d>>16&255)/255,l=(d>>8&255)/255;d=(d&255)/255;this._loadMatrix([.3,.59,.11,0,0,e,h,b,c||.2,0,g,l,d,a||.15,0,e-g,h-l,b-d,0,0],f)};d.prototype.night=function(c,a){c=c||.1;this._loadMatrix([-2*c,-c,0,0,0,-c,0,c,0,0,0,c,2*c,0,0,0,0,0,1,0],a)};d.prototype.predator=function(c,
a){this._loadMatrix([11.224130630493164*c,-4.794486999511719*c,-2.8746118545532227*c,0*c,.40342438220977783*c,-3.6330697536468506*c,9.193157196044922*c,-2.951810836791992*c,0*c,-1.316135048866272*c,-3.2184197902679443*c,-4.2375030517578125*c,7.476448059082031*c,0*c,.8044459223747253*c,0,0,0,1,0],a)};d.prototype.lsd=function(c){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],c)};d.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)};m(d,[{key:"matrix",
get:function(){return this.uniforms.m},set:function(c){this.uniforms.m=c}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(c){this.uniforms.uAlpha=c}}]);return d}(k.Filter);g.default=b;b.prototype.grayscale=b.prototype.greyscale},{"../../core":73,path:1}],159:[function(b,k,g){function h(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,
enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}g.__esModule=!0;var m=function(){function b(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,d){a&&b(c.prototype,a);d&&b(c,d);return c}}(),d=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=
b[a]);c.default=b;return c}(b("../../core"));b("path");b=function(b){function c(a,e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var f=new d.Matrix;a.renderable=!1;var h=b.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}",
"varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
h=!h||"object"!==typeof h&&"function"!==typeof h?this:h;h.maskSprite=a;h.maskMatrix=f;h.uniforms.mapSampler=a._texture;h.uniforms.filterMatrix=f;h.uniforms.scale={x:1,y:1};if(null===e||void 0===e)e=20;h.scale=new d.Point(e,e);return h}h(c,b);c.prototype.apply=function(a,c,b){this.uniforms.filterMatrix=a.calculateSpriteMatrix(this.maskMatrix,this.maskSprite);this.uniforms.scale.x=this.scale.x;this.uniforms.scale.y=this.scale.y;a.applyFilter(this,c,b)};m(c,[{key:"map",get:function(){return this.uniforms.mapSampler},
set:function(a){this.uniforms.mapSampler=a}}]);return c}(d.Filter);g.default=b},{"../../core":73,path:1}],160:[function(b,k,g){function h(b,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);b.prototype=Object.create(d&&d.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(b,d):b.__proto__=d)}g.__esModule=!0;k=function(b){if(b&&b.__esModule)return b;
var d={};if(null!=b)for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(d[f]=b[f]);d.default=b;return d}(b("../../core"));b("path");b=function(b){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var f=b.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",
'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n');
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!==typeof f&&"function"!==typeof f?this:f}h(d,b);return d}(k.Filter);g.default=b},{"../../core":73,path:1}],161:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}g.__esModule=!0;var m=b("./fxaa/FXAAFilter");Object.defineProperty(g,"FXAAFilter",{enumerable:!0,get:function(){return h(m).default}});var d=b("./noise/NoiseFilter");Object.defineProperty(g,"NoiseFilter",{enumerable:!0,
get:function(){return h(d).default}});var f=b("./displacement/DisplacementFilter");Object.defineProperty(g,"DisplacementFilter",{enumerable:!0,get:function(){return h(f).default}});var c=b("./blur/BlurFilter");Object.defineProperty(g,"BlurFilter",{enumerable:!0,get:function(){return h(c).default}});var a=b("./blur/BlurXFilter");Object.defineProperty(g,"BlurXFilter",{enumerable:!0,get:function(){return h(a).default}});var e=b("./blur/BlurYFilter");Object.defineProperty(g,"BlurYFilter",{enumerable:!0,
get:function(){return h(e).default}});var l=b("./colormatrix/ColorMatrixFilter");Object.defineProperty(g,"ColorMatrixFilter",{enumerable:!0,get:function(){return h(l).default}});var q=b("./alpha/AlphaFilter");Object.defineProperty(g,"AlphaFilter",{enumerable:!0,get:function(){return h(q).default}})},{"./alpha/AlphaFilter":151,"./blur/BlurFilter":152,"./blur/BlurXFilter":153,"./blur/BlurYFilter":154,"./colormatrix/ColorMatrixFilter":158,"./displacement/DisplacementFilter":159,"./fxaa/FXAAFilter":160,
"./noise/NoiseFilter":162}],162:[function(b,k,g){function h(b,f){if("function"!==typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);b.prototype=Object.create(f&&f.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});f&&(Object.setPrototypeOf?Object.setPrototypeOf(b,f):b.__proto__=f)}g.__esModule=!0;var m=function(){function b(b,c){for(var a=0;a<c.length;a++){var d=c[a];d.enumerable=d.enumerable||!1;d.configurable=!0;
"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(d,c,a){c&&b(d.prototype,c);a&&b(d,a);return d}}();k=function(b){if(b&&b.__esModule)return b;var d={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c]);d.default=b;return d}(b("../../core"));b("path");b=function(b){function d(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.random();if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
var e=b.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n");
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=!e||"object"!==typeof e&&"function"!==typeof e?this:e;e.noise=c;e.seed=a;return e}h(d,b);m(d,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(c){this.uniforms.uNoise=c}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(c){this.uniforms.uSeed=c}}]);return d}(k.Filter);g.default=b},{"../../core":73,path:1}],163:[function(b,k,g){(function(h){function k(a){if(a&&a.__esModule)return a;
var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c.default=a;return c}g.__esModule=!0;g.loader=g.prepare=g.particles=g.mesh=g.loaders=g.interaction=g.filters=g.extras=g.extract=g.accessibility=void 0;var d=b("./polyfill");Object.keys(d).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(g,a,{enumerable:!0,get:function(){return d[a]}})});var f=b("./core");Object.keys(f).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(g,
a,{enumerable:!0,get:function(){return f[a]}})});var c=b("./deprecation");c=c&&c.__esModule?c:{default:c};var a=b("./accessibility");a=k(a);var e=b("./extract");e=k(e);var l=b("./extras");l=k(l);var q=b("./filters");q=k(q);var n=b("./interaction");n=k(n);var p=b("./loaders");p=k(p);var x=b("./mesh");x=k(x);var t=b("./particles");t=k(t);var v=b("./prepare");v=k(v);f.utils.mixins.performMixins();var w=p.shared||null;g.accessibility=a;g.extract=e;g.extras=l;g.filters=q;g.interaction=n;g.loaders=p;g.mesh=
x;g.particles=t;g.prepare=v;g.loader=w;"function"===typeof c.default&&(0,c.default)(g);h.PIXI=g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./accessibility":50,"./core":73,"./deprecation":139,"./extract":141,"./extras":149,"./filters":161,"./interaction":168,"./loaders":171,"./mesh":180,"./particles":183,"./polyfill":190,"./prepare":194}],164:[function(b,k,g){g.__esModule=!0;var h=function(){function b(b,c){for(var a=0;a<
c.length;a++){var d=c[a];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(d,c,a){c&&b(d.prototype,c);a&&b(d,a);return d}}(),m=function(b){if(b&&b.__esModule)return b;var d={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c]);d.default=b;return d}(b("../core"));b=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.global=new m.Point;
this.identifier=this.originalEvent=this.target=null;this.isPrimary=!1;this.tiltY=this.tiltX=this.height=this.width=this.buttons=this.button=0;this.pointerType=null;this.tangentialPressure=this.twist=this.rotationAngle=this.pressure=0}b.prototype.getLocalPosition=function(b,c,a){return b.worldTransform.applyInverse(a||this.global,c)};b.prototype.copyEvent=function(b){b.isPrimary&&(this.isPrimary=!0);this.button=b.button;this.buttons=Number.isInteger(b.buttons)?b.buttons:b.which;this.width=b.width;
this.height=b.height;this.tiltX=b.tiltX;this.tiltY=b.tiltY;this.pointerType=b.pointerType;this.pressure=b.pressure;this.rotationAngle=b.rotationAngle;this.twist=b.twist||0;this.tangentialPressure=b.tangentialPressure||0};b.prototype.reset=function(){this.isPrimary=!1};h(b,[{key:"pointerId",get:function(){return this.identifier}}]);return b}();g.default=b},{"../core":73}],165:[function(b,k,g){g.__esModule=!0;b=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
this.stopped=!1;this.data=this.type=this.currentTarget=this.target=null}b.prototype.stopPropagation=function(){this.stopped=!0};b.prototype.reset=function(){this.stopped=!1;this.target=this.currentTarget=null};return b}();g.default=b},{}],166:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=function(a){if(a&&a.__esModule)return a;
var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c.default=a;return c}(b("../core"));k=b("./InteractionData");var c=h(k);k=b("./InteractionEvent");var a=h(k);k=b("./InteractionTrackingData");var e=h(k);k=b("eventemitter3");k=h(k);b=b("./interactiveTarget");b=h(b);f.utils.mixins.delayMixin(f.DisplayObject.prototype,b.default);var l={target:null,data:{global:null}};b=function(b){function h(d,e){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");
var g=b.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=!g||"object"!==typeof g&&"function"!==typeof g?this:g;e=e||{};g.renderer=d;g.autoPreventDefault=void 0!==e.autoPreventDefault?e.autoPreventDefault:!0;g.interactionFrequency=e.interactionFrequency||10;g.mouse=new c.default;g.mouse.identifier=1;g.mouse.global.set(-999999);g.activeInteractionData={};g.activeInteractionData[1]=g.mouse;g.interactionDataPool=[];g.eventData=new a.default;g.interactionDOMElement=
null;g.moveWhenInside=!1;g.eventsAdded=!1;g.mouseOverRenderer=!1;g.supportsTouchEvents="ontouchstart"in window;g.supportsPointerEvents=!!window.PointerEvent;g.onPointerUp=g.onPointerUp.bind(g);g.processPointerUp=g.processPointerUp.bind(g);g.onPointerCancel=g.onPointerCancel.bind(g);g.processPointerCancel=g.processPointerCancel.bind(g);g.onPointerDown=g.onPointerDown.bind(g);g.processPointerDown=g.processPointerDown.bind(g);g.onPointerMove=g.onPointerMove.bind(g);g.processPointerMove=g.processPointerMove.bind(g);
g.onPointerOut=g.onPointerOut.bind(g);g.processPointerOverOut=g.processPointerOverOut.bind(g);g.onPointerOver=g.onPointerOver.bind(g);g.cursorStyles={default:"inherit",pointer:"pointer"};g.currentCursorMode=null;g.cursor=null;g._tempPoint=new f.Point;g.resolution=1;g.setTargetElement(g.renderer.view,g.renderer.resolution);return g}m(h,b);h.prototype.hitTest=function(a,c){l.target=null;l.data.global=a;c||(c=this.renderer._lastObjectRendered);this.processInteractive(l,c,null,!0);return l.target};h.prototype.setTargetElement=
function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents();this.interactionDOMElement=a;this.resolution=c;this.addEvents()};h.prototype.addEvents=function(){this.interactionDOMElement&&(f.ticker.shared.add(this.update,this,f.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=
"none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",
this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),
this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)};h.prototype.removeEvents=function(){this.interactionDOMElement&&(f.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=
""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",
this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,
!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)};h.prototype.update=function(a){this._deltaTime+=a;if(!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{this.cursor=null;for(var c in this.activeInteractionData)this.activeInteractionData.hasOwnProperty(c)&&
(a=this.activeInteractionData[c],a.originalEvent&&"touch"!==a.pointerType&&(a=this.configureInteractionEventForDOMEvent(this.eventData,a.originalEvent,a),this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)));this.setCursorMode(this.cursor)}};h.prototype.setCursorMode=function(a){a=a||"default";if(this.currentCursorMode!==a){this.currentCursorMode=a;var c=this.cursorStyles[a];if(c)switch("undefined"===typeof c?"undefined":d(c)){case "string":this.interactionDOMElement.style.cursor=
c;break;case "function":c(a);break;case "object":Object.assign(this.interactionDOMElement.style,c)}else"string"!==typeof a||Object.prototype.hasOwnProperty.call(this.cursorStyles,a)||(this.interactionDOMElement.style.cursor=a)}};h.prototype.dispatchEvent=function(a,c,b){if(!b.stopped&&(b.currentTarget=a,b.type=c,a.emit(c,b),a[c]))a[c](b)};h.prototype.mapPositionToPoint=function(a,c,b){var d=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,
height:0};var e=navigator.isCocoonJS?this.resolution:1/this.resolution;a.x=this.interactionDOMElement.width/d.width*(c-d.left)*e;a.y=this.interactionDOMElement.height/d.height*(b-d.top)*e};h.prototype.processInteractive=function(a,c,b,d,e){if(!c||!c.visible)return!1;var f=a.data.global;e=c.interactive||e;var h=!1,g=e,l=!0;c.hitArea?(d&&(c.worldTransform.applyInverse(f,this._tempPoint),c.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?h=!0:l=d=!1),g=!1):c._mask&&d&&!c._mask.containsPoint(f)&&
(l=d=!1);if(l&&c.interactiveChildren&&c.children){l=c.children;for(var p=l.length-1;0<=p;p--){var n=l[p],k=this.processInteractive(a,n,b,d,g);k&&n.parent&&(g=!1,k&&(a.target&&(d=!1),h=!0))}}e&&(d&&!a.target&&!c.hitArea&&c.containsPoint&&c.containsPoint(f)&&(h=!0),c.interactive&&(h&&!a.target&&(a.target=c),b&&b(a,c,!!h)));return h};h.prototype.onPointerDown=function(a){if(!this.supportsTouchEvents||"touch"!==a.pointerType){var c=this.normalizeToPointerData(a);this.autoPreventDefault&&c[0].isNormalized&&
a.preventDefault();for(var b=c.length,d=0;d<b;d++){var e=c[d],f=this.getInteractionDataForPointerId(e);f=this.configureInteractionEventForDOMEvent(this.eventData,e,f);f.data.originalEvent=a;this.processInteractive(f,this.renderer._lastObjectRendered,this.processPointerDown,!0);this.emit("pointerdown",f);"touch"===e.pointerType?this.emit("touchstart",f):("mouse"===e.pointerType||"pen"===e.pointerType)&&this.emit(2===e.button?"rightdown":"mousedown",this.eventData)}}};h.prototype.processPointerDown=
function(a,c,b){var d=a.data,f=a.data.identifier;if(b)if(c.trackedPointers[f]||(c.trackedPointers[f]=new e.default(f)),this.dispatchEvent(c,"pointerdown",a),"touch"===d.pointerType)this.dispatchEvent(c,"touchstart",a);else if("mouse"===d.pointerType||"pen"===d.pointerType)(b=2===d.button)?c.trackedPointers[f].rightDown=!0:c.trackedPointers[f].leftDown=!0,this.dispatchEvent(c,b?"rightdown":"mousedown",a)};h.prototype.onPointerComplete=function(a,c,b){for(var d=this.normalizeToPointerData(a),e=d.length,
f=a.target!==this.interactionDOMElement?"outside":"",h=0;h<e;h++){var g=d[h],l=this.getInteractionDataForPointerId(g),p=this.configureInteractionEventForDOMEvent(this.eventData,g,l);p.data.originalEvent=a;this.processInteractive(p,this.renderer._lastObjectRendered,b,c||!f);this.emit(c?"pointercancel":"pointerup"+f,p);"mouse"===g.pointerType||"pen"===g.pointerType?this.emit(2===g.button?"rightup"+f:"mouseup"+f,p):"touch"===g.pointerType&&(this.emit(c?"touchcancel":"touchend"+f,p),this.releaseInteractionDataForPointerId(g.pointerId,
l))}};h.prototype.onPointerCancel=function(a){if(!this.supportsTouchEvents||"touch"!==a.pointerType)this.onPointerComplete(a,!0,this.processPointerCancel)};h.prototype.processPointerCancel=function(a,c){var b=a.data,d=a.data.identifier;void 0!==c.trackedPointers[d]&&(delete c.trackedPointers[d],this.dispatchEvent(c,"pointercancel",a),"touch"===b.pointerType&&this.dispatchEvent(c,"touchcancel",a))};h.prototype.onPointerUp=function(a){if(!this.supportsTouchEvents||"touch"!==a.pointerType)this.onPointerComplete(a,
!1,this.processPointerUp)};h.prototype.processPointerUp=function(a,c,b){var d=a.data,f=a.data.identifier,h=c.trackedPointers[f],g="touch"===d.pointerType,l="mouse"===d.pointerType||"pen"===d.pointerType,p=!1;if(l){d=2===d.button;var n=e.default.FLAGS;n=d?n.RIGHT_DOWN:n.LEFT_DOWN;n=void 0!==h&&h.flags&n;b?(this.dispatchEvent(c,d?"rightup":"mouseup",a),n&&(this.dispatchEvent(c,d?"rightclick":"click",a),p=!0)):n&&this.dispatchEvent(c,d?"rightupoutside":"mouseupoutside",a);h&&(d?h.rightDown=!1:h.leftDown=
!1)}b?(this.dispatchEvent(c,"pointerup",a),g&&this.dispatchEvent(c,"touchend",a),h&&(l&&!p||this.dispatchEvent(c,"pointertap",a),g&&(this.dispatchEvent(c,"tap",a),h.over=!1))):h&&(this.dispatchEvent(c,"pointerupoutside",a),g&&this.dispatchEvent(c,"touchendoutside",a));h&&h.none&&delete c.trackedPointers[f]};h.prototype.onPointerMove=function(a){if(!this.supportsTouchEvents||"touch"!==a.pointerType){var c=this.normalizeToPointerData(a);if("mouse"===c[0].pointerType||"pen"===c[0].pointerType)this.didMove=
!0,this.cursor=null;for(var b=c.length,d=0;d<b;d++){var e=c[d],f=this.getInteractionDataForPointerId(e);f=this.configureInteractionEventForDOMEvent(this.eventData,e,f);f.data.originalEvent=a;this.processInteractive(f,this.renderer._lastObjectRendered,this.processPointerMove,"touch"===e.pointerType?this.moveWhenInside:!0);this.emit("pointermove",f);"touch"===e.pointerType&&this.emit("touchmove",f);"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mousemove",f)}"mouse"===c[0].pointerType&&
this.setCursorMode(this.cursor)}};h.prototype.processPointerMove=function(a,c,b){var d=a.data,e="touch"===d.pointerType;(d="mouse"===d.pointerType||"pen"===d.pointerType)&&this.processPointerOverOut(a,c,b);if(!this.moveWhenInside||b)this.dispatchEvent(c,"pointermove",a),e&&this.dispatchEvent(c,"touchmove",a),d&&this.dispatchEvent(c,"mousemove",a)};h.prototype.onPointerOut=function(a){if(!this.supportsTouchEvents||"touch"!==a.pointerType){a=this.normalizeToPointerData(a)[0];"mouse"===a.pointerType&&
(this.mouseOverRenderer=!1,this.setCursorMode(null));var c=this.getInteractionDataForPointerId(a),b=this.configureInteractionEventForDOMEvent(this.eventData,a,c);b.data.originalEvent=a;this.processInteractive(b,this.renderer._lastObjectRendered,this.processPointerOverOut,!1);this.emit("pointerout",b);"mouse"===a.pointerType||"pen"===a.pointerType?this.emit("mouseout",b):this.releaseInteractionDataForPointerId(c.identifier)}};h.prototype.processPointerOverOut=function(a,c,b){var d=a.data,f=a.data.identifier;
d="mouse"===d.pointerType||"pen"===d.pointerType;var h=c.trackedPointers[f];b&&!h&&(h=c.trackedPointers[f]=new e.default(f));void 0!==h&&(b&&this.mouseOverRenderer?(h.over||(h.over=!0,this.dispatchEvent(c,"pointerover",a),d&&this.dispatchEvent(c,"mouseover",a)),d&&null===this.cursor&&(this.cursor=c.cursor)):h.over&&(h.over=!1,this.dispatchEvent(c,"pointerout",this.eventData),d&&this.dispatchEvent(c,"mouseout",a),h.none&&delete c.trackedPointers[f]))};h.prototype.onPointerOver=function(a){a=this.normalizeToPointerData(a)[0];
var c=this.getInteractionDataForPointerId(a);c=this.configureInteractionEventForDOMEvent(this.eventData,a,c);c.data.originalEvent=a;"mouse"===a.pointerType&&(this.mouseOverRenderer=!0);this.emit("pointerover",c);"mouse"!==a.pointerType&&"pen"!==a.pointerType||this.emit("mouseover",c)};h.prototype.getInteractionDataForPointerId=function(a){var b=a.pointerId;if(1===b||"mouse"===a.pointerType)var d=this.mouse;else this.activeInteractionData[b]?d=this.activeInteractionData[b]:(d=this.interactionDataPool.pop()||
new c.default,d.identifier=b,this.activeInteractionData[b]=d);d.copyEvent(a);return d};h.prototype.releaseInteractionDataForPointerId=function(a){var c=this.activeInteractionData[a];c&&(delete this.activeInteractionData[a],c.reset(),this.interactionDataPool.push(c))};h.prototype.configureInteractionEventForDOMEvent=function(a,c,b){a.data=b;this.mapPositionToPoint(b.global,c.clientX,c.clientY);navigator.isCocoonJS&&"touch"===c.pointerType&&(b.global.x/=this.resolution,b.global.y/=this.resolution);
"touch"===c.pointerType&&(c.globalX=b.global.x,c.globalY=b.global.y);b.originalEvent=c;a.reset();return a};h.prototype.normalizeToPointerData=function(a){var c=[];if(this.supportsTouchEvents&&a instanceof TouchEvent)for(var b=0,d=a.changedTouches.length;b<d;b++){var e=a.changedTouches[b];"undefined"===typeof e.button&&(e.button=a.touches.length?1:0);"undefined"===typeof e.buttons&&(e.buttons=a.touches.length?1:0);"undefined"===typeof e.isPrimary&&(e.isPrimary=1===a.touches.length&&"touchstart"===
a.type);"undefined"===typeof e.width&&(e.width=e.radiusX||1);"undefined"===typeof e.height&&(e.height=e.radiusY||1);"undefined"===typeof e.tiltX&&(e.tiltX=0);"undefined"===typeof e.tiltY&&(e.tiltY=0);"undefined"===typeof e.pointerType&&(e.pointerType="touch");"undefined"===typeof e.pointerId&&(e.pointerId=e.identifier||0);"undefined"===typeof e.pressure&&(e.pressure=e.force||.5);e.twist=0;e.tangentialPressure=0;"undefined"===typeof e.layerX&&(e.layerX=e.offsetX=e.clientX);"undefined"===typeof e.layerY&&
(e.layerY=e.offsetY=e.clientY);e.isNormalized=!0;c.push(e)}else a instanceof MouseEvent&&!(this.supportsPointerEvents&&a instanceof window.PointerEvent)&&("undefined"===typeof a.isPrimary&&(a.isPrimary=!0),"undefined"===typeof a.width&&(a.width=1),"undefined"===typeof a.height&&(a.height=1),"undefined"===typeof a.tiltX&&(a.tiltX=0),"undefined"===typeof a.tiltY&&(a.tiltY=0),"undefined"===typeof a.pointerType&&(a.pointerType="mouse"),"undefined"===typeof a.pointerId&&(a.pointerId=1),"undefined"===typeof a.pressure&&
(a.pressure=.5),a.twist=0,a.tangentialPressure=0,a.isNormalized=!0),c.push(a);return c};h.prototype.destroy=function(){this.removeEvents();this.removeAllListeners();this._tempPoint=this.onPointerOver=this.processPointerOverOut=this.onPointerOut=this.processPointerMove=this.onPointerMove=this.processPointerCancel=this.onPointerCancel=this.processPointerUp=this.onPointerUp=this.processPointerDown=this.onPointerDown=this.interactionDOMElement=this.eventData=this.mouse=this.renderer=null};return h}(k.default);
g.default=b;f.WebGLRenderer.registerPlugin("interaction",b);f.CanvasRenderer.registerPlugin("interaction",b)},{"../core":73,"./InteractionData":164,"./InteractionEvent":165,"./InteractionTrackingData":167,"./interactiveTarget":169,eventemitter3:198}],167:[function(b,k,g){g.__esModule=!0;var h=function(){function b(b,f){for(var c=0;c<f.length;c++){var a=f[c];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(d,f,c){f&&b(d.prototype,
f);c&&b(d,c);return d}}();b=function(){function b(d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this._pointerId=d;this._flags=b.FLAGS.NONE}b.prototype._doSet=function(b,f){this._flags=f?this._flags|b:this._flags&~b};h(b,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(b){this._flags=b}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!==
(this._flags&this.constructor.FLAGS.OVER)},set:function(b){this._doSet(this.constructor.FLAGS.OVER,b)}},{key:"rightDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(b){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,b)}},{key:"leftDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(b){this._doSet(this.constructor.FLAGS.LEFT_DOWN,b)}}]);return b}();g.default=b;b.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},
{}],168:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}g.__esModule=!0;var m=b("./InteractionData");Object.defineProperty(g,"InteractionData",{enumerable:!0,get:function(){return h(m).default}});var d=b("./InteractionManager");Object.defineProperty(g,"InteractionManager",{enumerable:!0,get:function(){return h(d).default}});var f=b("./interactiveTarget");Object.defineProperty(g,"interactiveTarget",{enumerable:!0,get:function(){return h(f).default}});var c=b("./InteractionTrackingData");
Object.defineProperty(g,"InteractionTrackingData",{enumerable:!0,get:function(){return h(c).default}});var a=b("./InteractionEvent");Object.defineProperty(g,"InteractionEvent",{enumerable:!0,get:function(){return h(a).default}})},{"./InteractionData":164,"./InteractionEvent":165,"./InteractionManager":166,"./InteractionTrackingData":167,"./interactiveTarget":169}],169:[function(b,k,g){g.__esModule=!0;g.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===
this.cursor},set buttonMode(b){b?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){void 0===this._trackedPointers&&(this._trackedPointers={});return this._trackedPointers},_trackedPointers:void 0}},{}],170:[function(b,k,g){function h(c,a){c.bitmapFont=f.BitmapText.registerFont(c.data,a)}g.__esModule=!0;g.parse=h;g.default=function(){return function(c,a){if(c.data&&c.type===d.Resource.TYPE.XML)if(0===c.data.getElementsByTagName("page").length||0===
c.data.getElementsByTagName("info").length||null===c.data.getElementsByTagName("info")[0].getAttribute("face"))a();else{var b=c.isDataUrl?"":m.dirname(c.url);c.isDataUrl&&("."===b&&(b=""),this.baseUrl&&b&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(b+="/"));(b=b.replace(this.baseUrl,""))&&"/"!==b.charAt(b.length-1)&&(b+="/");for(var f=c.data.getElementsByTagName("page"),g={},n=function(b){g[b.metadata.pageFile]=b.texture;Object.keys(g).length===f.length&&(h(c,g),a())},p=0;p<f.length;++p){var k=
f[p].getAttribute("file"),t=b+k,v=!1,w;for(w in this.resources){var A=this.resources[w];if(A.url===t){A.metadata.pageFile=k;A.texture?n(A):A.onAfterMiddleware.add(n);v=!0;break}}v||(k={crossOrigin:c.crossOrigin,loadType:d.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:k},c.metadata.imageMetadata),parentResource:c},this.add(t,k,n))}}else a()}};var m=function(c){if(c&&c.__esModule)return c;var a={};if(null!=c)for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b]);a.default=
c;return a}(b("path")),d=b("resource-loader"),f=b("../extras")},{"../extras":149,path:1,"resource-loader":204}],171:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}g.__esModule=!0;g.shared=g.Resource=g.textureParser=g.getResourcePath=g.spritesheetParser=g.parseBitmapFontData=g.bitmapFontParser=g.Loader=void 0;var m=b("./bitmapFontParser");Object.defineProperty(g,"bitmapFontParser",{enumerable:!0,get:function(){return h(m).default}});Object.defineProperty(g,"parseBitmapFontData",
{enumerable:!0,get:function(){return m.parse}});var d=b("./spritesheetParser");Object.defineProperty(g,"spritesheetParser",{enumerable:!0,get:function(){return h(d).default}});Object.defineProperty(g,"getResourcePath",{enumerable:!0,get:function(){return d.getResourcePath}});var f=b("./textureParser");Object.defineProperty(g,"textureParser",{enumerable:!0,get:function(){return h(f).default}});var c=b("resource-loader");Object.defineProperty(g,"Resource",{enumerable:!0,get:function(){return c.Resource}});
k=b("../core/Application");k=h(k);b=b("./loader");var a=h(b);g.Loader=a.default;var e=new a.default;e.destroy=function(){};g.shared=e;g=k.default.prototype;g._loader=null;Object.defineProperty(g,"loader",{get:function(){this._loader||(this._loader=this._options.sharedLoader?e:new a.default);return this._loader}});g._parentDestroy=g.destroy;g.destroy=function(a,c){this._loader&&(this._loader.destroy(),this._loader=null);this._parentDestroy(a,c)}},{"../core/Application":51,"./bitmapFontParser":170,
"./loader":172,"./spritesheetParser":173,"./textureParser":174,"resource-loader":204}],172:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}function m(a,c){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!==typeof c&&"function"!==typeof c?a:c}function d(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,
{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;k=b("resource-loader");k=h(k);var f=b("resource-loader/lib/middlewares/parsing/blob"),c=b("eventemitter3"),a=h(c);c=b("./textureParser");c=h(c);var e=b("./spritesheetParser");e=h(e);b=b("./bitmapFontParser");b=h(b);var l=function(c){function b(d,e){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var f=m(this,c.call(this,
d,e));a.default.call(f);for(d=0;d<b._pixiMiddleware.length;++d)f.use(b._pixiMiddleware[d]());f.onStart.add(function(a){return f.emit("start",a)});f.onProgress.add(function(a,c){return f.emit("progress",a,c)});f.onError.add(function(a,c,b){return f.emit("error",a,c,b)});f.onLoad.add(function(a,c){return f.emit("load",a,c)});f.onComplete.add(function(a,c){return f.emit("complete",a,c)});return f}d(b,c);b.addPixiMiddleware=function(a){b._pixiMiddleware.push(a)};b.prototype.destroy=function(){this.removeAllListeners();
this.reset()};return b}(k.default);g.default=l;for(var q in a.default.prototype)l.prototype[q]=a.default.prototype[q];l._pixiMiddleware=[f.blobMiddlewareFactory,c.default,e.default,b.default];g=k.default.Resource;g.setExtensionXhrType("fnt",g.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":170,"./spritesheetParser":173,"./textureParser":174,eventemitter3:198,"resource-loader":204,"resource-loader/lib/middlewares/parsing/blob":205}],173:[function(b,k,g){function h(c,a){return c.isDataUrl?c.data.meta.image:
d.default.resolve(c.url.replace(a,""),c.data.meta.image)}g.__esModule=!0;g.default=function(){return function(c,a){var b=c.name+"_image";if(c.data&&c.type===m.Resource.TYPE.JSON&&c.data.frames&&!this.resources[b]){var d={crossOrigin:c.crossOrigin,metadata:c.metadata.imageMetadata,parentResource:c},g=h(c,this.baseUrl);this.add(b,g,d,function(b){if(b.error)a(b.error);else{var d=new f.Spritesheet(b.texture.baseTexture,c.data,c.url);d.parse(function(){c.spritesheet=d;c.textures=d.textures;a()})}})}else a()}};
g.getResourcePath=h;var m=b("resource-loader"),d=(k=b("url"))&&k.__esModule?k:{default:k},f=b("../core")},{"../core":73,"resource-loader":204,url:7}],174:[function(b,k,g){g.__esModule=!0;g.default=function(){return function(b,f){b.data&&b.type===h.Resource.TYPE.IMAGE&&(b.texture=m.default.fromLoader(b.data,b.url,b.name));f()}};var h=b("resource-loader"),m=(b=b("../core/textures/Texture"))&&b.__esModule?b:{default:b}},{"../core/textures/Texture":123,"resource-loader":204}],175:[function(b,k,g){function h(a,
c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;var m=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}
return function(c,b,d){b&&a(c.prototype,b);d&&a(c,d);return c}}(),d=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c.default=a;return c}(b("../core")),f=(b=b("../core/textures/Texture"))&&b.__esModule?b:{default:b},c=new d.Point,a=new d.Polygon;b=function(b){function e(a,c,h,g,l){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var n=b.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
n=!n||"object"!==typeof n&&"function"!==typeof n?this:n;n._texture=a||f.default.EMPTY;n.uvs=h||new Float32Array([0,0,1,0,1,1,0,1]);n.vertices=c||new Float32Array([0,0,100,0,100,100,0,100]);n.indices=g||new Uint16Array([0,1,3,2]);n.dirty=0;n.indexDirty=0;n.vertexDirty=0;n.autoUpdate=!0;n.blendMode=d.BLEND_MODES.NORMAL;n.canvasPadding=d.settings.MESH_CANVAS_PADDING;n.drawMode=l||e.DRAW_MODES.TRIANGLE_MESH;n.shader=null;n.tintRgb=new Float32Array([1,1,1]);n._glDatas={};n._uvTransform=new d.TextureMatrix(n._texture);
n.uploadUvTransform=!1;n.pluginName="mesh";return n}h(e,b);e.prototype._renderWebGL=function(a){this.refresh();a.setObjectRenderer(a.plugins[this.pluginName]);a.plugins[this.pluginName].render(this)};e.prototype._renderCanvas=function(a){this.refresh();a.plugins[this.pluginName].render(this)};e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture;this.refresh()};e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)};e.prototype.refresh=
function(a){this.autoUpdate&&this.vertexDirty++;this._uvTransform.update(a)&&this._refresh()};e.prototype._refresh=function(){};e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)};e.prototype.containsPoint=function(b){if(!this.getBounds().contains(b.x,b.y))return!1;this.worldTransform.applyInverse(b,c);b=this.vertices;for(var d=a.points,f=this.indices,h=this.indices.length,g=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,l=0;l+2<h;l+=
g){var k=2*f[l],m=2*f[l+1],q=2*f[l+2];d[0]=b[k];d[1]=b[k+1];d[2]=b[m];d[3]=b[m+1];d[4]=b[q];d[5]=b[q+1];if(a.contains(c.x,c.y))return!0}return!1};e.prototype.destroy=function(a){for(var c in this._glDatas){var d=this._glDatas[c];d.destroy?d.destroy():(d.vertexBuffer&&(d.vertexBuffer.destroy(),d.vertexBuffer=null),d.indexBuffer&&(d.indexBuffer.destroy(),d.indexBuffer=null),d.uvBuffer&&(d.uvBuffer.destroy(),d.uvBuffer=null),d.vao&&(d.vao.destroy(),d.vao=null))}this._glDatas=null;b.prototype.destroy.call(this,
a)};m(e,[{key:"texture",get:function(){return this._texture},set:function(a){if(this._texture!==a&&(this._texture=a))if(a.baseTexture.hasLoaded)this._onTextureUpdate();else a.once("update",this._onTextureUpdate,this)}},{key:"tint",get:function(){return d.utils.rgb2hex(this.tintRgb)},set:function(a){this.tintRgb=d.utils.hex2rgb(a,this.tintRgb)}}]);return e}(d.Container);g.default=b;b.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":73,"../core/textures/Texture":123}],176:[function(b,k,g){function h(b,
f){if("function"!==typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);b.prototype=Object.create(f&&f.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});f&&(Object.setPrototypeOf?Object.setPrototypeOf(b,f):b.__proto__=f)}g.__esModule=!0;var m=function(){function b(b,c){for(var a=0;a<c.length;a++){var d=c[a];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}
return function(d,c,a){c&&b(d.prototype,c);a&&b(d,a);return d}}();b=b("./Plane");b=function(b){function d(c,a,e,f,h){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var g=b.call(this,c,4,4);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=!g||"object"!==typeof g&&"function"!==typeof g?this:g;g._origWidth=c.orig.width;g._origHeight=c.orig.height;g._width=g._origWidth;g._height=g._origHeight;g._leftWidth="undefined"!==
typeof a?a:10;g._rightWidth="undefined"!==typeof f?f:10;g._topHeight="undefined"!==typeof e?e:10;g._bottomHeight="undefined"!==typeof h?h:10;g.refresh(!0);return g}h(d,b);d.prototype.updateHorizontalVertices=function(){var c=this.vertices,a=this._topHeight+this._bottomHeight;a=this._height>a?1:this._height/a;c[9]=c[11]=c[13]=c[15]=this._topHeight*a;c[17]=c[19]=c[21]=c[23]=this._height-this._bottomHeight*a;c[25]=c[27]=c[29]=c[31]=this._height};d.prototype.updateVerticalVertices=function(){var c=this.vertices,
a=this._leftWidth+this._rightWidth;a=this._width>a?1:this._width/a;c[2]=c[10]=c[18]=c[26]=this._leftWidth*a;c[4]=c[12]=c[20]=c[28]=this._width-this._rightWidth*a;c[6]=c[14]=c[22]=c[30]=this._width};d.prototype._renderCanvas=function(c){var a=c.context;a.globalAlpha=this.worldAlpha;c.setBlendMode(this.blendMode);var b=this.worldTransform,d=c.resolution;c.roundPixels?a.setTransform(b.a*d,b.b*d,b.c*d,b.d*d,b.tx*d|0,b.ty*d|0):a.setTransform(b.a*d,b.b*d,b.c*d,b.d*d,b.tx*d,b.ty*d);d=this._texture.baseTexture;
c=d.source;b=d.width*d.resolution;d=d.height*d.resolution;this.drawSegment(a,c,b,d,0,1,10,11);this.drawSegment(a,c,b,d,2,3,12,13);this.drawSegment(a,c,b,d,4,5,14,15);this.drawSegment(a,c,b,d,8,9,18,19);this.drawSegment(a,c,b,d,10,11,20,21);this.drawSegment(a,c,b,d,12,13,22,23);this.drawSegment(a,c,b,d,16,17,26,27);this.drawSegment(a,c,b,d,18,19,28,29);this.drawSegment(a,c,b,d,20,21,30,31)};d.prototype.drawSegment=function(c,a,b,d,f,h,g,k){var e=this.uvs,l=this.vertices,n=(e[g]-e[f])*b,p=(e[k]-e[h])*
d;g=l[g]-l[f];k=l[k]-l[h];1>n&&(n=1);1>p&&(p=1);1>g&&(g=1);1>k&&(k=1);c.drawImage(a,e[f]*b,e[h]*d,n,p,l[f],l[h],g,k)};d.prototype._refresh=function(){b.prototype._refresh.call(this);var c=this.uvs,a=this._texture;this._origWidth=a.orig.width;this._origHeight=a.orig.height;a=1/this._origWidth;var d=1/this._origHeight;c[0]=c[8]=c[16]=c[24]=0;c[1]=c[3]=c[5]=c[7]=0;c[6]=c[14]=c[22]=c[30]=1;c[25]=c[27]=c[29]=c[31]=1;c[2]=c[10]=c[18]=c[26]=a*this._leftWidth;c[4]=c[12]=c[20]=c[28]=1-a*this._rightWidth;c[9]=
c[11]=c[13]=c[15]=d*this._topHeight;c[17]=c[19]=c[21]=c[23]=1-d*this._bottomHeight;this.updateHorizontalVertices();this.updateVerticalVertices();this.dirty++;this.multiplyUvs()};m(d,[{key:"width",get:function(){return this._width},set:function(c){this._width=c;this._refresh()}},{key:"height",get:function(){return this._height},set:function(c){this._height=c;this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(c){this._leftWidth=c;this._refresh()}},{key:"rightWidth",
get:function(){return this._rightWidth},set:function(c){this._rightWidth=c;this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(c){this._topHeight=c;this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(c){this._bottomHeight=c;this._refresh()}}]);return d}((b&&b.__esModule?b:{default:b}).default);g.default=b},{"./Plane":177}],177:[function(b,k,g){function h(b,f){if("function"!==typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+
typeof f);b.prototype=Object.create(f&&f.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});f&&(Object.setPrototypeOf?Object.setPrototypeOf(b,f):b.__proto__=f)}g.__esModule=!0;var m=(b=b("./Mesh"))&&b.__esModule?b:{default:b};b=function(b){function d(c,a,e){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");c=b.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&
"function"!==typeof c?this:c;c._ready=!0;c.verticesX=a||10;c.verticesY=e||10;c.drawMode=m.default.DRAW_MODES.TRIANGLES;c.refresh();return c}h(d,b);d.prototype._refresh=function(){var c=this._texture,a=this.verticesX*this.verticesY,b=[],d=[],f=[],h=this.verticesX-1,g=this.verticesY-1,k=c.width/h;c=c.height/g;for(var m=0;m<a;m++){var v=m%this.verticesX,w=m/this.verticesX|0;b.push(v*k,w*c);d.push(v/h,w/g)}a=h*g;for(g=0;g<a;g++)k=g%h,c=g/h|0,m=c*this.verticesX+k+1,v=(c+1)*this.verticesX+k,w=(c+1)*this.verticesX+
k+1,f.push(c*this.verticesX+k,m,v),f.push(m,w,v);this.vertices=new Float32Array(b);this.uvs=new Float32Array(d);this.colors=new Float32Array([]);this.indices=new Uint16Array(f);this.dirty++;this.indexDirty++;this.multiplyUvs()};d.prototype._onTextureUpdate=function(){m.default.prototype._onTextureUpdate.call(this);this._ready&&this.refresh()};return d}(m.default);g.default=b},{"./Mesh":175}],178:[function(b,k,g){function h(b,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+
typeof d);b.prototype=Object.create(d&&d.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(b,d):b.__proto__=d)}g.__esModule=!0;b=b("./Mesh");b=function(b){function d(f,c){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");f=b.call(this,f);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=!f||"object"!==typeof f&&"function"!==typeof f?this:f;f.points=
c;f.vertices=new Float32Array(4*c.length);f.uvs=new Float32Array(4*c.length);f.colors=new Float32Array(2*c.length);f.indices=new Uint16Array(2*c.length);f.autoUpdate=!0;f.refresh();return f}h(d,b);d.prototype._refresh=function(){var b=this.points;if(!(1>b.length)&&this._texture._uvs){this.vertices.length/4!==b.length&&(this.vertices=new Float32Array(4*b.length),this.uvs=new Float32Array(4*b.length),this.colors=new Float32Array(2*b.length),this.indices=new Uint16Array(2*b.length));var c=this.uvs,a=
this.indices,d=this.colors;c[0]=0;c[1]=0;c[2]=0;c[3]=1;d[0]=1;d[1]=1;a[0]=0;a[1]=1;b=b.length;for(var h=1;h<b;h++){var g=4*h,n=h/(b-1);c[g]=n;c[g+1]=0;c[g+2]=n;c[g+3]=1;g=2*h;d[g]=1;d[g+1]=1;g=2*h;a[g]=g;a[g+1]=g+1}this.dirty++;this.indexDirty++;this.multiplyUvs();this.refreshVertices()}};d.prototype.refreshVertices=function(){var b=this.points;if(!(1>b.length))for(var c=b[0],a,d,h=this.vertices,g=b.length,n=0;n<g;n++){var k=b[n],m=4*n;a=n<b.length-1?b[n+1]:k;d=-(a.x-c.x);c=a.y-c.y;a=Math.sqrt(c*
c+d*d);var t=this._texture.height/2;c/=a;d/=a;c*=t;d*=t;h[m]=k.x+c;h[m+1]=k.y+d;h[m+2]=k.x-c;h[m+3]=k.y-d;c=k}};d.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices();this.containerUpdateTransform()};return d}((b&&b.__esModule?b:{default:b}).default);g.default=b},{"./Mesh":175}],179:[function(b,k,g){g.__esModule=!0;k=function(b){if(b&&b.__esModule)return b;var d={};if(null!=b)for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(d[f]=b[f]);d.default=b;return d}(b("../../core"));
var h=(b=b("../Mesh"))&&b.__esModule?b:{default:b};b=function(){function b(d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.renderer=d}b.prototype.render=function(b){var d=this.renderer,c=d.context,a=b.worldTransform,e=d.resolution;d.roundPixels?c.setTransform(a.a*e,a.b*e,a.c*e,a.d*e,a.tx*e|0,a.ty*e|0):c.setTransform(a.a*e,a.b*e,a.c*e,a.d*e,a.tx*e,a.ty*e);d.context.globalAlpha=b.worldAlpha;d.setBlendMode(b.blendMode);b.drawMode===h.default.DRAW_MODES.TRIANGLE_MESH?
this._renderTriangleMesh(b):this._renderTriangles(b)};b.prototype._renderTriangleMesh=function(b){for(var d=b.vertices.length/2,c=0;c<d-2;c++){var a=2*c;this._renderDrawTriangle(b,a,a+2,a+4)}};b.prototype._renderTriangles=function(b){for(var d=b.indices,c=d.length,a=0;a<c;a+=3)this._renderDrawTriangle(b,2*d[a],2*d[a+1],2*d[a+2])};b.prototype._renderDrawTriangle=function(b,f,c,a){var d=this.renderer.context,h=b.uvs,g=b.vertices,n=b._texture;if(n.valid){n=n.baseTexture;var k=n.source,m=n.width,t=n.height;
if(b.uploadUvTransform){var v=b._uvTransform.mapCoord;var w=(h[f]*v.a+h[f+1]*v.c+v.tx)*n.width;var A=(h[c]*v.a+h[c+1]*v.c+v.tx)*n.width;var u=(h[a]*v.a+h[a+1]*v.c+v.tx)*n.width;var z=(h[f]*v.b+h[f+1]*v.d+v.ty)*n.height;var y=(h[c]*v.b+h[c+1]*v.d+v.ty)*n.height;h=(h[a]*v.b+h[a+1]*v.d+v.ty)*n.height}else w=h[f]*n.width,A=h[c]*n.width,u=h[a]*n.width,z=h[f+1]*n.height,y=h[c+1]*n.height,h=h[a+1]*n.height;v=g[f];var B=g[c],C=g[a];f=g[f+1];c=g[c+1];a=g[a+1];var r=b.canvasPadding/this.renderer.resolution;
if(0<r){g=r/Math.abs(b.worldTransform.a);b=r/Math.abs(b.worldTransform.d);r=(v+B+C)/3;var D=(f+c+a)/3,E=v-r,O=f-D,F=Math.sqrt(E*E+O*O);v=r+E/F*(F+g);f=D+O/F*(F+b);E=B-r;O=c-D;F=Math.sqrt(E*E+O*O);B=r+E/F*(F+g);c=D+O/F*(F+b);E=C-r;O=a-D;F=Math.sqrt(E*E+O*O);C=r+E/F*(F+g);a=D+O/F*(F+b)}d.save();d.beginPath();d.moveTo(v,f);d.lineTo(B,c);d.lineTo(C,a);d.closePath();d.clip();b=w*y+z*u+A*h-y*u-z*A-w*h;d.transform((v*y+z*C+B*h-y*C-z*B-v*h)/b,(f*y+z*a+c*h-y*a-z*c-f*h)/b,(w*B+v*u+A*C-B*u-v*A-w*C)/b,(w*c+f*
u+A*a-c*u-f*A-w*a)/b,(w*y*C+z*B*u+v*A*h-v*y*u-z*A*C-w*B*h)/b,(w*y*a+z*c*u+f*A*h-f*y*u-z*A*a-w*c*h)/b);d.drawImage(k,0,0,m*n.resolution,t*n.resolution,0,0,m,t);d.restore();this.renderer.invalidateBlendMode()}};b.prototype.renderMeshFlat=function(b){var d=this.renderer.context;b=b.vertices;var c=b.length/2;d.beginPath();for(var a=1;a<c-2;++a){var e=2*a,h=b[e+2],g=b[e+3],n=b[e+4],k=b[e+5];d.moveTo(b[e],b[e+1]);d.lineTo(h,g);d.lineTo(n,k)}d.fillStyle="#FF0000";d.fill();d.closePath()};b.prototype.destroy=
function(){this.renderer=null};return b}();g.default=b;k.CanvasRenderer.registerPlugin("mesh",b)},{"../../core":73,"../Mesh":175}],180:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}g.__esModule=!0;var m=b("./Mesh");Object.defineProperty(g,"Mesh",{enumerable:!0,get:function(){return h(m).default}});var d=b("./webgl/MeshRenderer");Object.defineProperty(g,"MeshRenderer",{enumerable:!0,get:function(){return h(d).default}});var f=b("./canvas/CanvasMeshRenderer");Object.defineProperty(g,
"CanvasMeshRenderer",{enumerable:!0,get:function(){return h(f).default}});var c=b("./Plane");Object.defineProperty(g,"Plane",{enumerable:!0,get:function(){return h(c).default}});var a=b("./NineSlicePlane");Object.defineProperty(g,"NineSlicePlane",{enumerable:!0,get:function(){return h(a).default}});var e=b("./Rope");Object.defineProperty(g,"Rope",{enumerable:!0,get:function(){return h(e).default}})},{"./Mesh":175,"./NineSlicePlane":176,"./Plane":177,"./Rope":178,"./canvas/CanvasMeshRenderer":179,
"./webgl/MeshRenderer":181}],181:[function(b,k,g){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}g.__esModule=!0;var m=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,
b)&&(c[b]=a[b]);c.default=a;return c}(b("../../core")),d=(k=b("pixi-gl-core"))&&k.__esModule?k:{default:k},f=(k=b("../Mesh"))&&k.__esModule?k:{default:k};b("path");var c=m.Matrix.IDENTITY;b=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.shader=null;return c}h(b,a);b.prototype.onContextChange=
function(){this.shader=new m.Shader(this.renderer.gl,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")};
b.prototype.render=function(a){var b=this.renderer,e=b.gl,h=a._texture;if(h.valid){var g=a._glDatas[b.CONTEXT_UID];g||(b.bindVao(null),g={shader:this.shader,vertexBuffer:d.default.GLBuffer.createVertexBuffer(e,a.vertices,e.STREAM_DRAW),uvBuffer:d.default.GLBuffer.createVertexBuffer(e,a.uvs,e.STREAM_DRAW),indexBuffer:d.default.GLBuffer.createIndexBuffer(e,a.indices,e.STATIC_DRAW),vao:null,dirty:a.dirty,indexDirty:a.indexDirty,vertexDirty:a.vertexDirty},g.vao=(new d.default.VertexArrayObject(e)).addIndex(g.indexBuffer).addAttribute(g.vertexBuffer,
g.shader.attributes.aVertexPosition,e.FLOAT,!1,8,0).addAttribute(g.uvBuffer,g.shader.attributes.aTextureCoord,e.FLOAT,!1,8,0),a._glDatas[b.CONTEXT_UID]=g);b.bindVao(g.vao);a.dirty!==g.dirty&&(g.dirty=a.dirty,g.uvBuffer.upload(a.uvs));a.indexDirty!==g.indexDirty&&(g.indexDirty=a.indexDirty,g.indexBuffer.upload(a.indices));a.vertexDirty!==g.vertexDirty&&(g.vertexDirty=a.vertexDirty,g.vertexBuffer.upload(a.vertices));b.bindShader(g.shader);g.shader.uniforms.uSampler=b.bindTexture(h);b.state.setBlendMode(m.utils.correctBlendMode(a.blendMode,
h.baseTexture.premultipliedAlpha));g.shader.uniforms.uTransform&&(g.shader.uniforms.uTransform=a.uploadUvTransform?a._uvTransform.mapCoord.toArray(!0):c.toArray(!0));g.shader.uniforms.translationMatrix=a.worldTransform.toArray(!0);g.shader.uniforms.uColor=m.utils.premultiplyRgba(a.tintRgb,a.worldAlpha,g.shader.uniforms.uColor,h.baseTexture.premultipliedAlpha);g.vao.draw(a.drawMode===f.default.DRAW_MODES.TRIANGLE_MESH?e.TRIANGLE_STRIP:e.TRIANGLES,a.indices.length,0)}};return b}(m.ObjectRenderer);g.default=
b;m.WebGLRenderer.registerPlugin("mesh",b)},{"../../core":73,"../Mesh":175,path:1,"pixi-gl-core":22}],182:[function(b,k,g){function h(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}g.__esModule=!0;var m=function(){function c(a,c){for(var b=0;b<
c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}(),d=function(c){if(c&&c.__esModule)return c;var a={};if(null!=c)for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b]);a.default=c;return a}(b("../core")),f=b("../core/utils");b=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,f=arguments[1],h=
2<arguments.length&&void 0!==arguments[2]?arguments[2]:16384,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var k=c.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");k=!k||"object"!==typeof k&&"function"!==typeof k?this:k;16384<h&&(h=16384);h>b&&(h=b);k._properties=[!1,!0,!1,!1,!1];k._maxSize=b;k._batchSize=h;k._glBuffers={};k._bufferUpdateIDs=[];k._updateID=
0;k.interactiveChildren=!1;k.blendMode=d.BLEND_MODES.NORMAL;k.autoResize=g;k.roundPixels=!0;k.baseTexture=null;k.setProperties(f);k._tint=0;k.tintRgb=new Float32Array(4);k.tint=16777215;return k}h(a,c);a.prototype.setProperties=function(a){a&&(this._properties[0]="vertices"in a||"scale"in a?!!a.vertices||!!a.scale:this._properties[0],this._properties[1]="position"in a?!!a.position:this._properties[1],this._properties[2]="rotation"in a?!!a.rotation:this._properties[2],this._properties[3]="uvs"in a?
!!a.uvs:this._properties[3],this._properties[4]="tint"in a||"alpha"in a?!!a.tint||!!a.alpha:this._properties[4])};a.prototype.updateTransform=function(){this.displayObjectUpdateTransform()};a.prototype.renderWebGL=function(a){var c=this;if(this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable){if(!this.baseTexture&&(this.baseTexture=this.children[0]._texture.baseTexture,!this.baseTexture.hasLoaded))this.baseTexture.once("update",function(){return c.onChildrenChange(0)});a.setObjectRenderer(a.plugins.particle);
a.plugins.particle.render(this)}};a.prototype.onChildrenChange=function(a){for(a=Math.floor(a/this._batchSize);this._bufferUpdateIDs.length<a;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[a]=++this._updateID};a.prototype.renderCanvas=function(a){if(this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable){var c=a.context,b=this.worldTransform,d=!0;a.setBlendMode(this.blendMode);c.globalAlpha=this.worldAlpha;this.displayObjectUpdateTransform();for(var e=0;e<this.children.length;++e){var f=
this.children[e];if(f.visible){var h=f._texture.frame;c.globalAlpha=this.worldAlpha*f.alpha;if(0===f.rotation%(2*Math.PI)){d&&(c.setTransform(b.a,b.b,b.c,b.d,b.tx*a.resolution,b.ty*a.resolution),d=!1);var g=f.anchor.x*-h.width*f.scale.x+f.position.x+.5;var k=f.anchor.y*-h.height*f.scale.y+f.position.y+.5;var m=h.width*f.scale.x;var u=h.height*f.scale.y}else d||(d=!0),f.displayObjectUpdateTransform(),g=f.worldTransform,a.roundPixels?c.setTransform(g.a,g.b,g.c,g.d,g.tx*a.resolution|0,g.ty*a.resolution|
0):c.setTransform(g.a,g.b,g.c,g.d,g.tx*a.resolution,g.ty*a.resolution),g=f.anchor.x*-h.width+.5,k=f.anchor.y*-h.height+.5,m=h.width,u=h.height;var z=f._texture.baseTexture.resolution;c.drawImage(f._texture.baseTexture.source,h.x*z,h.y*z,h.width*z,h.height*z,g*a.resolution,k*a.resolution,m*a.resolution,u*a.resolution)}}}};a.prototype.destroy=function(a){c.prototype.destroy.call(this,a);if(this._buffers)for(a=0;a<this._buffers.length;++a)this._buffers[a].destroy();this._bufferUpdateIDs=this._buffers=
this._properties=null};m(a,[{key:"tint",get:function(){return this._tint},set:function(a){this._tint=a;(0,f.hex2rgb)(a,this.tintRgb)}}]);return a}(d.Container);g.default=b},{"../core":73,"../core/utils":133}],183:[function(b,k,g){g.__esModule=!0;var h=b("./ParticleContainer");Object.defineProperty(g,"ParticleContainer",{enumerable:!0,get:function(){return(h&&h.__esModule?h:{default:h}).default}});var m=b("./webgl/ParticleRenderer");Object.defineProperty(g,"ParticleRenderer",{enumerable:!0,get:function(){return(m&&
m.__esModule?m:{default:m}).default}})},{"./ParticleContainer":182,"./webgl/ParticleRenderer":185}],184:[function(b,k,g){g.__esModule=!0;var h=(k=b("pixi-gl-core"))&&k.__esModule?k:{default:k},m=(b=b("../../core/utils/createIndicesForQuads"))&&b.__esModule?b:{default:b};b=function(){function b(d,c,a,e){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.gl=d;this.size=e;this.dynamicProperties=[];this.staticProperties=[];for(d=0;d<c.length;++d)e=c[d],e={attribute:e.attribute,
size:e.size,uploadFunction:e.uploadFunction,unsignedByte:e.unsignedByte,offset:e.offset},a[d]?this.dynamicProperties.push(e):this.staticProperties.push(e);this.staticStride=0;this.staticDataUint32=this.staticData=this.staticBuffer=null;this.dynamicStride=0;this.dynamicDataUint32=this.dynamicData=this.dynamicBuffer=null;this._updateID=0;this.initBuffers()}b.prototype.initBuffers=function(){var b=this.gl,c=0;this.indices=(0,m.default)(this.size);this.indexBuffer=h.default.GLBuffer.createIndexBuffer(b,
this.indices,b.STATIC_DRAW);for(var a=this.dynamicStride=0;a<this.dynamicProperties.length;++a){var d=this.dynamicProperties[a];d.offset=c;c+=d.size;this.dynamicStride+=d.size}c=new ArrayBuffer(this.size*this.dynamicStride*16);this.dynamicData=new Float32Array(c);this.dynamicDataUint32=new Uint32Array(c);this.dynamicBuffer=h.default.GLBuffer.createVertexBuffer(b,c,b.STREAM_DRAW);for(a=this.staticStride=c=0;a<this.staticProperties.length;++a)d=this.staticProperties[a],d.offset=c,c+=d.size,this.staticStride+=
d.size;c=new ArrayBuffer(this.size*this.staticStride*16);this.staticData=new Float32Array(c);this.staticDataUint32=new Uint32Array(c);this.staticBuffer=h.default.GLBuffer.createVertexBuffer(b,c,b.STATIC_DRAW);this.vao=(new h.default.VertexArrayObject(b)).addIndex(this.indexBuffer);for(c=0;c<this.dynamicProperties.length;++c)a=this.dynamicProperties[c],a.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,a.attribute,b.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*a.offset):this.vao.addAttribute(this.dynamicBuffer,
a.attribute,b.FLOAT,!1,4*this.dynamicStride,4*a.offset);for(c=0;c<this.staticProperties.length;++c)a=this.staticProperties[c],a.unsignedByte?this.vao.addAttribute(this.staticBuffer,a.attribute,b.UNSIGNED_BYTE,!0,4*this.staticStride,4*a.offset):this.vao.addAttribute(this.staticBuffer,a.attribute,b.FLOAT,!1,4*this.staticStride,4*a.offset)};b.prototype.uploadDynamic=function(b,c,a){for(var d=0;d<this.dynamicProperties.length;d++){var f=this.dynamicProperties[d];f.uploadFunction(b,c,a,f.unsignedByte?
this.dynamicDataUint32:this.dynamicData,this.dynamicStride,f.offset)}this.dynamicBuffer.upload()};b.prototype.uploadStatic=function(b,c,a){for(var d=0;d<this.staticProperties.length;d++){var f=this.staticProperties[d];f.uploadFunction(b,c,a,f.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,f.offset)}this.staticBuffer.upload()};b.prototype.destroy=function(){this.dynamicProperties=null;this.dynamicBuffer.destroy();this.staticProperties=this.dynamicDataUint32=this.dynamicData=this.dynamicBuffer=
null;this.staticBuffer.destroy();this.staticDataUint32=this.staticData=this.staticBuffer=null};return b}();g.default=b},{"../../core/utils/createIndicesForQuads":131,"pixi-gl-core":22}],185:[function(b,k,g){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
c):a.__proto__=c)}g.__esModule=!0;var m=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c.default=a;return c}(b("../../core")),d=(k=b("./ParticleShader"))&&k.__esModule?k:{default:k},f=(k=b("./ParticleBuffer"))&&k.__esModule?k:{default:k},c=b("../../core/utils");b=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.shader=null;c.indexBuffer=null;c.properties=null;c.tempMatrix=new m.Matrix;c.CONTEXT_UID=0;return c}h(b,a);b.prototype.onContextChange=function(){var a=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;this.shader=new d.default(a);this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,
offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]};b.prototype.start=function(){this.renderer.bindShader(this.shader)};b.prototype.render=function(a){var c=a.children,b=a._maxSize,d=a._batchSize,e=this.renderer,f=c.length;if(0!==f){f>b&&(f=b);(b=
a._glBuffers[e.CONTEXT_UID])||(b=a._glBuffers[e.CONTEXT_UID]=this.generateBuffers(a));var h=c[0]._texture.baseTexture;this.renderer.setBlendMode(m.utils.correctBlendMode(a.blendMode,h.premultipliedAlpha));var g=e.gl,k=a.worldTransform.copy(this.tempMatrix);k.prepend(e._activeRenderTarget.projectionMatrix);this.shader.uniforms.projectionMatrix=k.toArray(!0);this.shader.uniforms.uColor=m.utils.premultiplyRgba(a.tintRgb,a.worldAlpha,this.shader.uniforms.uColor,h.premultipliedAlpha);this.shader.uniforms.uSampler=
e.bindTexture(h);h=!1;for(var l=k=0;k<f;k+=d,l+=1){var z=f-k;z>d&&(z=d);if(l>=b.length){if(!a.autoResize)break;b.push(this._generateOneMoreBuffer(a))}var y=b[l];y.uploadDynamic(c,k,z);var B=a._bufferUpdateIDs[l]||0;if(h=h||y._updateID<B)y._updateID=a._updateID,y.uploadStatic(c,k,z);e.bindVao(y.vao);y.vao.draw(g.TRIANGLES,6*z)}}};b.prototype.generateBuffers=function(a){var c=this.renderer.gl,b=[],d=a._maxSize,e=a._batchSize;a=a._properties;for(var h=0;h<d;h+=e)b.push(new f.default(c,this.properties,
a,e));return b};b.prototype._generateOneMoreBuffer=function(a){return new f.default(this.renderer.gl,this.properties,a._properties,a._batchSize)};b.prototype.uploadVertices=function(a,c,b,d,e,f){for(var h,g,k,n,l=0;l<b;++l){n=a[c+l];h=n._texture;var m=n.scale.x,p=n.scale.y;k=h.trim;var q=h.orig;k?(g=k.x-n.anchor.x*q.width,h=g+k.width,n=k.y-n.anchor.y*q.height,k=n+k.height):(h=q.width*(1-n.anchor.x),g=q.width*-n.anchor.x,k=q.height*(1-n.anchor.y),n=q.height*-n.anchor.y);d[f]=g*m;d[f+1]=n*p;d[f+e]=
h*m;d[f+e+1]=n*p;d[f+2*e]=h*m;d[f+2*e+1]=k*p;d[f+3*e]=g*m;d[f+3*e+1]=k*p;f+=4*e}};b.prototype.uploadPosition=function(a,c,b,d,e,f){for(var h=0;h<b;h++){var g=a[c+h].position;d[f]=g.x;d[f+1]=g.y;d[f+e]=g.x;d[f+e+1]=g.y;d[f+2*e]=g.x;d[f+2*e+1]=g.y;d[f+3*e]=g.x;d[f+3*e+1]=g.y;f+=4*e}};b.prototype.uploadRotation=function(a,c,b,d,e,f){for(var h=0;h<b;h++){var g=a[c+h].rotation;d[f]=g;d[f+e]=g;d[f+2*e]=g;d[f+3*e]=g;f+=4*e}};b.prototype.uploadUvs=function(a,c,b,d,e,f){for(var h=0;h<b;++h){var g=a[c+h]._texture._uvs;
g?(d[f]=g.x0,d[f+1]=g.y0,d[f+e]=g.x1,d[f+e+1]=g.y1,d[f+2*e]=g.x2,d[f+2*e+1]=g.y2,d[f+3*e]=g.x3,d[f+3*e+1]=g.y3):(d[f]=0,d[f+1]=0,d[f+e]=0,d[f+e+1]=0,d[f+2*e]=0,d[f+2*e+1]=0,d[f+3*e]=0,d[f+3*e+1]=0);f+=4*e}};b.prototype.uploadTint=function(a,b,d,e,f,h){for(var g=0;g<d;++g){var k=a[b+g],n=k._texture.baseTexture.premultipliedAlpha,l=k.alpha;k=1>l&&n?(0,c.premultiplyTint)(k._tintRGB,l):k._tintRGB+(255*l<<24);e[h]=k;e[h+f]=k;e[h+2*f]=k;e[h+3*f]=k;h+=4*f}};b.prototype.destroy=function(){this.renderer.gl&&
this.renderer.gl.deleteBuffer(this.indexBuffer);a.prototype.destroy.call(this);this.shader.destroy();this.tempMatrix=this.indices=null};return b}(m.ObjectRenderer);g.default=b;m.WebGLRenderer.registerPlugin("particle",b)},{"../../core":73,"../../core/utils":133,"./ParticleBuffer":184,"./ParticleShader":186}],186:[function(b,k,g){function h(b,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);b.prototype=Object.create(d&&d.prototype,
{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});d&&(Object.setPrototypeOf?Object.setPrototypeOf(b,d):b.__proto__=d)}g.__esModule=!0;b=b("../../core/Shader");b=function(b){function d(f){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");f=b.call(this,f,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute vec2 aPositionCoord;\nattribute float aRotation;\nuniform mat3 projectionMatrix;\nuniform vec4 uColor;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void){\n   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n   vec2 v = vec2(x, y);\n   v = v + aPositionCoord;\n   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = aColor * uColor;\n}",
"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void){\n  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n  gl_FragColor = color;\n}");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!==typeof f&&"function"!==typeof f?this:f}h(d,b);return d}((b&&b.__esModule?b:{default:b}).default);g.default=b},{"../../core/Shader":52}],187:[function(b,k,g){Math.sign||(Math.sign=function(b){b=Number(b);
return 0===b||isNaN(b)?b:0<b?1:-1})},{}],188:[function(b,k,g){Number.isInteger||(Number.isInteger=function(b){return"number"===typeof b&&isFinite(b)&&Math.floor(b)===b})},{}],189:[function(b,k,g){b=(b=b("object-assign"))&&b.__esModule?b:{default:b};Object.assign||(Object.assign=b.default)},{"object-assign":13}],190:[function(b,k,g){b("./Object.assign");b("./requestAnimationFrame");b("./Math.sign");b("./Number.isInteger");window.ArrayBuffer||(window.ArrayBuffer=Array);window.Float32Array||(window.Float32Array=
Array);window.Uint32Array||(window.Uint32Array=Array);window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":187,"./Number.isInteger":188,"./Object.assign":189,"./requestAnimationFrame":191}],191:[function(b,k,g){(function(b){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()});if(!b.performance||!b.performance.now){var h=Date.now();b.performance||(b.performance={});b.performance.now=function(){return Date.now()-h}}for(var d=Date.now(),f=["ms","moz","webkit",
"o"],c=0;c<f.length&&!b.requestAnimationFrame;++c){var a=f[c];b.requestAnimationFrame=b[a+"RequestAnimationFrame"];b.cancelAnimationFrame=b[a+"CancelAnimationFrame"]||b[a+"CancelRequestAnimationFrame"]}b.requestAnimationFrame||(b.requestAnimationFrame=function(a){if("function"!==typeof a)throw new TypeError(a+"is not a function");var c=Date.now(),b=16+d-c;0>b&&(b=0);d=c;return setTimeout(function(){d=Date.now();a(performance.now())},b)});b.cancelAnimationFrame||(b.cancelAnimationFrame=function(a){return clearTimeout(a)})}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],192:[function(b,k,g){function h(a,c){var b=!1;if(a&&a._textures&&a._textures.length)for(var d=0;d<a._textures.length;d++)if(a._textures[d]instanceof l.Texture){var e=a._textures[d].baseTexture;-1===c.indexOf(e)&&(c.push(e),b=!0)}return b}function m(a,c){return a instanceof l.BaseTexture?(-1===c.indexOf(a)&&c.push(a),!0):!1}function d(a,c){return a._texture&&a._texture instanceof l.Texture?
(a=a._texture.baseTexture,-1===c.indexOf(a)&&c.push(a),!0):!1}function f(a,c){return c instanceof l.Text?(c.updateText(!0),!0):!1}function c(a,c){return c instanceof l.TextStyle?(a=c.toFontString(),l.TextMetrics.measureFont(a),!0):!1}function a(a,c){return a instanceof l.Text?(-1===c.indexOf(a.style)&&c.push(a.style),-1===c.indexOf(a)&&c.push(a),a=a._texture.baseTexture,-1===c.indexOf(a)&&c.push(a),!0):!1}function e(a,c){return a instanceof l.TextStyle?(-1===c.indexOf(a)&&c.push(a),!0):!1}g.__esModule=
!0;var l=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c.default=a;return c}(b("../core")),q=(b=b("./limiters/CountLimiter"))&&b.__esModule?b:{default:b},n=l.ticker.shared;l.settings.UPLOADS_PER_FRAME=4;b=function(){function b(g){var k=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.limiter=new q.default(l.settings.UPLOADS_PER_FRAME);this.renderer=g;this.uploadHookHelper=
null;this.queue=[];this.addHooks=[];this.uploadHooks=[];this.completes=[];this.ticking=!1;this.delayedTick=function(){k.queue&&k.prepareItems()};this.registerFindHook(a);this.registerFindHook(e);this.registerFindHook(h);this.registerFindHook(m);this.registerFindHook(d);this.registerUploadHook(f);this.registerUploadHook(c)}b.prototype.upload=function(a,c){"function"===typeof a&&(c=a,a=null);a&&this.add(a);this.queue.length?(c&&this.completes.push(c),this.ticking||(this.ticking=!0,n.addOnce(this.tick,
this,l.UPDATE_PRIORITY.UTILITY))):c&&c()};b.prototype.tick=function(){setTimeout(this.delayedTick,0)};b.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var a=this.queue[0],c=!1;if(a&&!a._destroyed)for(var b=0,d=this.uploadHooks.length;b<d;b++)if(this.uploadHooks[b](this.uploadHookHelper,a)){this.queue.shift();c=!0;break}c||this.queue.shift()}if(this.queue.length)n.addOnce(this.tick,this,l.UPDATE_PRIORITY.UTILITY);else for(this.ticking=
!1,a=this.completes.slice(0),c=this.completes.length=0,b=a.length;c<b;c++)a[c]()};b.prototype.registerFindHook=function(a){a&&this.addHooks.push(a);return this};b.prototype.registerUploadHook=function(a){a&&this.uploadHooks.push(a);return this};b.prototype.add=function(a){for(var c=0,b=this.addHooks.length;c<b&&!this.addHooks[c](a,this.queue);c++);if(a instanceof l.Container)for(c=a.children.length-1;0<=c;c--)this.add(a.children[c]);return this};b.prototype.destroy=function(){this.ticking&&n.remove(this.tick,
this);this.ticking=!1;this.uploadHookHelper=this.limiter=this.queue=this.completes=this.renderer=this.uploadHooks=this.addHooks=null};return b}();g.default=b},{"../core":73,"./limiters/CountLimiter":195}],193:[function(b,k,g){function h(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,
c):b.__proto__=c)}function m(b,c){return c instanceof d.BaseTexture?(c=c.source,b.ctx.drawImage(c,0,0,0===c.width?b.canvas.width:Math.min(b.canvas.width,c.width),0===c.height?b.canvas.height:Math.min(b.canvas.height,c.height),0,0,b.canvas.width,b.canvas.height),!0):!1}g.__esModule=!0;var d=function(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}(b("../../core"));b=b("../BasePrepare");b=function(b){function c(a){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");a=b.call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.uploadHookHelper=a;a.canvas=document.createElement("canvas");a.canvas.width=16;a.canvas.height=16;a.ctx=a.canvas.getContext("2d");a.registerUploadHook(m);return a}h(c,b);c.prototype.destroy=function(){b.prototype.destroy.call(this);this.canvas=this.ctx=null};return c}((b&&
b.__esModule?b:{default:b}).default);g.default=b;d.CanvasRenderer.registerPlugin("prepare",b)},{"../../core":73,"../BasePrepare":192}],194:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}g.__esModule=!0;var m=b("./webgl/WebGLPrepare");Object.defineProperty(g,"webgl",{enumerable:!0,get:function(){return h(m).default}});var d=b("./canvas/CanvasPrepare");Object.defineProperty(g,"canvas",{enumerable:!0,get:function(){return h(d).default}});var f=b("./BasePrepare");Object.defineProperty(g,
"BasePrepare",{enumerable:!0,get:function(){return h(f).default}});var c=b("./limiters/CountLimiter");Object.defineProperty(g,"CountLimiter",{enumerable:!0,get:function(){return h(c).default}});var a=b("./limiters/TimeLimiter");Object.defineProperty(g,"TimeLimiter",{enumerable:!0,get:function(){return h(a).default}})},{"./BasePrepare":192,"./canvas/CanvasPrepare":193,"./limiters/CountLimiter":195,"./limiters/TimeLimiter":196,"./webgl/WebGLPrepare":197}],195:[function(b,k,g){g.__esModule=!0;b=function(){function b(h){if(!(this instanceof
b))throw new TypeError("Cannot call a class as a function");this.maxItemsPerFrame=h;this.itemsLeft=0}b.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame};b.prototype.allowedToUpload=function(){return 0<this.itemsLeft--};return b}();g.default=b},{}],196:[function(b,k,g){g.__esModule=!0;b=function(){function b(h){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.maxMilliseconds=h;this.frameStart=0}b.prototype.beginFrame=function(){this.frameStart=
Date.now()};b.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds};return b}();g.default=b},{}],197:[function(b,k,g){function h(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}function m(a,b){return b instanceof
c.BaseTexture?(b._glTextures[a.CONTEXT_UID]||a.textureManager.updateTexture(b),!0):!1}function d(a,b){return b instanceof c.Graphics?((b.dirty||b.clearDirty||!b._webGL[a.plugins.graphics.CONTEXT_UID])&&a.plugins.graphics.updateGraphics(b),!0):!1}function f(a,b){return a instanceof c.Graphics?(b.push(a),!0):!1}g.__esModule=!0;var c=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c.default=a;return c}(b("../../core"));
b=b("../BasePrepare");b=function(a){function c(b){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");b=a.call(this,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.uploadHookHelper=b.renderer;b.registerFindHook(f);b.registerUploadHook(m);b.registerUploadHook(d);return b}h(c,a);return c}((b&&b.__esModule?b:{default:b}).default);g.default=b;c.WebGLRenderer.registerPlugin("prepare",
b)},{"../../core":73,"../BasePrepare":192}],198:[function(b,k,g){function h(){}function m(a,c,b){this.fn=a;this.context=c;this.once=b||!1}function d(){this._events=new h;this._eventsCount=0}var f=Object.prototype.hasOwnProperty,c="~";Object.create&&(h.prototype=Object.create(null),(new h).__proto__||(c=!1));d.prototype.eventNames=function(){var a=[],b,d;if(0===this._eventsCount)return a;for(d in b=this._events)f.call(b,d)&&a.push(c?d.slice(1):d);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(b)):
a};d.prototype.listeners=function(a,b){a=this._events[c?c+a:a];if(b)return!!a;if(!a)return[];if(a.fn)return[a.fn];b=0;for(var d=a.length,e=Array(d);b<d;b++)e[b]=a[b].fn;return e};d.prototype.emit=function(a,b,d,f,h,g){var e=c?c+a:a;if(!this._events[e])return!1;e=this._events[e];var k=arguments.length,n;if(e.fn){e.once&&this.removeListener(a,e.fn,void 0,!0);switch(k){case 1:return e.fn.call(e.context),!0;case 2:return e.fn.call(e.context,b),!0;case 3:return e.fn.call(e.context,b,d),!0;case 4:return e.fn.call(e.context,
b,d,f),!0;case 5:return e.fn.call(e.context,b,d,f,h),!0;case 6:return e.fn.call(e.context,b,d,f,h,g),!0}var l=1;for(n=Array(k-1);l<k;l++)n[l-1]=arguments[l];e.fn.apply(e.context,n)}else{var m=e.length;for(l=0;l<m;l++)switch(e[l].once&&this.removeListener(a,e[l].fn,void 0,!0),k){case 1:e[l].fn.call(e[l].context);break;case 2:e[l].fn.call(e[l].context,b);break;case 3:e[l].fn.call(e[l].context,b,d);break;case 4:e[l].fn.call(e[l].context,b,d,f);break;default:if(!n){var p=1;for(n=Array(k-1);p<k;p++)n[p-
1]=arguments[p]}e[l].fn.apply(e[l].context,n)}}return!0};d.prototype.on=function(a,b,d){b=new m(b,d||this);a=c?c+a:a;this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],b]:this._events[a].push(b):(this._events[a]=b,this._eventsCount++);return this};d.prototype.once=function(a,b,d){b=new m(b,d||this,!0);a=c?c+a:a;this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],b]:this._events[a].push(b):(this._events[a]=b,this._eventsCount++);return this};d.prototype.removeListener=
function(a,b,d,f){a=c?c+a:a;if(!this._events[a])return this;if(!b)return 0===--this._eventsCount?this._events=new h:delete this._events[a],this;var e=this._events[a];if(e.fn)e.fn!==b||f&&!e.once||d&&e.context!==d||(0===--this._eventsCount?this._events=new h:delete this._events[a]);else{for(var g=0,k=[],l=e.length;g<l;g++)(e[g].fn!==b||f&&!e[g].once||d&&e[g].context!==d)&&k.push(e[g]);k.length?this._events[a]=1===k.length?k[0]:k:0===--this._eventsCount?this._events=new h:delete this._events[a]}return this};
d.prototype.removeAllListeners=function(a){a?(a=c?c+a:a,this._events[a]&&(0===--this._eventsCount?this._events=new h:delete this._events[a])):(this._events=new h,this._eventsCount=0);return this};d.prototype.off=d.prototype.removeListener;d.prototype.addListener=d.prototype.on;d.prototype.setMaxListeners=function(){return this};d.prefixed=c;d.EventEmitter=d;"undefined"!==typeof k&&(k.exports=d)},{}],199:[function(b,k,g){k.exports=function(b,g,d){var f=b.length;if(!(g>=f||0===d)){d=g+d>f?f-g:d;for(f-=
d;g<f;++g)b[g]=b[g+d];b.length=f}}},{}],200:[function(b,k,g){function h(a){return a&&a.__esModule?a:{default:a}}g.__esModule=!0;$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d=function(){function a(a,c){for(var b=
0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,d){b&&a(c.prototype,b);d&&a(c,d);return c}}();k=b("mini-signals");var f=h(k);k=b("parse-uri");var c=h(k),a=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);c.default=a;return c}(b("./async"));b=b("./Resource");var e=h(b),l=/(#[\w-]+)?$/;b=function(){function b(){var c=
this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.baseUrl=d;this.progress=0;this.loading=!1;this.defaultQueryString="";this._beforeMiddleware=[];this._afterMiddleware=[];this._resourcesParsing=[];this._boundLoadResource=function(a,b){return c._loadResource(a,b)};this._queue=a.queue(this._boundLoadResource,e);this._queue.pause();this.resources=
{};this.onProgress=new f.default;this.onError=new f.default;this.onLoad=new f.default;this.onStart=new f.default;this.onComplete=new f.default}b.prototype.add=function(a,b,c,d){if(Array.isArray(a)){for(b=0;b<a.length;++b)this.add(a[b]);return this}"object"===("undefined"===typeof a?"undefined":m(a))&&(d=b||a.callback||a.onComplete,c=a,b=a.url,a=a.name||a.key||a.url);"string"!==typeof b&&(d=c,c=b,b=a);if("string"!==typeof b)throw Error("No url passed to add resource to loader.");"function"===typeof c&&
(d=c,c=null);if(this.loading&&(!c||!c.parentResource))throw Error("Cannot add resources while the loader is running.");if(this.resources[a])throw Error('Resource named "'+a+'" already exists.');b=this._prepareUrl(b);this.resources[a]=new e.default(a,b,c);if("function"===typeof d)this.resources[a].onAfterMiddleware.once(d);if(this.loading){c=c.parentResource;b=[];for(d=0;d<c.children.length;++d)c.children[d].isComplete||b.push(c.children[d]);d=c.progressChunk*(b.length+1)/(b.length+2);c.children.push(this.resources[a]);
c.progressChunk=d;for(c=0;c<b.length;++c)b[c].progressChunk=d;this.resources[a].progressChunk=d}this._queue.push(this.resources[a]);return this};b.prototype.pre=function(a){this._beforeMiddleware.push(a);return this};b.prototype.use=function(a){this._afterMiddleware.push(a);return this};b.prototype.reset=function(){this.progress=0;this.loading=!1;this._queue.kill();this._queue.pause();for(var a in this.resources){var b=this.resources[a];b._onLoadBinding&&b._onLoadBinding.detach();b.isLoading&&b.abort()}this.resources=
{};return this};b.prototype.load=function(a){if("function"===typeof a)this.onComplete.once(a);if(this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{a=100/this._queue._tasks.length;for(var b=0;b<this._queue._tasks.length;++b)this._queue._tasks[b].data.progressChunk=a;this._onStart();this._queue.resume()}return this};b.prototype._prepareUrl=function(a){var b=(0,c.default)(a,{strictMode:!0});a=b.protocol||!b.path||0===a.indexOf("//")?a:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==
this.baseUrl.length-1&&"/"!==a.charAt(0)?this.baseUrl+"/"+a:this.baseUrl+a;this.defaultQueryString&&(b=l.exec(a)[0],a=a.substr(0,a.length-b.length),a=-1!==a.indexOf("?")?a+("&"+this.defaultQueryString):a+("?"+this.defaultQueryString),a+=b);return a};b.prototype._loadResource=function(b,c){var d=this;b._dequeue=c;a.eachSeries(this._beforeMiddleware,function(a,c){a.call(d,b,function(){c(b.isComplete?{}:null)})},function(){b.isComplete?d._onLoad(b):(b._onLoadBinding=b.onComplete.once(d._onLoad,d),b.load())},
!0)};b.prototype._onStart=function(){this.progress=0;this.loading=!0;this.onStart.dispatch(this)};b.prototype._onComplete=function(){this.progress=100;this.loading=!1;this.onComplete.dispatch(this,this.resources)};b.prototype._onLoad=function(b){var c=this;b._onLoadBinding=null;this._resourcesParsing.push(b);b._dequeue();a.eachSeries(this._afterMiddleware,function(a,d){a.call(c,b,d)},function(){b.onAfterMiddleware.dispatch(b);c.progress+=b.progressChunk;c.onProgress.dispatch(c,b);b.error?c.onError.dispatch(b.error,
c,b):c.onLoad.dispatch(c,b);c._resourcesParsing.splice(c._resourcesParsing.indexOf(b),1);c._queue.idle()&&0===c._resourcesParsing.length&&c._onComplete()},!0)};d(b,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(a){this._queue.concurrency=a}}]);return b}();g.default=b},{"./Resource":201,"./async":202,"mini-signals":12,"parse-uri":14}],201:[function(b,k,g){function h(){}function m(a,b,c){b&&0===b.indexOf(".")&&(b=b.substring(1));b&&(a[b]=c)}function d(a){return a.toString().replace("object ",
"")}g.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),c=(k=b("parse-uri"))&&k.__esModule?k:{default:k},a=(b=b("mini-signals"))&&b.__esModule?b:{default:b},e=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null;b=function(){function b(c,d,e){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
if("string"!==typeof c||"string"!==typeof d)throw Error("Both name and url are required for constructing a resource.");e=e||{};this._flags=0;this._setFlag(b.STATUS_FLAGS.DATA_URL,0===d.indexOf("data:"));this.name=c;this.url=d;this.extension=this._getExtension();this.data=null;this.crossOrigin=!0===e.crossOrigin?"anonymous":e.crossOrigin;this.loadType=e.loadType||this._determineLoadType();this.xhrType=e.xhrType;this.metadata=e.metadata||{};this.xhr=this.error=null;this.children=[];this.type=b.TYPE.UNKNOWN;
this.progressChunk=0;this._dequeue=h;this._onLoadBinding=null;this._boundComplete=this.complete.bind(this);this._boundOnError=this._onError.bind(this);this._boundOnProgress=this._onProgress.bind(this);this._boundXhrOnError=this._xhrOnError.bind(this);this._boundXhrOnAbort=this._xhrOnAbort.bind(this);this._boundXhrOnLoad=this._xhrOnLoad.bind(this);this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this);this.onStart=new a.default;this.onProgress=new a.default;this.onComplete=new a.default;this.onAfterMiddleware=
new a.default}b.setExtensionLoadType=function(a,c){m(b._loadTypeMap,a,c)};b.setExtensionXhrType=function(a,c){m(b._xhrTypeMap,a,c)};b.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1));this.xhr&&(this.xhr.removeEventListener?
(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null));if(this.isComplete)throw Error("Complete called again for an already completed resource.");this._setFlag(b.STATUS_FLAGS.COMPLETE,!0);this._setFlag(b.STATUS_FLAGS.LOADING,
!1);this.onComplete.dispatch(this)};b.prototype.abort=function(a){if(!this.error){this.error=Error(a);if(this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=b.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}};b.prototype.load=function(a){var c=this;if(!this.isLoading)if(this.isComplete)a&&setTimeout(function(){return a(c)},1);else{if(a)this.onComplete.once(a);this._setFlag(b.STATUS_FLAGS.LOADING,
!0);this.onStart.dispatch(this);if(!1===this.crossOrigin||"string"!==typeof this.crossOrigin)this.crossOrigin=this._determineCrossOrigin(this.url);switch(this.loadType){case b.LOAD_TYPE.IMAGE:this.type=b.TYPE.IMAGE;this._loadElement("image");break;case b.LOAD_TYPE.AUDIO:this.type=b.TYPE.AUDIO;this._loadSourceElement("audio");break;case b.LOAD_TYPE.VIDEO:this.type=b.TYPE.VIDEO;this._loadSourceElement("video");break;default:e&&this.crossOrigin?this._loadXdr():this._loadXhr()}}};b.prototype._hasFlag=
function(a){return!!(this._flags&a)};b.prototype._setFlag=function(a,b){this._flags=b?this._flags|a:this._flags&~a};b.prototype._loadElement=function(a){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===a&&"undefined"!==typeof window.Image?new Image:document.createElement(a);this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin);this.metadata.skipSource||(this.data.src=this.url);this.data.addEventListener("error",this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,
!1);this.data.addEventListener("progress",this._boundOnProgress,!1)};b.prototype._loadSourceElement=function(a){this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===a&&"undefined"!==typeof window.Audio?new Audio:document.createElement(a);if(null===this.data)this.abort("Unsupported element: "+a);else{if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var b=this.metadata.mimeType,c=0;c<
this.url.length;++c)this.data.appendChild(this._createSource(a,this.url[c],Array.isArray(b)?b[c]:b));else b=this.metadata.mimeType,this.data.appendChild(this._createSource(a,this.url,Array.isArray(b)?b[0]:b));this.data.addEventListener("error",this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,!1);this.data.addEventListener("progress",this._boundOnProgress,!1);this.data.addEventListener("canplaythrough",this._boundComplete,!1);this.data.load()}};b.prototype._loadXhr=function(){"string"!==
typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XMLHttpRequest;a.open("GET",this.url,!0);a.responseType=this.xhrType===b.XHR_RESPONSE_TYPE.JSON||this.xhrType===b.XHR_RESPONSE_TYPE.DOCUMENT?b.XHR_RESPONSE_TYPE.TEXT:this.xhrType;a.addEventListener("error",this._boundXhrOnError,!1);a.addEventListener("abort",this._boundXhrOnAbort,!1);a.addEventListener("progress",this._boundOnProgress,!1);a.addEventListener("load",this._boundXhrOnLoad,!1);a.send()};b.prototype._loadXdr=
function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XDomainRequest;a.timeout=5E3;a.onerror=this._boundXhrOnError;a.ontimeout=this._boundXdrOnTimeout;a.onprogress=this._boundOnProgress;a.onload=this._boundXhrOnLoad;a.open("GET",this.url,!0);setTimeout(function(){return a.send()},1)};b.prototype._createSource=function(a,b,c){c||(c=a+"/"+this._getExtension(b));a=document.createElement("source");a.src=b;a.type=c;return a};b.prototype._onError=function(a){this.abort("Failed to load element using: "+
a.target.nodeName)};b.prototype._onProgress=function(a){a&&a.lengthComputable&&this.onProgress.dispatch(this,a.loaded/a.total)};b.prototype._xhrOnError=function(){var a=this.xhr;this.abort(d(a)+" Request failed. Status: "+a.status+', text: "'+a.statusText+'"')};b.prototype._xhrOnAbort=function(){this.abort(d(this.xhr)+" Request was aborted by the user.")};b.prototype._xdrOnTimeout=function(){this.abort(d(this.xhr)+" Request timed out.")};b.prototype._xhrOnLoad=function(){var a=this.xhr,c="",d="undefined"===
typeof a.status?200:a.status;if(""===a.responseType||"text"===a.responseType||"undefined"===typeof a.responseType)c=a.responseText;0===d&&(0<c.length||a.responseType===b.XHR_RESPONSE_TYPE.BUFFER)?d=200:1223===d&&(d=204);if(2===(d/100|0)){if(this.xhrType===b.XHR_RESPONSE_TYPE.TEXT)this.data=c,this.type=b.TYPE.TEXT;else if(this.xhrType===b.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(c),this.type=b.TYPE.JSON}catch(v){this.abort("Error trying to parse loaded json: "+v);return}else if(this.xhrType===
b.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser)this.data=(new DOMParser).parseFromString(c,"text/xml");else{var e=document.createElement("div");e.innerHTML=c;this.data=e}this.type=b.TYPE.XML}catch(v){this.abort("Error trying to parse loaded xml: "+v);return}else this.data=a.response||c;this.complete()}else this.abort("["+a.status+"] "+a.statusText+": "+a.responseURL)};b.prototype._determineCrossOrigin=function(a,b){if(0===a.indexOf("data:"))return"";b=b||window.location;l||(l=document.createElement("a"));
l.href=a;a=(0,c.default)(l.href,{strictMode:!0});var d=!a.port&&""===b.port||a.port===b.port,e=a.protocol?a.protocol+":":"";return a.host===b.hostname&&d&&e===b.protocol?"":"anonymous"};b.prototype._determineXhrType=function(){return b._xhrTypeMap[this.extension]||b.XHR_RESPONSE_TYPE.TEXT};b.prototype._determineLoadType=function(){return b._loadTypeMap[this.extension]||b.LOAD_TYPE.XHR};b.prototype._getExtension=function(){var a=this.url;if(this.isDataUrl){var b=a.indexOf("/");a=a.substring(b+1,a.indexOf(";",
b))}else{b=a.indexOf("?");var c=a.indexOf("#");a=a.substring(0,Math.min(-1<b?b:a.length,-1<c?c:a.length));a=a.substring(a.lastIndexOf(".")+1)}return a.toLowerCase()};b.prototype._getMimeFromXhrType=function(a){switch(a){case b.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case b.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case b.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case b.XHR_RESPONSE_TYPE.JSON:return"application/json";default:return"text/plain"}};f(b,[{key:"isDataUrl",
get:function(){return this._hasFlag(b.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(b.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(b.STATUS_FLAGS.LOADING)}}]);return b}();g.default=b;b.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4};b.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};b.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};b.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",
JSON:"json",TEXT:"text"};b._loadTypeMap={gif:b.LOAD_TYPE.IMAGE,png:b.LOAD_TYPE.IMAGE,bmp:b.LOAD_TYPE.IMAGE,jpg:b.LOAD_TYPE.IMAGE,jpeg:b.LOAD_TYPE.IMAGE,tif:b.LOAD_TYPE.IMAGE,tiff:b.LOAD_TYPE.IMAGE,webp:b.LOAD_TYPE.IMAGE,tga:b.LOAD_TYPE.IMAGE,svg:b.LOAD_TYPE.IMAGE,"svg+xml":b.LOAD_TYPE.IMAGE,mp3:b.LOAD_TYPE.AUDIO,ogg:b.LOAD_TYPE.AUDIO,wav:b.LOAD_TYPE.AUDIO,mp4:b.LOAD_TYPE.VIDEO,webm:b.LOAD_TYPE.VIDEO};b._xhrTypeMap={xhtml:b.XHR_RESPONSE_TYPE.DOCUMENT,html:b.XHR_RESPONSE_TYPE.DOCUMENT,htm:b.XHR_RESPONSE_TYPE.DOCUMENT,
xml:b.XHR_RESPONSE_TYPE.DOCUMENT,tmx:b.XHR_RESPONSE_TYPE.DOCUMENT,svg:b.XHR_RESPONSE_TYPE.DOCUMENT,tsx:b.XHR_RESPONSE_TYPE.DOCUMENT,gif:b.XHR_RESPONSE_TYPE.BLOB,png:b.XHR_RESPONSE_TYPE.BLOB,bmp:b.XHR_RESPONSE_TYPE.BLOB,jpg:b.XHR_RESPONSE_TYPE.BLOB,jpeg:b.XHR_RESPONSE_TYPE.BLOB,tif:b.XHR_RESPONSE_TYPE.BLOB,tiff:b.XHR_RESPONSE_TYPE.BLOB,webp:b.XHR_RESPONSE_TYPE.BLOB,tga:b.XHR_RESPONSE_TYPE.BLOB,json:b.XHR_RESPONSE_TYPE.JSON,text:b.XHR_RESPONSE_TYPE.TEXT,txt:b.XHR_RESPONSE_TYPE.TEXT,ttf:b.XHR_RESPONSE_TYPE.BUFFER,
otf:b.XHR_RESPONSE_TYPE.BUFFER};b.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":12,"parse-uri":14}],202:[function(b,k,g){function h(){}function m(b){return function(){if(null===b)throw Error("Callback was already called.");var d=b;b=null;d.apply(this,arguments)}}g.__esModule=!0;g.eachSeries=function(b,f,c,a){var d=0,h=b.length;(function p(e){e||d===h?c&&c(e):a?setTimeout(function(){f(b[d++],p)},1):f(b[d++],p)})()};g.queue=function(b,
f){function c(a,b,c){if(null!=c&&"function"!==typeof c)throw Error("task callback must be a function");g.started=!0;null==a&&g.idle()?setTimeout(function(){return g.drain()},1):(a={data:a,callback:"function"===typeof c?c:h},b?g._tasks.unshift(a):g._tasks.push(a),setTimeout(function(){return g.process()},1))}function a(a){return function(){--d;a.callback.apply(a,arguments);null!=arguments[0]&&g.error(arguments[0],a.data);d<=g.concurrency-g.buffer&&g.unsaturated();g.idle()&&g.drain();g.process()}}if(null==
f)f=1;else if(0===f)throw Error("Concurrency must not be zero");var d=0,g={_tasks:[],concurrency:f,saturated:h,unsaturated:h,buffer:f/4,empty:h,drain:h,error:h,started:!1,paused:!1,push:function(a,b){c(a,!1,b)},kill:function(){d=0;g.drain=h;g.started=!1;g._tasks=[]},unshift:function(a,b){c(a,!0,b)},process:function(){for(;!g.paused&&d<g.concurrency&&g._tasks.length;){var c=g._tasks.shift();0===g._tasks.length&&g.empty();d+=1;d===g.concurrency&&g.saturated();b(c.data,m(a(c)))}},length:function(){return g._tasks.length},
running:function(){return d},idle:function(){return 0===g._tasks.length+d},pause:function(){!0!==g.paused&&(g.paused=!0)},resume:function(){if(!1!==g.paused){g.paused=!1;for(var a=1;a<=g.concurrency;a++)g.process()}}};return g}},{}],203:[function(b,k,g){g.__esModule=!0;g.encodeBinary=function(b){for(var d="",f=0;f<b.length;){for(var c=[0,0,0],a=[0,0,0,0],e=0;e<c.length;++e)c[e]=f<b.length?b.charCodeAt(f++)&255:0;a[0]=c[0]>>2;a[1]=(c[0]&3)<<4|c[1]>>4;a[2]=(c[1]&15)<<2|c[2]>>6;a[3]=c[2]&63;switch(f-
(b.length-1)){case 2:a[3]=64;a[2]=64;break;case 1:a[3]=64}for(c=0;c<a.length;++c)d+=h.charAt(a[c])}return d};var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],204:[function(b,k,g){g=b("./Loader").default;var h=b("./Resource").default,m=b("./async");b=b("./b64");g.Resource=h;g.async=m;g.base64=b;k.exports=g;k.exports.default=g},{"./Loader":200,"./Resource":201,"./async":202,"./b64":203}],205:[function(b,k,g){g.__esModule=!0;$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();
var h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};g.blobMiddlewareFactory=function(){return function(b,a){if(b.data&&b.xhr&&b.xhrType===m.default.XHR_RESPONSE_TYPE.BLOB)if(!window.Blob||"string"===typeof b.data){var c=b.xhr.getResponseHeader("content-type");if(c&&0===c.indexOf("image")){b.data=
new Image;b.data.src="data:"+c+";base64,"+d.default.encodeBinary(b.xhr.responseText);b.type=m.default.TYPE.IMAGE;b.data.onload=function(){b.data.onload=null;a()};return}}else if(0===b.data.type.indexOf("image")&&(c=function(){var c=f.createObjectURL(b.data);b.blob=b.data;b.data=new Image;b.data.src=c;b.type=m.default.TYPE.IMAGE;b.data.onload=function(){f.revokeObjectURL(c);b.data.onload=null;a()};return{v:void 0}}(),"object"===("undefined"===typeof c?"undefined":h(c))))return c.v;a()}};var m=(k=b("../../Resource"))&&
k.__esModule?k:{default:k},d=(b=b("../../b64"))&&b.__esModule?b:{default:b},f=window.URL||window.webkitURL},{"../../Resource":201,"../../b64":203}],206:[function(b,k,g){(function(h){function g(a){return void 0!==a&&null!==a}function d(a,b,c,d){a=c-a;b=d-b;return a*a+b*b}function f(a,b,c,d){return b>c?c-d<a&&a<b+d:b-d<a&&a<c+d}function c(a){a.position={};a.position.x=0;a.position.y=0;a.position.set=function(b,c){a.position.x=b;a.position.y=c}}function a(){for(var a in H.system.orbits){var b=H.system.orbits[a],
c;for(c in b.planets){var d=b.planets[c];d.outline.visible=!1;d.ghost.visible=!1;d.ghost.outline.visible=!1;d.drawLine.visible=!1}}I=null;K=0;J.resumePlugin("drag");J.resumePlugin("wheel")}function e(a,b){b||!g(b)?document.getElementById(a).style.visibility="visible":l(a)}function l(a){document.getElementById(a).style.visibility="hidden"}function q(a){var b=document.getElementById(a);x(a);b.style.color=B.GREY_TEXT;b.style.cursor="default";b.onmouseover=function(){this.style.backgroundColor="transparent"};
b.setAttribute("enable_click",!1)}function n(a,b){b||!g(b)?(a=document.getElementById(a),a.style.color="#FFF",a.style.cursor="pointer",a.onmouseover=function(){this.style.backgroundColor="rgba(200, 200, 200, 0.5)"},a.onmouseout=function(){this.style.backgroundColor="transparent"},a.setAttribute("enable_click",!0)):q(a)}function p(a){var b=document.getElementById(a);"true"===document.getElementById(a).getAttribute("enable_click")&&(b.style.boxShadow="0 0 0 3px white",document.getElementById(a).style.zIndex=
2)}function x(a){document.getElementById(a).style.boxShadow="none";document.getElementById(a).style.zIndex=1}function t(a,b){document.getElementById(a).innerHTML=b}function v(a){da=!1;J.removePlugin("snap");J.removePlugin("snap-zoom");if(!g(a)||a)U=null,J.removePlugin("follow")}function w(){da||(v(),da=!0,J.snap(0,0,{time:300,removeOnComplete:!0,center:!0,ease:"easeInOutSine"}),J.snapZoom({height:800,time:300,removeOnComplete:!0,center:!0,ease:"easeOutQuart"}))}function A(){window.scrollTo(0,0);if(J.center)var a=
J.center;var b=J.worldScreenHeight,c=window.innerWidth,d=window.innerHeight;Y.renderer.resize(c,d);J.resize(c,d,c,d);J.fitHeight(b,!1);a&&J.moveCenter(a);v(!1);T.resize()}b("pixi.js");Viewport=b("pixi-viewport");window.PIXI=PIXI;window.PIXI["default"]=PIXI;b("pixi-particles");window.IS_SERVER=!1;var u=/^([A-Za-z0-9]{3,20})$/,z=/^([A-Za-z0-9]{6})$/,y={CREATE_SHIPS:1,PING_PROBE:2,PING_SET:3,UPDATE_PIXELS:4,FORM:5,CREATE_SYSTEM:6,CREATE_TEAMS:7,SET_PLANET_TEAM:8,START_BUTTON:9,JOIN_GAME:10,JOIN_TEAM:11,
QUIT:12,UPDATE_TEAMS:13,UPDATE_MESSAGE:14,CREATE_SPAWN:15,PAUSE:16,PLAY:17,SESSION:18,RESUME:19,UPDATE_SHIPS:20,SET_TIME:21},B={BACKGROUND:2763825,DASHED_LINE:4737873,DARK1:1974564,DARK2:2763825,DARK3:3092790,DARK4:3290170,DARK5:3553598,DARK6:4737873,DARK7:7105904,DARK8:8290436,DARK9:11119276,WHITE:16777215,GREY_TEXT:"#888",RED:16746632,ORANGE:16759626,YELLOW:16777062,GREEN:11206570,BLUE:7838207,PURPLE:12290269},C=Math.log(11);IS_SERVER&&(h.exists=g,h.LOCAL_DEBUG=!0,h.PORT=7438,h.USERNAME_REGEX=u,
h.ID_REGEX=z,h.Pack=y,h.COUNTDOWN_BUFFER=1E3,h.COUNTDOWN_TIME=4E3,h.Colour=B,h.MAX_SPAWNS=10,h.MAX_PIXEL_RATE=10,h.SPAWN_LN=C,h.PLANET_SELECT_RADIUS=40,h.SUN_COLLISION_RADIUS=30,h.TICKS_PER_COLLISION_UPDATE=10,h.MIN_PLAYERS=2,h.MAX_PLAYERS=48,h.ID_LENGTH=6,h.ID_CHARACTERS="ABCDEFGHJKMNOPQRSTUVWXYZ23456789",h.TICKS_PER_SECOND=30,h.SKEW_THRESHOLD=5,h.PING_INTERVAL=500,h.SOCKET_TIMEOUT=1E4,h.STARTING_PIXELS=100);var r={Button:{JOIN:"b_join",CREATE:"b_create",RANDOM:"b_random",WITH_FRIENDS:"b_friends",
START:"b_start",QUIT:"b_quit",RESUME:"b_resume",TEAM_RED:"b_team_red",TEAM_ORANGE:"b_team_orange",TEAM_YELLOW:"b_team_yellow",TEAM_GREEN:"b_team_green",TEAM_BLUE:"b_team_blue",TEAM_PURPLE:"b_team_purple",BUY_SPAWN:"b_buy_spawn",BUY_SHIPS_1000:"b_buy_1000ships",BUY_SHIPS_100:"b_buy_100ships",BUY_SHIPS_10:"b_buy_10ships",SEND_SHIPS_1000:"b_send_1000ships",SEND_SHIPS_100:"b_send_100ships"},Text:{ID_DISPLAY1:"t_id_display1",ID_DISPLAY2:"t_id_display2",PLAYER_COUNT:"t_players_display",PING:"t_ping",PIXELS:"t_pixels",
SHIPS:"t_ships",PLANET_TEXT:"t_plantext",PLANET_SHIPS:"t_planships",USERNAME:"t_user",ID:"t_id",CONNECTION_MESSAGE:"t_connecting",MESSAGE:"t_message",COUNTDOWN:"t_countdown",PAUSE:"t_pause",PAUSE_MESSAGE:"t_pausemess",BUY:"t_buy",SEND:"t_send"},List:{TEAM_RED:"l_team_red",TEAM_ORANGE:"l_team_orange",TEAM_YELLOW:"l_team_yellow",TEAM_GREEN:"l_team_green",TEAM_BLUE:"l_team_blue",TEAM_PURPLE:"l_team_purple"},Input:{USERNAME:"i_user",ID:"i_id"},Image:{USERNAME_CHECK:"p_userG",USERNAME_CROSS:"p_userB",
ID_CHECK:"p_idG",ID_CROSS:"p_idB"}},D={alpha:{start:1,end:0},scale:{start:2,end:1,minimumScaleMultiplier:1},color:{start:"ffffff",end:"f0ffff"},speed:{start:195,end:2,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!0,rotationSpeed:{min:0,max:0},lifetime:{min:1,max:1},blendMode:"normal",frequency:.5,emitterLifetime:-1,maxParticles:1,pos:{x:0,y:0},addAtBack:!1,spawnType:"point"},E={alpha:{start:.2,end:0},scale:{start:1,end:1,minimumScaleMultiplier:1},
color:{start:"ffffff",end:"f0ffff"},speed:{start:20,end:0,minimumSpeedMultiplier:.2},acceleration:{x:1,y:1},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!0,rotationSpeed:{min:0,max:0},lifetime:{min:1,max:1},blendMode:"normal",frequency:.03333,emitterLifetime:-1,maxParticles:32,pos:{x:0,y:0},addAtBack:!1,spawnType:"point"},O;IS_SERVER||(O=function(a){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))}(navigator.userAgent||navigator.vendor||window.opera));IS_SERVER&&(h.distSqr=d,h.exists=g,h.isBetween=f);IS_SERVER&&(h.addPosition=c);var F=10,I,K=0,V,N=function(a,b,d,e,f){var g=IS_SERVER?PIXI.Sprite.call(this)||this:PIXI.Sprite.call(this,ba.planet1.texture)||this;g.radius=a;if(IS_SERVER)g.infantry={};else{var h=a/g.width;g.pixelRadius=g.width/2;g.pivot.set(g.pixelRadius,g.pixelRadius);g.infantry=new PIXI.particles.Emitter(g,ba.infantry.texture,D);g.infantry.updateSpawnPos(g.pixelRadius,g.pixelRadius);
g.infantry.emit=!1;var k=new PIXI.Graphics;k.lineStyle(1.4*46,B.DARK8);k.arc(g.pixelRadius,g.pixelRadius,3*g.pixelRadius,0,7);k.visible=!1;g.outline=g.addChild(k);k=new PIXI.Graphics;k.lineStyle(1.4*h*46,B.DARK8);k.arc(h*g.pixelRadius,h*g.pixelRadius,h*g.pixelRadius*3,0,7);k.visible=!1;g.scale.set(h)}g.pixelRate=0;g.pixelCounter=0;g.startAngle=d;g.opm=e;IS_SERVER||(a=new PIXI.Graphics,a.lineStyle(2.8,B.DARK8),a.arc(g.pixelRadius*h,g.pixelRadius*h,g.pixelRadius*h,0,7),a.visible=!1,a.pivot.set(g.pixelRadius*
h,g.pixelRadius*h),a.outline=a.addChild(k),g.ghost=f.addChild(a),h=new L(2),h.setPoints(0,0),g.drawLine=f.addChild(h));g.speed=1/60*e*2*Math.PI;g.rotationConstant=b;g.age=d/g.speed;IS_SERVER?(c(g),g.spawns=0):g.spawns=[];g.team=null;g.ships=[];g.shipCount=0;return g};$jscomp.inherits(N,PIXI.Sprite);N.prototype.update=function(a){this.age+=a;this.updatePosition();IS_SERVER||(this.rotation=this.age*this.rotationConstant,this.infantry.update(a));if(IS_SERVER||this.isMyPlanet())this.pixelCounter+=this.pixelRate*
a,a=Math.floor(this.pixelCounter),0<a&&(this.pixelCounter-=a,this.team.addPixels(a))};N.prototype.timeToFastestIntersect=function(a){var b=a.orbit.radius,c=this.position.x,d=this.position.y;b=b*b+c*c+d*d;for(var e=0,f=0;1E3>f;){f++;var g=a.calcPosition(e);g=Math.sqrt((b-2*(c*g.x+d*g.y))/225)-e;if(.5>g)break;else e=2>g?e+.1:4>g?e+.5:e+1}return e};N.prototype.updatePosition=function(){var a=this.calcPosition();this.position.set(a.x,a.y)};N.prototype.calcPosition=function(a){a||(a=0);if(!this.orbit)return{x:0,
y:0};var b=this.orbit.radius;a=this.age+a;return{x:Math.cos(a*this.speed)*b,y:Math.sin(a*this.speed)*b}};N.prototype.isMyPlanet=function(){return g(this.team)?this.team.id===H.myTeam.id:!1};N.prototype.isTeamsPlanet=function(a){return this.team.id===a.id};N.prototype.setTeam=function(a){this.team=a;if(!IS_SERVER){this.tint=a=g(a)?a.colour:16777215;this.outline.tint=a;this.ghost.tint=a;this.ghost.outline.tint=a;this.drawLine.tint=a;for(var b in this.spawns)this.spawns[b].tint=a}};N.prototype.createShipsClick=
function(a,b){X.send({type:y.CREATE_SHIPS,pl:this.id,n:a,c:b})};N.prototype.createShips=function(a,b,c){if(!(0>=a))if(b=g(b)?b:!1,IS_SERVER){var d=!1;b?d=!0:this.team.pixels>=c&&0<a&&(10>=a&&10<=c?d=!0:100>=a&&90<=c?d=!0:1E3>=a&&800<=c&&(d=!0));d&&(this.shipCount+=a,b||this.team.addPixels(-c),this.system.game.sendPlayers({type:y.CREATE_SHIPS,pl:this.id,n:a,c:b?0:c}))}else{for(d=0;d<a;d++)if(100>this.shipCount+d){var e=new PIXI.Sprite(ba.ship.texture),f=2*Math.PI*Math.random(),h=this.pixelRadius+60,
k=h*Math.cos(f)+this.pixelRadius;h=h*Math.sin(f)+this.pixelRadius;e.tint=this.tint;e.pivot.set(.5*e.width,.5*e.height);e.position.set(k,h);e.rotation=f+Math.PI/2;this.addChild(e);this.ships.push(e)}this.shipCount+=a;this.team.shipCount+=a;b||this.team.addPixels(-c)}};N.prototype.removeShips=function(a){if(!IS_SERVER){var b=Math.min(a,Math.max(0,100-this.shipCount+a));if(0<b){for(var c=0;c<b&&c<this.ships.length;c++)this.removeChild(this.ships[c]);this.ships.splice(0,b)}}this.shipCount-=a;this.team.shipCount-=
a};N.prototype.sendShipsToClick=function(a,b){X.send({type:y.SEND_SHIPS,pl:this.id,to:a.id,amount:b})};N.prototype.sendShipsTo=function(a,b){if(IS_SERVER&&g(a)){b=Math.min(Math.max(b,0),this.shipCount);this.removeShips(b);var c=this.timeToFastestIntersect(a),d=a.calcPosition(c),e=this.game.system,f=new G(e,this.position.x,this.position.y,d.x,d.y,15,b,this.tint,a,c);e.sendingShips.push(f);this.system.game.sendPlayers({type:y.SEND_SHIPS,pl:this.id,to:a.id,amount:b,x1:this.position.x,y1:this.position.y,
x2:d.x,y2:d.y,shipSpeed:15,duration:c})}};N.prototype.spawnCount=function(){return IS_SERVER?this.spawns:this.spawns.length};N.prototype.createSpawnClick=function(){X.send({type:y.CREATE_SPAWN,pl:this.id})};N.prototype.createSpawn=function(a,b){var c=!1;if(IS_SERVER)a?c=!0:200<=this.team.pixels&&10>this.spawnCount()&&(c=!0,this.team.addPixels(-200)),c&&(g(b)&&b||this.system.game.sendPlayers({type:y.CREATE_SPAWN,planet:this.id,force:a}),this.spawns++);else{this.team&&!a&&this.team.addPixels(-200);
a=new PIXI.Sprite(ba.spawn.texture);b=6*Math.PI*this.spawnCount()/10;var d=this.pixelRadius+-8;c=d*Math.cos(b)+this.pixelRadius;d=d*Math.sin(b)+this.pixelRadius;a.tint=this.tint;a.pivot.set(.5*a.width,a.height);a.scale.set(1.3);a.position.set(c,d);a.rotation=b+Math.PI/2;this.addChild(a);this.spawns.push(a);c=!0}c&&(this.pixelRate=10*Math.log(this.spawnCount()+1)/C,IS_SERVER||(this.infantry.maxParticles=this.pixelRate,0<this.pixelRate?(this.infantry.frequency=1/this.pixelRate,this.infantry.emit=!0):
this.infantry.emit=!1))};N.prototype.save=function(a){g(a)||(a=!0);var b={radius:this.radius,rotationConstant:this.rotationConstant,startAngle:this.startAngle,opm:this.opm};a&&(b.id=this.id,b.team=this.team?this.team.id:-1,b.shipCount=this.shipCount,b.spawnCount=this.spawnCount(),b.pixelCounter=this.pixelCounter,b.age=this.age);return b};N.load=function(a,b,c){c=new N(a.radius,a.rotationConstant,a.startAngle,a.opm,c);g(a.id)&&(c.id=a.id);g(a.team)&&c.setTeam(b.getTeam(a.team));g(a.shipCount)&&c.createShips(a.shipCount,
!0);if(g(a.spawnCount))for(b=0;b<a.spawnCount;b++)c.createSpawn(!0,!0);g(a.pixelCounter)&&(c.pixelCounter=a.pixelCounter);g(a.age)&&(c.age=a.age);c.updatePosition();return c};IS_SERVER&&(k.exports=N);var P=function(a,b,c){var d=PIXI.Graphics.call(this)||this;d.x=a;d.y=b;d.radius=c;d.planets=[];if(!IS_SERVER){var e=Math.max(Math.floor(Math.PI*c/25),2),f=25/c,g=2*Math.PI/e-f;if(0>=g)d.lineStyle(1.4,B.DASHED_LINE),d.arc(a,b,c,0,2*Math.PI);else for(var h=0;h<e;h++){var k=h*(f+g),l=k+f,m=l+g;d.lineStyle(1.4,
B.DASHED_LINE);d.arc(a,b,c,k,l);d.lineStyle(1.4,B.BACKGROUND,0);d.arc(a,b,c,l,m)}}return d};$jscomp.inherits(P,PIXI.Graphics);P.prototype.addPlanet=function(a){this.planets.push(a);a.game=this.game;a.system=this.system;a.orbit=this;if(IS_SERVER)return a.id=a.game.createID(),a;a.system.addChild(a)};P.prototype.update=function(a){var b=!0,c;for(c in this.planets)this.planets[c].update(a),b&&!IS_SERVER&&(this.rotation=-this.planets[c].age*this.planets[c].speed/8,b=!1)};P.prototype.getPlanet=function(a,
b){for(var c in this.planets){var e=this.planets[c].radius+40;if(d(a,b,this.planets[c].x,this.planets[c].y)<e*e)return this.planets[c]}return null};P.prototype.getPlanetByID=function(a){for(var b in this.planets)if(this.planets[b].id===a)return this.planets[b];return null};P.prototype.save=function(a){g(a)||(a=!0);var b={x:this.x,y:this.y,radius:this.radius,planets:[]};a&&(b.id=this.id);for(var c in this.planets)b.planets.push(this.planets[c].save(a));return b};P.load=function(a,b,c){var d=new P(a.x,
a.y,a.radius);g(a.id)&&(d.id=a.id);g(a.planets)||(a.planets=[]);c.addOrbit(d);if(g(a.teamOrbit)){var e=a.teamOrbit,f=[];for(k in b.teams)for(var h in e.teams)if(k==e.teams[h]){f.push(b.teams[k].id);break}var k=f.length;h=2*Math.PI/k;for(var l=0;l<k;l++)a.planets.push({radius:e.radius,rotationConstant:e.rotationConstant,startAngle:h*l,opm:e.opm,team:f[l],spawnCount:1})}for(var m in a.planets)d.addPlanet(N.load(a.planets[m],b,c));return d};IS_SERVER&&(k.exports=P);var W=function(a){var b=PIXI.Container.call(this)||
this;b.game=a;IS_SERVER||(b.sun=new PIXI.particles.Emitter(b,ba.sunTexture.texture,E),b.sun.emit=!0);b.orbits=[];b.sendingShips=[];return b};$jscomp.inherits(W,PIXI.Container);W.prototype.update=function(a,b){if(!b){for(var c in this.orbits)this.orbits[c].update(a);if(!IS_SERVER){if(g(I)){b=J.toWorld(Y.renderer.plugins.interaction.mouse.global);F++;10<F&&(F=0,V=null);for(var e in H.system.orbits){c=H.system.orbits[e];for(var h in c.planets){var k=c.planets[h];if(k!==I){if(0===F){k.outline.visible=
!1;k.ghost.outline.visible=!1;var l=I.position.x,m=I.position.y,n=I.timeToFastestIntersect(k),p=k.calcPosition(n),q=p.x-l,r=p.y-m,ca=!1;if(f(0,l,p.x,30)&&f(0,m,p.y,30)){var t=-r,u=q,v=l*r-q*m;900>v*v/(t*t+u*u)&&(ca=!0)}if(!ca)for(var w in H.system.orbits){t=H.system.orbits[w];for(var x in t.planets)if(u=t.planets[x],u!==I&&u!==k){var y=u.calcPosition(n);if(f(y.x,l,p.x,u.radius)&&f(y.y,m,p.y,u.radius)){v=-r;var z=q;y=v*y.x+z*y.y+(l*r-q*m);if(y*y/(v*v+z*z)<u.radius*u.radius){ca=!0;break}}}}k.drawLine.visible=
!ca;k.ghost.visible=!ca;k.ghost.visible===!ca&&k.ghost.position.set(p.x,p.y);if(!ca&&(l=d(b.x,b.y,p.x,p.y),m=d(b.x,b.y,k.position.x,k.position.y),n=d(0,0,0,k.radius+40),l<n||m<n))if(V){if(n=d(b.x,b.y,V.position.x,V.position.y),p=d(b.x,b.y,V.ghost.position.x,V.ghost.position.y),l<n&&l<p||m<n&&m<p)V=k}else V=k}k.drawLine.setPoints(k.ghost.position.x,k.ghost.position.y,I.position.x,I.position.y)}}}0===F&&V&&(V.outline.visible=!0,V.ghost.outline.visible=!0)}for(var A in this.sendingShips)this.sendingShips[A].update(a)}}IS_SERVER||
this.sun.update(a)};W.prototype.getPlanet=function(a,b){var c,d;for(d in this.orbits)if(g(c=this.orbits[d].getPlanet(a,b)))return c;return null};W.prototype.addOrbit=function(a){this.orbits.push(a);a.game=this.game;a.system=this;if(IS_SERVER)return a.id=a.game.createID(),a;a.system.addChild(a)};W.prototype.getOrbit=function(a){for(var b in this.orbits)if(this.orbits[b].id===a)return this.orbits[b];return null};W.prototype.getPlanetByID=function(a){var b,c;for(c in this.orbits)if(g(b=this.orbits[c].getPlanetByID(a)))return b;
return null};W.prototype.save=function(a){g(a)||(a=!0);var b={orbits:[]},c;for(c in this.orbits)b.orbits.push(this.orbits[c].save(a));return b};W.load=function(a,b){var c=new W(b),d;for(d in a.orbits)P.load(a.orbits[d],b,c);return c};IS_SERVER&&(k.exports=W);var G=function(a,b,d,e,f,g,h,k,l,m){if(IS_SERVER){var n=PIXI.Sprite.call(this)||this;c(n)}else n=PIXI.Sprite.call(this,ba.ship.texture)||this,n.pivot.set(.5,.5),n.anchor.set(.5,.5),n.scale.set(.5),n.position.set(b,d),n.tint=k;n.system=a;n.amount=
h;n.planet=l;n.duration=m;n.cumulativeDuration=0;n.fromX=b;n.fromY=d;n.toX=e;n.toY=f;n.speed=g;a=e-b;d=f-d;f=Math.sqrt(a*a+d*d);n.vX=a*g/f;n.vY=d*g/f;n.rotation=(0<n.vX?1:-1)*(Math.PI/2+Math.asin(n.vY/g));return n};$jscomp.inherits(G,PIXI.Sprite);G.prototype.update=function(a){this.cumulativeDuration+=a;this.cumulativeDuration>=this.duration?this.arrive():(this.position.x+=this.vX*a,this.position.y+=this.vY*a)};G.prototype.arrive=function(){IS_SERVER||this.system.removeChild(this);var a=this.system.sendingShips;
0<=a&&(this.system.sendingShips.indexOf(this),this.system.sendingShips.splice(a,1))};IS_SERVER&&(k.exports=G);var M=function(a,b){this.players=[];this.planets=[];this.colour=a;this.id=b;this.shipCount=this.pixels=0};$jscomp.inherits(M,Object);M.prototype.addPlayer=function(a){a.team=this;this.players.push(a)};M.prototype.removePlayer=function(a){a.team=null;a=this.players.indexOf(a);-1!==a&&this.players.splice(a,1)};M.prototype.addPixels=function(a){this.pixels+=a};M.prototype.setPixels=function(a){this.pixels=
a;this.updateClientPixels()};M.prototype.updateClientPixels=function(){IS_SERVER&&this.sendTeam({type:y.UPDATE_PIXELS,pl:this.pixels})};M.prototype.updateShips=function(a){IS_SERVER?this.sendTeam({type:y.UPDATE_SHIPS,n:this.shipCount}):this.shipCount=a};M.prototype.sendTeam=function(a){a=JSON.stringify(a);for(var b in this.players)this.players[b].send(a)};IS_SERVER&&(k.exports=M);var S=function(a,b){this.gameID=a;this.maxPlayers=b;this.teams=[];this.system=null;this.paused=!0;this.time=0};$jscomp.inherits(S,
Object);S.prototype.play=function(){this.paused=!1};S.prototype.pause=function(){this.paused=!0};S.prototype.update=function(a){this.system&&(this.system.update(a,this.paused),this.paused||(this.time+=a))};S.prototype.addTeam=function(a){this.teams.push(a)};S.prototype.rebuildTeams=function(){var a=[],b;for(b in this.teams)0<this.teams[b].players.length&&a.push(this.teams[b]);this.teams=a};S.prototype.getTeam=function(a){for(var b in this.teams)if(this.teams[b].id===a)return this.teams[b];return null};
IS_SERVER&&(k.exports=S);var L=function(a,b){var c=PIXI.Graphics.call(this)||this;c.l_width=a||5;c.l_colour=b||"0xFFFFFF";return c};$jscomp.inherits(L,PIXI.Graphics);L.prototype.setPoints=function(a,b,c,d){this.clear();this.lineStyle(this.l_width,this.l_colour);this.moveTo(a,b);this.lineTo(c,d)};var Q=function(){function a(a){return"false"!==a.getAttribute("enable_click")}function b(a){a.style.background="rgba(200, 200, 200, 0.5)"}function c(a){a.style.background="rgba(0, 0, 0, 0)"}function d(b,c){a(b.target)&&
X.send({type:y.JOIN_TEAM,team:c})}function f(b,c,d){a(b.target)&&g(U)&&U.createShipsClick(c,d)}function h(b,c){a(b.target)&&U&&(c=Math.min(Math.max(U.shipCount,c),10*c),F=10,I=U,K=c,J.pausePlugin("drag"),J.pausePlugin("wheel"),w())}this.inTeamSelection=!1;this.lastShips=this.lastPixels=-1;this.lastFocus=!0;this.withFriends=this.randomGame=this.createGame=this.joinGame=this.formSent=!1;this.gameID=this.username="";this.players=4;var k=this,l;for(l in r.Button){var m=document.getElementById(r.Button[l]);
m.setAttribute("touch",!1);m.setAttribute("button_selected",!1);m.setAttribute("enable_click",!0);m.addEventListener("mouseover",function(a){"false"===a.target.getAttribute("touch")&&b(a.target)},!1);m.addEventListener("mouseleave",function(a){c(a.target)},!1);m.addEventListener("touchstart",function(c){a(c.target)&&b(c.target)},!1);m.addEventListener("touchend",function(a){c(a.target);a.target.setAttribute("touch",!0);setTimeout(function(){a.target.setAttribute("touch",!1)},10)},!1);m.addEventListener("mousedown",
function(d){a(d.target)&&(b(d.target),"false"!==d.target.getAttribute("touch")&&setTimeout(function(){c(d.target)},50))},!1)}document.getElementById(r.Button.JOIN).onmousedown=function(b){a(b.target)&&(k.joinGame=!0,k.reateGame=!1,k.updateGuiClick())};document.getElementById(r.Button.CREATE).onmousedown=function(b){a(b.target)&&(k.joinGame=!1,k.createGame=!0,k.updateGuiClick())};document.getElementById(r.Button.RANDOM).onmousedown=function(b){a(b.target)&&k.joinGame&&(k.randomGame=!0,k.withFriends=
!1,k.updateGuiClick())};document.getElementById(r.Button.WITH_FRIENDS).onmousedown=function(b){a(b.target)&&(k.joinGame||k.createGame)&&(k.randomGame=!1,k.withFriends=!0,k.updateGuiClick())};document.getElementById(r.Button.TEAM_RED).onmousedown=function(a){return d(a,0)};document.getElementById(r.Button.TEAM_ORANGE).onmousedown=function(a){return d(a,1)};document.getElementById(r.Button.TEAM_YELLOW).onmousedown=function(a){return d(a,2)};document.getElementById(r.Button.TEAM_GREEN).onmousedown=function(a){return d(a,
3)};document.getElementById(r.Button.TEAM_BLUE).onmousedown=function(a){return d(a,4)};document.getElementById(r.Button.TEAM_PURPLE).onmousedown=function(a){return d(a,5)};document.getElementById(r.Button.START).onmousedown=function(b){a(b.target)&&(k.inTeamSelection?X.send({type:y.START_BUTTON}):k.updateStartButton()&&k.sendForm())};document.getElementById(r.Button.QUIT).onmousedown=function(b){a(b.target)&&(k.gotoTitle(),X.send({type:y.QUIT}))};document.getElementById(r.Button.RESUME).onmousedown=
function(b){a(b.target)&&(q(r.Button.RESUME),X.send({type:y.RESUME}))};document.getElementById(r.Button.BUY_SPAWN).onmousedown=function(b){a(b.target)&&g(U)&&U.createSpawnClick()};document.getElementById(r.Button.BUY_SHIPS_1000).onmousedown=function(a){return f(a,1E3,800)};document.getElementById(r.Button.BUY_SHIPS_100).onmousedown=function(a){return f(a,100,90)};document.getElementById(r.Button.BUY_SHIPS_10).onmousedown=function(a){return f(a,10,10)};document.getElementById(r.Button.SEND_SHIPS_1000).onmousedown=
function(a){return h(a,100)};document.getElementById(r.Button.SEND_SHIPS_100).onmousedown=function(a){return h(a,10)};document.getElementById(r.Input.USERNAME).onkeyup=function(){k.updateStartButton()};document.getElementById(r.Input.ID).onkeyup=function(){k.updateStartButton()};document.onkeypress=function(a){if(13===a.keyCode)return k.updateStartButton()&&k.sendForm(),a.preventDefault(),!1};document.onkeydown=function(a){a=a.keyCode;if(H&&(27===a||32===a))H.onEscape()};this.hide();e("input");e("top_display")};
$jscomp.inherits(Q,Object);Q.prototype.gotoTitle=function(){this.inTeamSelection=!1;H&&(H.removeSystem(),H=null);this.formSent=!1;this.hide();e(r.Text.CONNECTION_MESSAGE,!X.connected);this.updateGuiClick()};Q.prototype.updateGuiClick=function(){var a=!0;e(r.Button.JOIN);e(r.Button.CREATE);n(r.Button.RANDOM);this.joinGame?(p(r.Button.JOIN),x(r.Button.CREATE)):this.createGame?(x(r.Button.JOIN),p(r.Button.CREATE),this.randomGame=!1,this.withFriends=!0,q(r.Button.RANDOM)):(x(r.Button.CREATE),x(r.Button.JOIN),
a=!1);a?(e(r.Button.RANDOM),e(r.Button.WITH_FRIENDS)):(l(r.Button.RANDOM),l(r.Button.WITH_FRIENDS));this.randomGame?(p(r.Button.RANDOM),x(r.Button.WITH_FRIENDS)):this.withFriends?(x(r.Button.RANDOM),p(r.Button.WITH_FRIENDS)):(x(r.Button.RANDOM),x(r.Button.WITH_FRIENDS),a=!1);a?(e(r.Text.USERNAME),e(r.Input.USERNAME),e(r.Text.ID,this.joinGame&&this.withFriends),e(r.Input.ID,this.joinGame&&this.withFriends),e(r.Button.START),this.updateStartButton()):(l(r.Text.USERNAME),l(r.Input.USERNAME),l(r.Text.ID),
l(r.Input.ID),l(r.Button.START))};Q.prototype.updateStartButton=function(){if(this.formSent)return q(r.Button.START),!1;if(this.randomGame||this.withFriends){l(r.Image.USERNAME_CHECK);l(r.Image.USERNAME_CROSS);l(r.Image.ID_CHECK);l(r.Image.ID_CROSS);var a=u.test(document.getElementById(r.Input.USERNAME).value);e(r.Image.USERNAME_CHECK,a);e(r.Image.USERNAME_CROSS,!a);var b=this.joinGame&&this.withFriends;if(b){var c=z.test(document.getElementById(r.Input.ID).value);e(r.Image.ID_CHECK,c);e(r.Image.ID_CROSS,
!c)}l(r.Text.MESSAGE);if(a)if(!b||c){if(X.connected)return n(r.Button.START),!0}else this.failSendForm("Game ID must be 6 characters, letters and numbers only");else this.failSendForm("Username must be 3-20 characters, letters and numbers only");q(r.Button.START);return!1}};Q.prototype.failSendForm=function(a){t(r.Text.MESSAGE,a);e(r.Text.MESSAGE);this.formSent=!1};Q.prototype.sendForm=function(){t(r.Text.MESSAGE,"Joining game...");e(r.Text.MESSAGE);var a=this.joinGame&&this.withFriends;a={type:y.FORM,
host:this.createGame,name:document.getElementById(r.Input.USERNAME).value,gameID:a?document.getElementById(r.Input.ID).value:"",players:this.players};X.send(a);this.formSent=!0};Q.prototype.hide=function(){this.inTeamSelection=!1;for(var a in r)for(var b in r[a])l(r[a][b])};Q.prototype.resize=function(){var a=window.innerWidth/500,b=window.innerHeight/500;a=a<b?a:b;O||(a*=.75);document.getElementById("input").style.transform="translate(-50%, -50%) scale("+a+")";document.getElementById("top_display").style.transform=
"scale("+a+")"};Q.prototype.updateIngameGui=function(){if(H.myTeam){var a=g(U)&&U.isMyPlanet();H.myTeam.shipCount!==this.lastShips&&(this.lastShips=H.myTeam.shipCount,t(r.Text.SHIPS,"Ships: "+H.myTeam.shipCount));g(H.myTeam.pixels)&&H.myTeam.pixels!==this.lastPixels&&(this.lastPixels=H.myTeam.pixels,t(r.Text.PIXELS,"Pixels: "+H.myTeam.pixels),this.updatePlanetGui(a,!0,!1));a!==this.lastFocus&&(this.lastFocus=a,e(r.Text.PLANET_TEXT,a),e(r.Text.PLANET_SHIPS,a),this.lastPlanetShips=-1,e(r.Text.BUY,a),
e(r.Button.BUY_SPAWN,a),e(r.Button.BUY_SHIPS_1000,a),e(r.Button.BUY_SHIPS_100,a),e(r.Button.BUY_SHIPS_10,a),e(r.Text.SEND,a),e(r.Button.SEND_SHIPS_1000,a),e(r.Button.SEND_SHIPS_100,a),this.updatePlanetGui(a,!0,!0));a&&U.shipCount!==this.lastPlanetShips&&(this.lastPlanetShips=U.shipCount,t(r.Text.PLANET_SHIPS,"Ships: "+U.shipCount),this.updatePlanetGui(a,!1,!0))}};Q.prototype.updatePlanetGui=function(a,b,c){b&&(n(r.Button.BUY_SHIPS_1000,800<=H.myTeam.pixels),n(r.Button.BUY_SHIPS_100,90<=H.myTeam.pixels),
n(r.Button.BUY_SHIPS_10,10<=H.myTeam.pixels),a&&10<=U.spawnCount()?(t(r.Button.BUY_SPAWN,"MAX SPAWNS"),q(r.Button.BUY_SPAWN)):(t(r.Button.BUY_SPAWN,"1 Spawn (200P)"),n(r.Button.BUY_SPAWN,200<=H.myTeam.pixels)));c&&a&&(a=U.shipCount,100<a?(n(r.Button.SEND_SHIPS_1000),t(r.Button.SEND_SHIPS_1000,a+" Ships")):(q(r.Button.SEND_SHIPS_1000),t(r.Button.SEND_SHIPS_1000,"100 Ships")),t(r.Button.SEND_SHIPS_1000,Math.min(Math.max(a,100),1E3)+" Ships"),n(r.Button.SEND_SHIPS_1000,100<a),t(r.Button.SEND_SHIPS_100,
Math.min(Math.max(a,10),100)+" Ships"),n(r.Button.SEND_SHIPS_100,10<=a))};Q.prototype.gotoTeamSelection=function(){this.hide();this.inTeamSelection=!0;e(r.Button.START);e(r.Button.QUIT);e(r.Text.ID_DISPLAY1);e(r.Text.ID_DISPLAY2);e(r.Button.TEAM_RED);e(r.Button.TEAM_ORANGE);e(r.Button.TEAM_YELLOW);e(r.Button.TEAM_GREEN);e(r.Button.TEAM_BLUE);e(r.Button.TEAM_PURPLE);e(r.List.TEAM_RED);e(r.List.TEAM_ORANGE);e(r.List.TEAM_YELLOW);e(r.List.TEAM_GREEN);e(r.List.TEAM_BLUE);e(r.List.TEAM_PURPLE);e(r.Text.PING)};
Q.prototype.gotoPauseMenu=function(a){a=g(a)?a:!0;l(r.Text.COUNTDOWN);e(r.Text.ID_DISPLAY1);e(r.Text.ID_DISPLAY2);e(r.Text.PAUSE);a&&(e(r.Text.PAUSE_MESSAGE),t(r.Text.PAUSE_MESSAGE,"A player has left and the game has paused"));e(r.Button.RESUME);n(r.Button.RESUME);e(r.Button.QUIT);e(r.Text.MESSAGE);t(r.Text.MESSAGE,"Resumed players (...)")};Q.prototype.showInGameGUI=function(){e(r.Text.PING);e(r.Text.PIXELS);e(r.Text.SHIPS)};var R=function(a){this.name=a};$jscomp.inherits(R,Object);var aa=function(){this.ws=
null;this.ping=200;this.countDown=0;this.connectionAttempts=-1;this.connected=!1};$jscomp.inherits(aa,Object);aa.prototype.connect=function(a){e(r.Text.CONNECTION_MESSAGE);t(r.Text.CONNECTION_MESSAGE,"Connecting to Server");try{var b=location.host.split(":")[0]}catch(fa){b="localhost"}this.ws=(a=g(a)?a:!1)?new WebSocket("wss://"+b+":7438"):new WebSocket("ws://"+b+":7438");var c=this;this.ws.onerror=function(a){console.log("The WebSocket experienced an error");console.log(a)};this.ws.onclose=function(a){console.log("The WebSocket was closed ["+
a.code+"] ("+a.reason+")");c.connected&&T.gotoTitle();c.connectionAttempts++;c.connected=!1;T.formSent=!1;T.updateStartButton();c.connect()};this.ws.onopen=function(a){console.log("The WebSocket was opened succesfully!");c.connectionAttempts=-1;c.connected=!0;t(r.Text.CONNECTION_MESSAGE,"Setting up Session");T.formSent=!1;a=localStorage.getItem("sess");g(a)?c.send({type:y.SESSION,sessID:a}):c.send({type:y.SESSION})};this.ws.onmessage=function(a){try{var b=JSON.parse(a.data);c.parse(b.type,b)}catch(ea){console.log(ea)}}};
aa.prototype.send=function(a){this.ws.send(JSON.stringify(a))};aa.prototype.parse=function(a,b){switch(a){case y.PING_PROBE:X.send({type:y.PING_PROBE});break;case y.PING_SET:this.ping=b.ping;t(r.Text.PING,"Ping: "+this.ping+"ms");break;case y.FORM:T.failSendForm(b.reason);break;case y.JOIN_GAME:H=new Z(b.gameID,b.maxPlayers);(H.started=b.started)||T.gotoTeamSelection();break;case y.SESSION:l(r.Text.CONNECTION_MESSAGE);this.sessID=b.sessID;console.log("Session: "+b.sessID);localStorage.setItem("sess",
b.sessID);T.updateStartButton();break;case y.UPDATE_MESSAGE:n(r.Button.START,b.startEnabled);e(r.Text.MESSAGE);t(r.Text.MESSAGE,b.message);e(r.Text.PLAYER_COUNT);t(r.Text.PLAYER_COUNT,"Players: ("+b.playerCount+"/"+b.maxPlayers+")");break;default:H&&H.parse(a,b)}};var Z=function(a,b){b=S.call(this,a,b)||this;b.myTeam=null;b.diff=0;t(r.Text.ID_DISPLAY2,a);return b};$jscomp.inherits(Z,S);Z.prototype.removeSystem=function(){J.removeChild(this.system);this.system=null};Z.prototype.update=function(a){S.prototype.update.call(this,
a);T.updateIngameGui();this.countdown&&(a=this.targetTime-Date.now(),t(r.Text.COUNTDOWN,"Starting Game in "+Math.ceil(a/1E3)),0>=a&&(l(r.Text.COUNTDOWN),this.countdown=!1,this.play(),this.update(.001*-a)))};Z.prototype.onEscape=function(){g(I)?a():w()};Z.prototype.onMouseClick=function(b){this.system&&(g(I)?(V&&I.sendShipsToClick(V,K),a()):(b=this.system.getPlanet(b.world.x,b.world.y))?U!==b&&(U=b,b=b.calcPosition(.3),J.snap(b.x,b.y,{time:300,removeOnComplete:!0,ease:"easeOutQuart"}),J.snapZoom({height:250,
time:300,removeOnComplete:!0,ease:"easeInOutSine"})):(v(),w()))};Z.prototype.parse=function(a,b){switch(a){case y.PAUSE:this.countdown=!1;this.diff=b.time-this.time;console.log("this: "+this.time);console.log("pack: "+b.time);console.log("diff: "+this.diff);0>this.diff?this.diff=-this.diff:0<this.diff&&(this.update(this.diff),this.diff=0);this.pause();T.gotoPauseMenu();break;case y.SET_TIME:this.time=b.time;console.log("Setting Time: "+this.time);break;case y.PLAY:this.countdown=!0;this.targetTime=
Date.now()+4E3+b.maxPing+this.diff-X.ping;e(r.Text.COUNTDOWN);l(r.Text.ID_DISPLAY1);l(r.Text.ID_DISPLAY2);l(r.Text.PAUSE);l(r.Text.PAUSE_MESSAGE);l(r.Button.RESUME);l(r.Button.QUIT);l(r.Text.MESSAGE);break;case y.RESUME:t(r.Text.MESSAGE,"Resumed players ("+b.p+"/"+b.m+")");break;case y.SEND_SHIPS:var c=this.system.getPlanetByID(b.pl),d=this.system.getPlanetByID(b.to);d=new G(this.system,b.x1,b.y1,b.x2,b.y2,b.shipSpeed,b.amount,c.team.colour,d,b.duration);this.system.sendingShips.push(this.system.addChild(d));
c.removeShips(b.amount);d.update(.001*X.ping);break;case y.CREATE_SPAWN:c=this.system.getPlanetByID(b.planet);b.force?c.createSpawn(!0):(c.pixelCounter-=c.pixelRate*X.ping*.001,c.createSpawn(!1),c.pixelCounter+=c.pixelRate*X.ping*.001);break;case y.SET_PLANET_TEAM:c=this.system.getPlanetByID(b.planet);b=this.getTeam(b.team);c.setTeam(b);break;case y.UPDATE_PIXELS:this.myTeam.setPixels(b.pl);break;case y.CREATE_SHIPS:this.system.getPlanetByID(b.pl).createShips(b.n,!1,b.c);break;case y.CREATE_SYSTEM:this.system=
W.load(b.sys,this);J.addChild(this.system);T.hide();T.showInGameGUI();this.started?T.gotoPauseMenu(!1):(t(r.Text.COUNTDOWN,"Starting Game soon..."),e(r.Text.COUNTDOWN));this.play();this.update(0);this.pause();J.resumePlugin("drag");J.resumePlugin("pinch");J.resumePlugin("wheel");J.moveCenter(0,0);break;case y.CREATE_TEAMS:this.teams=[];for(var f in b.teams)this.teams.push(new M(b.teams[f].colour,b.teams[f].id));break;case y.UPDATE_SHIPS:this.myTeam.updateShips(b.n);break;case y.UPDATE_TEAMS:document.getElementById(r.List.TEAM_RED).innerHTML=
"";document.getElementById(r.List.TEAM_ORANGE).innerHTML="";document.getElementById(r.List.TEAM_YELLOW).innerHTML="";document.getElementById(r.List.TEAM_GREEN).innerHTML="";document.getElementById(r.List.TEAM_BLUE).innerHTML="";document.getElementById(r.List.TEAM_PURPLE).innerHTML="";for(var g in this.teams)this.teams[g].players=[];for(c in b.teams)for(d in a=b.teams[c],f=a.id,g=this.getTeam(f),a.players){var h=a.players[d];g.addPlayer(new R(h));var k=void 0;switch(f){case 0:k=document.getElementById(r.List.TEAM_RED);
break;case 1:k=document.getElementById(r.List.TEAM_ORANGE);break;case 2:k=document.getElementById(r.List.TEAM_YELLOW);break;case 3:k=document.getElementById(r.List.TEAM_GREEN);break;case 4:k=document.getElementById(r.List.TEAM_BLUE);break;case 5:k=document.getElementById(r.List.TEAM_PURPLE)}var m=document.createElement("li");m.appendChild(document.createTextNode(h));k.appendChild(m)}this.myTeam=this.getTeam(b.myTeam)}};var H,Y,T,X,J,ba;window.onload=function(){PIXI.loader.add("sunTexture","game/assets/sun.png").add("planet1",
"game/assets/planet1.png").add("planet2","game/assets/planet2.png").add("ship","game/assets/ship.png").add("spawn","game/assets/spawn.png").add("infantry","game/assets/infantry.png").load(function(a,b){ba=b;Y=new PIXI.Application(600,600,{antialias:!0,transparent:!1});window.onorientationchange=A;window.onresize=A;Y.view.style.position="absolute";Y.view.style.display="block";document.body.insertBefore(Y.view,document.getElementById("top_display"));Y.renderer.autoResize=!0;Y.renderer.backgroundColor=
B.BACKGROUND;document.addEventListener("contextmenu",function(a){return a.preventDefault()});J=new Viewport({screenWidth:600,screenHeight:600,worldWidth:600,worldHeight:600,ticker:Y.ticker});Y.stage.addChild(J);J.drag().wheel().pinch({percent:4.5}).clampZoom({minWidth:1,minHeight:100,maxWidth:6E5,maxHeight:1E3}).decelerate();J.on("drag-start",function(a){v()});J.on("pinch-start",v);J.on("wheel",function(){v(!1)});J.on("clicked",function(a){if(H)H.onMouseClick(a)});J.on("snap-end",function(){v(!1);
U&&J.follow(U)});J.fitHeight(800);J.moveCenter(0,0);window.lastElapsed=Date.now();Y.ticker.add(function(){if(H){var a=Date.now(),b=a-lastElapsed;lastElapsed=a;H.update(.001*b)}});X=new aa;X.connect();T=new Q;T.gotoTitle();A()})};var da=!1,U}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"pixi-particles":33,"pixi-viewport":46,"pixi.js":163}]},{},[206]);
